<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8"/>
        <link rel="icon" href="imagens/favicon.ico"/>
        <title>Aprenda Python</title>
        <link rel="stylesheet" href="css/estilo.css"/>
    </head>
    <body>
        <div>
            <header>
                <h1>Aprenda Python</h1>
                <menu>
                    <li><a href="index.html">Página Inicial</a></li>
                    <li><a href="contato.html">Contato!</a></li>
                    <li><a href="tudo-sobre-python-1.html">Tudo sobre Python Parte 1!</a></li>
                    <li><a href="tudo-sobre-python-2.html">Tudo sobre Python Parte 2!</a></li>
                    <li><a href="tudo-sobre-python-3.html">Tudo sobre Python Parte 3!</a></li>
                    <li><a href="tudo-sobre-python-4.html">Tudo sobre Python Parte 4!</a></li>
                    <li><a href="tudo-sobre-python-5.html">Tudo sobre Python Parte 5!</a></li>
                    <li><a href="tudo-sobre-python-6.html">Tudo sobre Python Parte 6!</a></li>
                    <li><a href="tudo-sobre-python-7.html">Tudo sobre Python Parte 7!</a></li>
                    <li><a href="tudo-sobre-python-8.html" onclick="alert('Você já Está na Matéria desse Link!'); return false">Tudo sobre Python Parte 8!</a></li>
                </menu>
            </header>
           
<h2>Tudo sobre Python Parte 8</h2>

<h3>Tratamento de Erros e Exceções</h3>

<p>Vamos supor um exemplo de erro (por exemplo, usar <code>primt(x)</code>), isso é um erro de sintaxe, mas também tem casos que mesmo sem esse tipo de problema, o programa dá algum erro, vamos supor por exemplo:</p>

<pre>
<code>
print(x)
</code>
</pre>

<p>Como a variável x não foi inicializada, ele vai dar um erro semântico, e no PyCharm aparece os erros vermelhos, que é o significado do erro. Nesse caso é chamado de exceção, e no caso foi a "NameError".</p>

<p>Veja outro exemplo que soltará uma exceção, caso não seja inserido um número:</p>

<pre>
<code>
n = int(input("Número: "))
print(f"Você digitou o número {n}.")
</code>
</pre>

<p>Ele soltará a exceção "ValueError", nesse caso.</p>

<p>Outro exemplo que pode dar exceção:</p>

<pre>
<code>
a = int(input("Numerador: "))
b = int(input("Denominador: "))
r = a / b
print(f"O resultado é {r}.")
</code>
</pre>

<p>Ao colocar denominador "0", ele dará a exceção "ZeroDivisionError".</p>

<p>Veja esse outro exemplo, que gerará o erro "TypeError":</p>

<pre>
<code>
r = 2 / "2"
</code>
</pre>

<p>Esse exemplo dará um "IndexError":</p>

<pre>
<code>
lst = [3, 6, 4]
print(lst[3])
</code>
</pre>

<p>Ao tentar importar um módulo que não existe, gerará a exceção "ModuleNotFoundError".</p>

<p>Resumindo, as exceções são mensagens disparadas ao ter um erro semântico no programa, que interromperá a execução dele e mostrará um aviso dela.</p>

<p>Existem muitas exceções em Python, mas a maioria das exceções conseguimos identificar ao fazermos nossos programas com esses erros, e posteriormente tratá-las. Elas são filhas da classe Exception no Python.</p>

<p>Pra tratar exceções em Python, usamos a estrutura try except, dessa forma:</p>

<pre>
<code>
try:
    # Código a tentar ser executado
except:
    # Código a ser executado caso o try tenha uma falha
else:
    # Código a ser executado caso o try não dê erro
finally:
    # Código a ser executado sempre
</code>
</pre>

<p>Eles sempre tem que estar nessa ordem, try, except, else e finally, mas else e finally são opcionais.</p>

<p>Veja como ficará o programa de divisão assim:</p>

<pre>
<code>
try:
    a = int(input("Numerador: "))
    b = int(input("Denominador: "))
    r = a / b
except:
    print("Infelizmente deu erro! :(")
else:
    print(f"O resultado é {r:.1f}.")
finally:
    print("Volte Sempre!")
</code>
</pre>

<p>No caso acima, o erro foi tratato e se tentarmos dividir por zero ou inserir uma string, ele exibirá a nossa mensagem.</p>

<p>Podemos jogar a exceção numa variável, assim:</p>

<pre>
<code>
try:
    a = int(input("Numerador: "))
    b = int(input("Denominador: "))
    r = a / b
except Exception as erro:
    print(f"Problema encontrado foi {erro.__class__}.")
else:
    print(f"O resultado é {r:.1f}.")
finally:
    print("Volte Sempre!")
</code>
</pre>

<p>Toda estrutura try pode ter mais de um except, cada um com seu erro especificado, ao invés de colocar um except genérico, por exemplo:</p>

<pre>
<code>
try:
    a = int(input("Numerador: "))
    b = int(input("Denominador: "))
    r = a / b
except (ValueError, TypeError):
    print("Tivemos um problema com os tipos!")
except ZeroDivisionError:
    print("Não é possível dividir por zero!")
except KeyboardInterrupt:
    print("Não foram informados os dados.")
except Exception as erro:
    print(f"O erro encontrado foi {erro.__class__}.")
else:
    print(f"O resultado é {r:.1f}.")
finally:
    print("Volte Sempre!")
</code>
</pre>

<p>PS: Ao testar um programa com exceções, teste fazendo o certo primeiro, pra depois provocar as exceções.</p>

<p>Veja esse exemplo com arquivos:</p>

<pre>
<code>
try:
    arquivo = open("arquvo.txt", "rt")

    for l in arquivo:
        print(l)

    arquivo.close()
except:
    print("Arquivo não Encontrado!")
</code>
</pre>

<p>Podemos também criar nossas próprias condições para exceções, usando um if e o comando <code>raise</code>, assim:</p>

<pre>
<code>
try:
    sexo = str(input("Digite o sexo [M/F]: ")).strip().upper()[0]

    if sexo not in "MmFf":
        raise Exception("Não foi inserido um sexo válido!")
except Exception as erro:
    print(erro)
else:
    print(f"O sexo digitado foi {sexo}.")
</code>
</pre>

<p>No caso acima, ele tentará executar o programa, e caso o sexo inserido não seja M ou F, ele lançará a exceção Exception e interromperá a execução no try, passando a executar o except especificado.</p>

<p>O ideal é colocar o raise numa função, dessa forma:</p>

<pre>
<code>
def verifSexo(sexo):
    if sexo not in "MmFf":
        raise Exception("Não foi inserido um sexo válido!")

    print(f"O sexo digitado foi {sexo}.")

try:
    s = str(input("Digite o sexo [M/F]: ")).strip().upper()[0]

    verifSexo(s)
except Exception as erro:
    print(erro)
</code>
</pre>

<p>PS: É interessante colocar a cor vermelha nas exceções criadas.</p>

<h3>Rich no Python: Cores, Emojis, Tabelas e Debug Muito Mais Bonitos</h3>

<p>Para facilitar o uso de cores, emojis, tabelas e outros recursos, podemos usar a biblioteca <code>rich</code> pra isso.</p>

<p>Depois de instalado, podemos usar a biblioteca para utilizar cores no print de forma muito mais fácil, assim:</p>

<pre>
<code>
from rich import print

print("[red]Olá, Mundo![/red]")
</code>
</pre>

<p>No caso acima, ele substitui o print padrão do Python por um print especial da bibliteca Rich, que permite coisas como colocar cores, de forma parecida com o HTML.</p>

<p>PS: Para isso funcionar, devemos ir em Current File e em Run With Parameters, e em Python, marque em Modify Options, a configuração Emulate Terminal in Output Console.</p>

<p>Podemos nem escrever o nome do bloco na parte de fechamento, além de colocar emojis, assim:</p>

<pre>
<code>
from rich import print

print("[red]Olá, Mundo![/] :globe_showing_americas:")
print("[bold blue on white]Olá, Pequeno Gafanhoto![/] :vulcan_salute:")
print(":+1: :-1:")
</code>
</pre>

<p>PS: Para vermos os emojis cadastrados no Rich, digite na linha de comando <code>python -m rich.emoji</code></p>

<p>Para criar um painel simples, faça assim:</p>

<pre>
<code>
from rich import print
from rich.panel import Panel # Atenção as maiúsculas e minúsculas

caixa = Panel("Esse aqui é um painel de exemplo!")

print(caixa)
</code>
</pre>

<p>Podemos colocar outras configurações no objeto da classe Panel, assim:</p>

<pre>
<code>
caixa = Panel("[white]Esse aqui é um painel de exemplo![/] :+1:", title = "Mensagem", style = "red", width = 35)
</code>
</pre>

<p>No Panel, podemos colocar os blocos de cores e os emojis normalmente.</p>

<p>Para criar uma tabela, fazemos assim:</p>

<pre>
<code>
from rich import print
from rich.table import Table # Atenção às maiúsculas e minúsculas

tabela = Table(title = "Tabela de Preços")

tabela.add_column("Nome")
tabela.add_column("Preço")

tabela.add_row("Lápis", "R$1,50")
tabela.add_row("Borracha", "R$5,00")

print(tabela)
</code>
</pre>

<p>Podemos também configurar alguns dados assim:</p>

<pre>
<code>
tabela.add_column("Nome", justify = "right", style = "red")
tabela.add_column("Preço", justify = "center", style = "blue")

tabela.add_row("Lápis", "R$1,50")
tabela.add_row("Borracha", "[green]R$5,00[/]")
</code>
</pre>

<p>Podemos melhora a exibição de alguns dados assim:</p>

<pre>
<code>
from rich import print

print(int.__dict__)
</code>
</pre>

<p>E para mostrar os dados de uma classe do Python, faça assim:</p>

<pre>
<code>
from rich import print
from rich import inspect

inspect(int, all = True)
</code>
</pre>

<p>Vamos criar uma função assim:</p>

<pre>
<code>
def divisao(x, y):
    return x / y

print(divisao(50, 0))
</code>
</pre>

<p>Ele dará erro devido à exceção (de divisão por zero) não estar sendo tratada. No entanto, podemos usar a biblioteca Rich pra tratar ele, assim:</p>

<pre>
<code>
from rich.traceback import install

install()

def divisao(x, y):
    return x / y

print(divisao(50, 0))
</code>
</pre>

<p>Dessa forma, ele exibirá o erro de uma forma mais bonita visualmente.</p>

<ul>
    <li><a href="tudo-sobre-python-7.html">Parte Anterior da Matéria!</a></li>
    <!--<li><a href="tudo-sobre-python-9.html">Continuação da Matéria!</a></li>-->
</ul>

        </div>
    </body>
</html>