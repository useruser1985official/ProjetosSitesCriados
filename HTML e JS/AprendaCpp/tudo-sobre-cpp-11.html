<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8"/>
        <link rel="icon" href="_imagens/favicon.ico"/>
        <title>Aprenda C++</title>
        <link rel="stylesheet" href="_css/estilo.css"/>
    </head>
    <body>
        <div>
            <header>
                <h1>Aprenda C++</h1>
                <menu>
                    <li><a href="index.html">Página Inicial</a></li>
                    <li><a href="contato.html">Contato!</a></li>
                    <li><a href="tudo-sobre-cpp-1.html">Tudo sobre C++ Parte 1!</a></li>
                    <li><a href="tudo-sobre-cpp-2.html">Tudo sobre C++ Parte 2!</a></li>
                    <li><a href="tudo-sobre-cpp-3.html">Tudo sobre C++ Parte 3!</a></li>
                    <li><a href="tudo-sobre-cpp-4.html">Tudo sobre C++ Parte 4!</a></li>
                    <li><a href="tudo-sobre-cpp-5.html">Tudo sobre C++ Parte 5!</a></li>
                    <li><a href="tudo-sobre-cpp-6.html">Tudo sobre C++ Parte 6!</a></li>
                    <li><a href="tudo-sobre-cpp-7.html">Tudo sobre C++ Parte 7!</a></li>
                    <li><a href="tudo-sobre-cpp-8.html">Tudo sobre C++ Parte 8!</a></li>
                    <li><a href="tudo-sobre-cpp-9.html">Tudo sobre C++ Parte 9!</a></li>
                    <li><a href="tudo-sobre-cpp-10.html">Tudo sobre C++ Parte 10!</a></li>
                    <li><a href="tudo-sobre-cpp-11.html" onclick="alert('Você já Está na Matéria desse Link!'); return false">Tudo sobre C++ Parte 11!</a></li>
                    <li><a href="tudo-sobre-cpp-12.html">Tudo sobre C++ Parte 12!</a></li>
                    <li><a href="tudo-sobre-cpp-13.html">Tudo sobre C++ Parte 13!</a></li>
                    <li><a href="tudo-sobre-cpp-14.html">Tudo sobre C++ Parte 14!</a></li>
                    <li><a href="tudo-sobre-cpp-15.html">Tudo sobre C++ Parte 15!</a></li>
                    <li><a href="tudo-sobre-cpp-16.html">Tudo sobre C++ Parte 16!</a></li>
                </menu>
            </header>
            
<h2>Tudo sobre C++ Parte 11</h2>

<h3>System</h3>

<p>O system é utilizado para executar comandos do Prompt do Windows (ou Terminal em sistemas Unix), isso é útil para determinados programas. Veja um exemplo de uso (importe cstdlib):</p>

<pre>
<code>
#include &lt;iostream&gt;
#include &lt;cstdlib&gt;

using namespace std;

int main() {
    system("dir");

    return 0;
}
</code>
</pre>

<p>No caso acima, o dir (Windows), exibe as pastas e arquivos do diretório encontrado.</p>

<p>Outros comandos que podem ser muito usados são o cls (limpeza da tela) e pause (para pausar o programa).</p>

<p>Um exemplo que podemos usar também é o color, para mudar a cor do programa:</p>

<pre>
<code>
#include &lt;iostream&gt;
#include &lt;cstdlib&gt;

using namespace std;

int main() {
    system("color FD");

    return 0;
}
</code>
</pre>

<p>PS: Só é possível utilizar sempre a mesma cor para o programa todo.</p>

<p>Só que tem um porém, o comando cd não funciona no system (pelo fato dele não manter os dados após cada chamada), nesse caso é necessário utilizar o chdir (importe unistd.h) ou o SetCurrentDirectory (só em Windows, importe windows.h) para navegarmos por pastas no programa, dessa forma:</p>

<pre>
<code>
#include &lt;iostream&gt;
#include &lt;cstdlib&gt;
#include &lt;unistd.h&gt;

using namespace std;

int main() {
    chdir("C:/Users");
    system("dir");

    return 0;
}
</code>
</pre>

<p>PS: Utilize sempre barras pra direita, as pra esquerda são interpretadas como sequências de escape. Caso use algum comando que tenha aspas, como os de navegação de pastas ou manipulação de registro, use sequências de escape <code>\"</code> e <code>\\</code>, aonde estiver " e \.</p>

<p>As variáveis do DOS/Terminal (como %username% em Windows ou $HOME em Unix) não são identificadas por esse método, nesse caso usamos o getenv, sem qualquer símbolo de indicação de variável. Veja um exemplo:</p>

<pre>
<code>
#include &lt;iostream&gt;
#include &lt;cstdlib&gt;
#include &lt;unistd.h&gt;

using namespace std;

int main() {
    chdir(getenv("USERPROFILE"));
    chdir("Desktop");

    system("dir");

    return 0;
}
</code>
</pre>

<p>PS: Em Windows é possível e até preferível usar no lugar do chdir, SetCurrentDirectory(), nesse caso importe windows.h.</p>

<p>O getenv funciona com esse parâmetros:</p>

<table>
    <tr>
        <th>Variável</th>
        <th>Conteúdo Exibido</th>
    </tr>
    <tr>
        <td>USERPROFILE</td>
        <td>C:\Users\UsuarioAtual</td>
    </tr>
    <tr>
        <td>PROGRAMDATA</td>
        <td>C:\Programdata</td>
    </tr>
    <tr>
        <td>ALLUSERSPROFILE</td>
        <td>C:\Programdata</td>
    </tr>
    <tr>
        <td>WINDIR</td>
        <td>C:\Windows</td>
    </tr>
    <tr>
        <td>SYSTEMROOT</td>
        <td>C:\Windows</td>
    </tr>
    <tr>
        <td>PROGRAMFILES</td>
        <td>C:\Program Files</td>
    </tr>
    <tr>
        <td>COMMONPROGRAMFILES</td>
        <td>C:\Program Files\Common Files</td>
    </tr>
    <tr>
        <td>USERNAME</td>
        <td>"UsuarioAtual"</td>
    </tr>
    <tr>
        <td>COMPUTERNAME</td>
        <td>Nome do Computador</td>
    </tr>
    <tr>
        <td>LOCALAPPDATA</td>
        <td>C:\Users\Usuário Atual\AppData\Local</td>
    </tr>
    <tr>
        <td>APPDATA</td>
        <td>C:\Users\Usuário Atual\AppData\Roaming</td>
    </tr>
    <tr>
        <td>ERRORLEVEL</td>
        <td>Código de Erro do Último Comando (quando é diferente de 0).</td>
    </tr>
    <tr>
        <td>CD</td>
        <td>Pasta Atual</td>
    </tr>
    <tr>
        <td>USERDOMAIN</td>
        <td>Nome do Computador</td>
    </tr>
    <tr>
        <td>SYSTEMDRIVE</td>
        <td>C:</td>
    </tr>
    <tr>
        <td>HOMEDRIVE</td>
        <td>C:</td>
    </tr>
    <tr>
        <td>SYSTEMDIRECTORY</td>
        <td>C:\Windows\System32</td>
    </tr>
    <tr>
        <td>COMSPEC</td>
        <td>C:\Windows\System32\cmd.exe</td>
    </tr>
    <tr>
        <td>TEMP</td>
        <td>C:\Users\Usuário Atual\AppData\Local\Temp</td>
    </tr>
    <tr>
        <td>TMP</td>
        <td>C:\Users\Usuário Atual\AppData\Local\Temp</td>
    </tr>
    <tr>
        <td>HOMEPATH</td>
        <td>\Users\Usuário Atual</td>
    </tr>
    <tr>
        <td>PATH</td>
        <td>Retorna o path do sistema</td>
    </tr>
    <tr>
        <td>PATHEXT</td>
        <td>Retorna as extensões de executáveis</td>
    </tr>
    <tr>
        <td>OS</td>
        <td>Retorna o nome do Sistema Operacional</td>
    </tr>
    <tr>
        <td>PROCESSOR_IDENTIFIER</td>
        <td>Retorna dados sobre o processador</td>
    </tr>
    <tr>
        <td>PROCESSOR_ARCHITECTURE</td>
        <td>Retorna a arquitetura do processador</td>
    </tr>
</table>

<p>Para usar em Linux, o processo é o mesmo, só mudando a navegação entre pastas (seria coisas como /usr/local/bin) e os comandos do getenv, que são esses:</p>

<table>
    <tr>
        <th>Variável</th>
        <th>Conteúdo Exibido</th>
    </tr>
    <tr>
        <td>HOME</td>
        <td>/home/UsuarioAtual</td>
    </tr>
    <tr>
        <td>USER</td>
        <td>"UsuarioAtual"</td>
    </tr>
    <tr>
        <td>LOGNAME</td>
        <td>"UsuarioAtual"</td>
    </tr>
	<tr>
        <td>PWD</td>
        <td>Diretório Atual</td>
    </tr>
    <tr>
        <td>LANG</td>
        <td>Idioma Atual</td>
    </tr>
	<tr>
        <td>SHELL</td>
        <td>/bin/bash (ou o Shell Atual)</td>
    </tr>
	<tr>
        <td>TERM</td>
        <td>Tipo de Terminal Usado</td>
    </tr>
	<tr>
        <td>PATH</td>
        <td>Diretórios a Pesquisar</td>
    </tr>
	<tr>
        <td>MAIL</td>
        <td>E-mail Definido</td>
    </tr>
	<tr>
        <td>OSTYPE</td>
        <td>Tipo de Sistema Usado</td>
    </tr>
    <!--
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
	<tr>
        <td></td>
        <td></td>
    </tr>
    -->
</table>

<h3>Operações com Arquivos - Parte 1 - Ofstream</h3>

<p>Primeiramente, importe a biblioteca fstream. Basicamente, o ofstream é pra saída, o ifstream é de entrada e o fstream pode ser configurado para ambos.</p>

<p>Nessa parte, trabalharemos só com o ofstream. Que podemos fazer assim:</p>

<pre>
<code>
int main() {
    ofstream arquivo; // Importe fstream

    return 0;
}
</code>
</pre>

<p>Para criar o arquivo (se existir ele sobreescreverá o já existente), basta usar o método open(), assim:</p>

<pre>
<code>
int main() {
    ofstream arquivo; // Importe fstream
    
    arquivo.open("arquivo.txt");

    return 0;
}
</code>
</pre>

<p>E para armazenar conteúdo nesse arquivo, basta fazer que nem o cout, o substituindo pela variável criada, assim:</p>

<pre>
<code>
int main() {
    ofstream arquivo; // Importe fstream
    
    arquivo.open("arquivo.txt");
    
    arquivo << "Texto que será armazenado no arquivo!\n";
	
    cout << "Arquivo Escrito com Sucesso!" << endl

    return 0;
}
</code>
</pre>

<p>PS: Para liberar a memória, não esqueça de fechar o arquivo com o método close(), assim:</p>

<pre>
<code>
int main() {
    ofstream arquivo; // Importe fstream

    arquivo.open("arquivo.txt");

    arquivo << "Texto que será armazenado no arquivo!\n";
    
    arquivo.close();
	
    cout << "Arquivo Escrito com Sucesso!" << endl

    return 0;
}
</code>
</pre>

<p>PS: Ao executar novamente, ele vai substituir o texto escrito no arquivo, caso esteja outra coisa.</p>

<p>Para podermos adicionar conteúdo ao arquivo sem substituir, usamos um parâmetro adicional no open, o ios::app, assim:</p>

<pre>
<code>
arquivo.open("arquivo.txt", ios::app);
</code>
</pre>

<p>Podemos ter mais de uma inserção de conteúdo ao mesmo tempo, assim:</p>

<pre>
<code>
int main() {
    ofstream arquivo; // Importe fstream

    arquivo.open("arquivo.txt");

    arquivo << "Linha 1!\n";
    arquivo << "Linha 2!\n";
    arquivo << "Linha 3!\n";

    arquivo.close();
	
    cout << "Arquivo Escrito com Sucesso!" << endl

    return 0;
}
</code>
</pre>

<h3>Operações com Arquivos - Parte 2 - Ifstream</h3>

<p>Para ler arquivos, usamos o ifstream, mas também precisaremos de uma string e um laço while para isso, como podemos ver no código, aproveitando o txt do programa anterior:</p>

<pre>
<code>
int main() {
    ifstream entrada; // Importe fstream
    string linha;
    
    entrada.open("arquivo.txt");
    
    if(entrada.is_open()) {
        while(getline(entrada, linha)) {
            cout << linha << endl;
        }
        entrada.close();
    }
    else {
        cout << "Não foi possível abrir o arquivo!" << endl;
    }

    return 0;
}
</code>
</pre>

<h3>Operações com Arquivos - Parte 3 - Fstream</h3>

<p>Na classe Ofstream, só podemos usar para escrever no arquivo, assim como na classe Ifstream que só podemos usar para ler, mas podemos usar a classe Fstream para ambas as funções, com uma classe só.</p>

<p>Esse é o código que colocaremos no programa:</p>

<pre>
<code>
int main() {
    fstream arquivo;
    char opc;
    string nome, linha;
    
    arquivo.open("arquivo.txt", ios::out); // Saída do programa pro arquivo.
    
    do {
        cout << "Digite um nome: ";
        cin >> nome;
        
        arquivo << nome << "\n";
        
        cout << "Deseja digitar mais nomes? [S/N] ";
        cin >> opc;
        
        system("cls"); // Importe cstdlib, use clear no Linux
    }
    while((char)toupper(opc) == 'S'); // Importe cctype
    
    arquivo.close();

    return 0;
}
</code>
</pre>

<p>Como visto, a única diferença no open, ao usar o fstream, é a indicação <code>ios::out</code>, que indica a saída do programa para o arquivo.</p>

<p>PS: Para não sobreescrever o arquivo, da mesma forma, podemos colocar o app no out, dessa forma:</p>

<pre>
<code>
arquivo.open("arquivo.txt", ios::out | ios::app);
</code>
</pre>

<p>Para ler o mesmo arquivo (entrada do arquivo para o programa)., use <code>ios::in</code>. Podemos fazer assim (coloque esse código logo abaixo do programa, antes do return):</p>

<pre>
<code>
arquivo.open("arquivo.txt", ios::in); // Entrada do arquivo pro programa.

if(arquivo.is_open()) {
    cout << "Nomes digitados: " << endl << endl;

    while(getline(arquivo, linha)) {
        cout << linha << endl;
    }
    arquivo.close();
}
else {
    cout << "Não foi Possível Abrir o Arquivo!" << endl;
}
</code>
</pre>

<ul>
    <li><a href="tudo-sobre-cpp-10.html">Parte Anterior da Matéria!</a></li>
    <li><a href="tudo-sobre-cpp-12.html">Continuação da Matéria!</a></li>
</ul>
        </div>
    </body>
</html>