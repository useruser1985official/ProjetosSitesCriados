<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8"/>
        <link rel="icon" href="_imagens/favicon.ico"/>
        <title>Aprenda PHP</title>
        <link rel="stylesheet" href="_css/estilo.css"/>
    </head>
    <body>
        <div>
            <header>
                <h1>Aprenda PHP</h1>
                <menu>
                    <li><a href="index.html">Página Inicial</a></li>
                    <li><a href="contato.html">Contato!</a></li>
                    <li><a href="tudo-sobre-php-1.html">Tudo sobre PHP Parte 1!</a></li>
                    <li><a href="tudo-sobre-php-2.html" onclick="alert('Você já Está na Matéria desse Link!'); return false">Tudo sobre PHP Parte 2!</a></li>
                    <li><a href="tudo-sobre-php-3.html">Tudo sobre PHP Parte 3!</a></li>
                    <li><a href="tudo-sobre-php-4.html">Tudo sobre PHP Parte 4!</a></li>
                    <li><a href="tudo-sobre-php-5.html">Tudo sobre PHP Parte 5!</a></li>
                    <li><a href="tudo-sobre-php-6.html">Tudo sobre PHP Parte 6!</a></li>
                </menu>
            </header>
            
<h2>Tudo sobre PHP Parte 2</h2>

<h3>Operadores Relacionais</h3>

<p>Para fazer comparações em PHP, você usa os operadores relacionais iguais aos usados em outras linguagens, que são esses:</p>

<table>
    <tr>
        <th>Operador Aritmético</th>
        <th>Significado</th>
    </tr>
    <tr>
        <td>==</td>
        <td>Igualdade. Não leva em conta os tipos de dados.</td>
    </tr>
    <tr>
        <td>===</td>
        <td>Idêntico. Leva em conta os tipos de dados (sem conversão).</td>
    </tr>
    <tr>
        <td>!=</td>
        <td>Diferente. Não leva em conta os tipos de dados.</td>
    </tr>
    <tr>
        <td>!==</td>
        <td>Não Idêntico. Leva em conta os tipos de dados (sem conversão).</td>
    </tr>
    <tr>
        <td>&gt;</td>
        <td>Maior. Não leva em conta os tipos de dados.</td>
    </tr>
    <tr>
        <td>&lt;</td>
        <td>Menor. Não leva em conta os tipos de dados.</td>
    </tr>
    <tr>
        <td>&gt;=</td>
        <td>Maior ou Igual. Não leva em conta os tipos de dados.</td>
    </tr>
    <tr>
        <td>&lt;=</td>
        <td>Menor ou Igual. Não leva em conta os tipos de dados.</td>
    </tr>
</table>

<p>PS: Você pode usar <code>&lt;&gt;</code> também para diferente, mas esse não é muito usado.</p>

<p>Para usar operadores relacionais, precisamos entender os operadores ternários, que você usa <code>:</code> e <code>?</code>.</p>

<p>Esse operador faz comparações simples e mostra resultados de acordo com o resultado do mesmo. O que estiver antes da interrogação for verdadeiro, receberá o primeiro valor do lado direito, senão receberá o segundo do lado direito. Veja um exemplo, que passamos valores pela URL, e também a operação matemária desejada (soma ou multiplicação):</p>

<pre>
<code>
$n1 = $_GET["a"];
$n2 = $_GET["b"];
$tipo = $_GET["op"];
echo "Os valores passados foram $n1 e $n2.&lt;br/&gt;";
$r = ($tipo == "s") ? $n1 + $n2 : $n1 * $n2;
echo "O resultado será $r.";
</code>
</pre>

<p>Veja também uma diferença básica entre o igual e o idêntico, onde comparamos um mesmo número, em number e em string:</p>

<p>Com igual:</p>

<pre>
<code>
$a = 5;
$b = "5";
$r = ($a == $b) ? "SIM" : "NÃO";
echo "As variáveis A e B são iguais? $r.";
</code>
</pre>
<p>Com idêntico:</p>

<pre>
<code>
$a = 5;
$b = "5";
$r = ($a === $b) ? "SIM" : "NÃO";
echo "As variáveis A e B são iguais? $r.";
</code>
</pre>

<p>Veja outro exemplo de usos de operadores ternários:</p>

<pre>
<code>
$nota1 = $_GET["n1"];
$nota2 = $_GET["n2"];
$m = ($nota1 + $nota2) / 2;
echo "A média entre as notas $nota1 e $nota2 é $m.&lt;br/&gt;";
$sit = ($m &lt; 6) ? "REPROVADO" : "APROVADO";
echo "O aluno está $sit.";
</code>
</pre>

<p>A mesma expressão acima pode ser usada assim:</p>

<pre>
<code>
$nota1 = $_GET["n1"];
$nota2 = $_GET["n2"];
$m = ($nota1 + $nota2) / 2;
echo "A média entre as notas $nota1 e $nota2 é $m.&lt;br/&gt;";
echo "O aluno está " . (($m &lt; 6) ? "REPROVADO" : "APROVADO") . ".";
</code>
</pre>

<p>Lembrando que se for concatenado, tem que colocar entre parênteses porque o operador ternário se comporta como qualquer outro.</p>

<p>Os operadores lógicos em PHP são os mesmos usados em qualquer outra linguagem, que são essas:</p>

<table>
    <tr>
        <th>Operador</th>
        <th>Operação</th>
        <th>Significado</th>
    </tr>
    <tr>
        <td>&&</td>
        <td>AND</td>
        <td>E</td>
    </tr>
    <tr>
        <td>||</td>
        <td>OR</td>
        <td>Ou</td>
    </tr>
    <tr>
        <td>!</td>
        <td>NOT</td>
        <td>Não</td>
    </tr>
    <tr>
        <td>xor ou ^</td>
        <td>XOR</td>
        <td>Ou Exclusivo</td>
    </tr>
</table>

<p>O operador <code>AND</code> retorna true se ambos os operandos envolvidos forem verdadeiros, em outro caso retorna falso, como podem ver:</p>

<table>
    <tr>
        <th>Operando 1</th>
        <th>Operando 2</th>
        <th>Resultado</th>
    </tr>
    <tr>
        <td>false</td>
        <td>false</td>
        <td>false</td>
    </tr>
    <tr>
        <td>false</td>
        <td>true</td>
        <td>false</td>
    </tr>
    <tr>
        <td>true</td>
        <td>false</td>
        <td>false</td>
    </tr>
    <tr>
        <td>true</td>
        <td>true</td>
        <td>true</td>
    </tr>
</table>

<p>O operador <code>OR</code> retorna true se um dos valores pelo menos são verdadeiros, só retorna false se ambos forem falsos, como podem ver:</p>

<table>
    <tr>
        <th>Operando 1</th>
        <th>Operando 2</th>
        <th>Resultado</th>
    </tr>
    <tr>
        <td>false</td>
        <td>false</td>
        <td>false</td>
    </tr>
    <tr>
        <td>false</td>
        <td>true</td>
        <td>true</td>
    </tr>
    <tr>
        <td>true</td>
        <td>false</td>
        <td>true</td>
    </tr>
    <tr>
        <td>true</td>
        <td>true</td>
        <td>true</td>
    </tr>
</table>

<p>O operador <code>NOT</code> simplesmente inverte o valor booleano do operando, por isso chamado de "Operador da Negação", age apenas sobre um valor lógico, como podem ver:</p>

<table>
    <tr>
        <th>Operando</th>
        <th>Resultado</th>
    </tr>
    <tr>
        <td>false</td>
        <td>true</td>
    </tr>
    <tr>
        <td>true</td>
        <td>false</td>
    </tr>
</table>

<p>Em PHP também existe o <code>XOR</code>/<code>^</code> (xor ou ou exclusivo), que recebe os mesmos valores do OR, menos quando todas as premissas são verdadeiras (pode ser uma coisa ou outra, mas nunca as duas. De certa forma, ele retorna false pra iguais e true pra diferentes):</p>

<table>
    <tr>
        <th>Operando 1</th>
        <th>Operando 2</th>
        <th>Resultado</th>
    </tr>
    <tr>
        <td>true</td>
        <td>true</td>
        <td>false</td>
    </tr>
    <tr>
        <td>false</td>
        <td>true</td>
        <td>true</td>
    </tr>
    <tr>
        <td>true</td>
        <td>false</td>
        <td>true</td>
    </tr>
    <tr>
        <td>false</td>
        <td>false</td>
        <td>false</td>
    </tr>
</table>

<p>Veja mais um exemplo unindo várias dessas coisas:</p>

<pre>
<code>
$ano = $_GET["an"];
$idade = 2017 - $ano;
echo "Quem nasceu em $ano tem idade de $idade anos.&lt;br/&gt;";
$tipo = ($idade &gt;= 18 && $idade &lt; 70) ? "OBRIGATÓRIO" : "NÃO OBRIGATÓRIO";
echo "E dessa forma seu voto é $tipo.";
</code>
</pre>

<p>PS: Você pode pegar o ano usando um parâmetro com a função date, assim:</p>

<pre>
<code>
echo date("Y");
</code>
</pre>

<p>Veja um exemplo de exibição de datas:</p>

<pre>
<code>
date_default_timezone_set("America/Sao_Paulo"); // Pra ajustar fusos horários
echo date("d/m/Y") . "&lt;br/&gt;"; // Exibe dia, mês e ano com quatro dígitos.
echo date("H:i:s"); // Exibe hora, minutos e segundos.
echo date("w"); // Exibe o dia da semana, a partir do 0 (para colocar no array).
</code>
</pre>

<p>PS: A hora pode ser exibida com outro fuso horário, dependendo da configuração do servidor, por isso usamos uma função para corrigir (mas o certo é corrigir o php.ini do servidor). E os minutos são representados por i. Ao usar o y minúsculo o ano é exibido com dois dígitos, e o h minúsculo exibe no formato 12. O w exibe o dia da semana a partir do zero.</p>

<h3>Integrar HTML com PHP</h3>

<p>Para integrar formulários em PHP, você faz assim, escolhendo o método e colocando o action para a página PHP desejada (se quiser que seja processado na mesma página PHP, basta deixar as aspas do action vazias, não precisa colocar a mesma página). Para o PHP pegar os valores do input, ele deverá ter um name (diferentemente do Javascript que pega pela ID ou class).</p>

<p>Usando o mesmo método $_GET (ou $_POST, em alguns formulários mais seguros) que usávamos para obter valores pela URL, nós usaremos com os formulários.</p>

Veja um exemplo de formulário em HTML:

<pre>
<code>
&lt;form method="get" action="testes.php"&gt;
    &lt;input type="number" name="v"/&gt;
    &lt;input type="submit" value="Calcular"/&gt;
&lt;/form&gt;
</code>
</pre>

<p>E o código PHP para o formulário acima, do qual calculará a raiz quadrada (é aconselhável colocar em outra página PHP):</p>

<pre>
<code>
$valor = $_GET["v"];
$rq = sqrt($valor);
echo "A raiz quadrada de $valor é igual a " . number_format($rq,5) . ".";
</code>
</pre>

<p>PS: Os métodos do formulário HTML e PHP devem ser os mesmos em ambos, ou get ou post.</p>

<p>Veja um formulário um pouco mais complexo, onde pegamos nome, ano de nascimento e sexo, e calculamos a idade pegando o ano atual do sistema com a função <code>date()</code>:</p>

<p>O formulário:</p>

<pre>
<code>
&lt;form method="get" action="testes.php"&gt;
    &lt;p&gt;Nome: &lt;input type="text" name="nome"/&gt;&lt;/p&gt;
    &lt;p&gt;Ano de Nascimento: &lt;input type="number" name="ano"/&gt;&lt;/p&gt;
    &lt;fieldset style="max-width: 250px"&gt;
        &lt;p&gt;&lt;input type="radio" name="sexo" id="masc" value="homem"/&gt;Masculino&lt;/p&gt;
        &lt;p&gt;&lt;input type="radio" name="sexo" id="fem" value="mulher"/&gt;Feminino&lt;/p&gt;
    &lt;/fieldset&gt;
    &lt;input type="submit" value="Enviar"/&gt;
&lt;/form&gt;
</code>
</pre>

E o código (em outra página):

<pre>
<code>
$nome = $_GET["nome"];
$ano = $_GET["ano"];
$sexo = $_GET["sexo"];
$idade = date("Y") - $ano;
echo "$nome é $sexo e tem $idade anos.";
</code>
</pre>

<p>PS: Os botões de rádio deverão ter valores especificados com o parâmetro value, senão dará erro.</p>

<p>Para evitar erros que aparecem quando não é enviado nenhum dado, usamos o código <code>isset</code> e operadores ternários, assim:</p>

<pre>
<code>
$nome = isset($_GET["nome"]) ? $_GET["nome"] : "Nome desconhecido";
$ano = isset($_GET["ano"]) ? $_GET["ano"] : date("Y");
$sexo = isset($_GET["sexo"]) ? $_GET["sexo"] : "sem sexo";
$idade = date("Y") - $ano;
echo "$nome é $sexo e tem $idade anos.";
</code>
</pre>

<p>Podemos também usar no lugar do ternário isso daqui (na versão 7 e posteriores):</p>

<pre>
<code>
$n = $_GET["num"] ?? 0; // Ele verifica se existe dado no parâmetro, caso não exista recebe 0.

echo "O parâmetro passado foi $n";
</code>
</pre>

<p>PHP também pode ser usado em CSS, dessa forma:</p>

<p>Código HTML, na primeira página:</p>

<pre>
<code>
&lt;form method="get" action="testes.php"&gt;
    &lt;p&gt;&lt;input type="text" name="t" id="itxt"/&gt;&lt;/p&gt;
    &lt;select name="tam" id="itam"&gt;
        &lt;option value="8pt" selected&gt;8&lt;/option&gt;
        &lt;option value="10pt"&gt;10&lt;/option&gt;
        &lt;option value="12pt"&gt;12&lt;/option&gt;
        &lt;option value="14pt"&gt;14&lt;/option&gt;
        &lt;option value="16pt"&gt;16&lt;/option&gt;
        &lt;option value="18pt"&gt;18&lt;/option&gt;
        &lt;option value="20pt"&gt;20&lt;/option&gt;
        &lt;option value="25pt"&gt;25&lt;/option&gt;
        &lt;option value="30pt"&gt;30&lt;/option&gt;
        &lt;option value="40pt"&gt;40&lt;/option&gt;
    &lt;/select&gt;
    &lt;p&gt;&lt;input type="color" name="cor" id="icor"/&gt;&lt;/p&gt;
    &lt;input type="submit" value="Gerar"/&gt;
&lt;/form&gt;
</code>
</pre>

<p>Os códigos abaixo deverão ser colocados em outra página:</p>

<p>Esse é o código PHP, que pode ser colocado no head:</p>

<pre>
<code>
$txt = isset($_GET["t"]) ? $_GET["t"] : "Texto Genérico";
$tam = isset($_GET["tam"]) ? $_GET["tam"] : "12pt";
$cor = isset($_GET["cor"]) ? $_GET["cor"] : "black";
</code>
</pre>

<p>No CSS você deve colocar assim (só funciona dentro da página PHP, em estilo local em tags style:</p>
<pre>
<code>
span.texto {
    font-size: &lt;?php echo $tam ?&gt;;
    color: &lt;?php echo $cor ?&gt;;
}
</code>
</pre>

<p>Dentro da página, em outra supertag PHP, você apenas coloca isso:</p>

<pre>
<code>
echo "&lt;span class='texto'&gt;$txt&lt;/span&gt;";
</code>
</pre>

<p>PS: Você pode ter várias supertags PHP numa mesma página. E pra execuções de códigos PHP na mesma página do formulário, apenas deixe o action com as aspas vazias.</p>

<p>Para filtrar códigos HTML em input, use o parâmetro <code>htmlspecialchars()</code> ou <code>htmlentities()</code> (com algumas diferenças entre eles) entre os $_GET ou $_POST. Por exemplo:</p>

<pre>
<code>
htmlspecialchars(isset($_GET["tFiltro"]), ENT_QUOTES)) ? htmlspecialchars($_GET["tFiltro"], ENT_QUOTES)) : "";
</code>
</pre>

<p>Ou podemos usar o <code>filter_input()</code>, dispensando o uso de métodos get/post, assim:</p>

<pre>
<code>
$ini = filter_input(INPUT_GET, "tFiltro") !== null ? (int)filter_input(INPUT_GET, "tFiltro") : 0;
</code>
</pre>

<p>PS: O filter_input() não aceita o isset(), a comparação deve ser feita com null e não idêntico. Ele substitui os métodos $_GET[], $_POST e outros do tipo, e por isso deverá ficar dentro de outros métodos como trim(), strip_tags() e funções criadas por nós pra tratar dados.</p>

<p>Isso é usado para evitar que invasores insiram códigos maliciosos entre tags, afim de tentar invadir o site.</p>

<ul>
    <li><a href="tudo-sobre-php-1.html">Parte Anterior da Matéria!</a></li>
    <li><a href="tudo-sobre-php-3.html">Continuação da Matéria!</a></li>
</ul>
        </div>
    </body>
</html>