<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8"/>
        <link rel="icon" href="imagens/favicon.ico"/>
        <title>Aprenda Redes</title>
        <link rel="stylesheet" href="css/estilo.css"/>
    </head>
    <body>
        <div>
            <header>
                <h1>Aprenda Redes</h1>
                <menu>
                    <li><a href="index.html">Página Inicial</a></li>
                    <li><a href="contato.html">Contato!</a></li>
                    <li><a href="tudo-sobre-redes-1.html">Tudo sobre Redes Parte 1!</a></li>
                    <li><a href="tudo-sobre-redes-2.html">Tudo sobre Redes Parte 2!</a></li>
                    <li><a href="tudo-sobre-redes-3.html">Tudo sobre Redes Parte 3!</a></li>
                    <li><a href="tudo-sobre-redes-4.html">Tudo sobre Redes Parte 4!</a></li>
                    <li><a href="tudo-sobre-redes-5.html">Tudo sobre Redes Parte 5!</a></li>
                    <li><a href="tudo-sobre-redes-6.html">Tudo sobre Redes Parte 6!</a></li>
                    <li><a href="tudo-sobre-redes-7.html">Tudo sobre Redes Parte 7!</a></li>
                    <li><a href="tudo-sobre-redes-8.html">Tudo sobre Redes Parte 8!</a></li>
                    <li><a href="tudo-sobre-redes-9.html" onclick="alert('Você já Está na Matéria desse Link!'); return false">Tudo sobre Redes Parte 9!</a></li>
                    <li><a href="tudo-sobre-redes-10.html">Tudo sobre Redes Parte 10!</a></li>
                    <li><a href="tudo-sobre-redes-11.html">Tudo sobre Redes Parte 11!</a></li>
                    <li><a href="tudo-sobre-redes-12.html">Tudo sobre Redes Parte 12!</a></li>
                    <li><a href="tudo-sobre-redes-13.html">Tudo sobre Redes Parte 13!</a></li>
                    <li><a href="tudo-sobre-redes-14.html">Tudo sobre Redes Parte 14!</a></li>
                </menu>
            </header>
            
<h2>Tudo sobre Redes Parte 9</h2>

<h3>O que é Máscara de Sub-Rede</h3>

<p>Uma sub-rede é uma subdivisão lógia de uma rede IP. Realizar a subdivisão de uma rede grande em redes menores permite diminuir o tráfego de rede, simplificar a administração e aumentar a performance dessa rede.</p>

<p>Os hosts que pertencem a uma sub-rede são endereçados com um grupo de bit mais significativo comum e idêntico em seus endereços IP. Assim ocorre uma divisão lógica do IP em dois campos, um endereço de rede (prefixo de roteamento) e um endereço (identificador) de host. Esse endereço de host identifica uma interface de rede específica.</p>

<p>Em computação, máscara é um dado utilizado para realizar operações de lógica binárioa, no geral em campos de bit. Ao utilizarmos uma máscara, um ou mais bits em um byte (ou outro agrupamento de bits) pode ser ativado, desativado ou ter seu valor lógico invertido, dependendo da operação lógica aplicada.</p>

<p>As operações lógicas mais comuns aplicadas em máscaras são as operações AND, OR, NOT e XOR.</p>

<p>Uma máscara de sub-rede tem a função de identificar em um endereço IPv4 qual porção representa o endereço e rede e qual porção representa o endereço de host. A máscara se assemelha a um endereço IPv4, ou seja, possuí 4 bytes divididos por pontos em porções de 8 bits (octetos). A parte dos bits constituída por valores "1" representa qual parcela de um endereço IP serão vistos omo endereço de rede e os bits que são todos zeros, representam o endereço de host.</p>

<p>É usada para dizer aos sistemas finais (incluindo roteadores e outros hosts) na rede quantos bits do endereço IP são usados para a identificação da rede e da sub-rede. Esses bits são chamados de Prefixo de Rede Estendido. Os bits restantes identificam os hosts dentro da sub-rede.</p>

<p>Os bits da máscara que identificam o número de rede (e sub-rede) são ajustados em 1 e os bits do host, e 0. Assim,. trata-se de uma máscara de bit que, quando aplicada por meio deu ma operação lógica AND em um endereço IP na rede, retorna o endereço de rede (prefixo de roteamento) ou de sub-rede.</p>

<p>Um endereço IPv4 possui dois componentes (ou partes), que são o endereço de rede e o endereço de host. O endereço de rede identifica toda a rede, de modo que todos os hosts dentro dessa rede possuem a mesma sequênia de bits nessa parte. Já o endereço de host identifica a conexão a um host (equipamento) em particular, ou ainda uma interface de rede da máquina, e é exclusivo de cada host dentro da rede à qual pertence.</p>

<p>A máscara de sub-rede pé o endereço especial que efetua a separação entre essas partes. Ela pode ser padrão, quando trabalhamos com redes classful (com divisão em classes) ou ser calculada com base euma rede sem classes (CIDR).</p>

<p>Existem máscaras de sub-rede padrão para cada classe de endereçamento, como podemos ver na tabela a seguir:</p>

<table>
    <tr>
        <th>Classe de Endereçamento</th>
        <th>Máscara de Sub-Rede</th>
        <th>Endereço Inicial</th>
        <th>Endereço Final</th>
    </tr>
    <tr>
        <td>A</td>
        <td>255.0.0.0</td>
        <td>0.0.0.0</td>
        <td>127.255.255.255</td>
    </tr>
    <tr>
        <td>B</td>
        <td>255.255.0.0</td>
        <td>128.0.0.0</td>
        <td>191.255.255.255</td>
    </tr>
    <tr>
        <td>C</td>
        <td>255.255.255.0</td>
        <td>192.0.0.0</td>
        <td>223.255.255.255</td>
    </tr>
</table>

<p>Portanto, se for utilizado um esquema de endereçamento de rede com classes, basta aplicar a máscara correspondente para efetuar a identificação de rede e host dentro da rede.</p>

<p>Resumidamente, onde está o 255 na máscara é onde está o endereço da rede, e no 0 está o endereço do host.</p>

<p>É possível ainda dividir a porção do endereço de host em uma sub-rede e novos endereços de host, caso seja necessário.</p>

<p>A máscara de sub-rede efetua tal separação do IP por meio de uma operação lógica AND bit-a-bit entre um IP e a máscara utilizada. Veja o exemplo a seguir:</p>

<ul>
    <li>Endereço IP: <code>192.168.1.61</code></li>
    <li>Máscara de Sub-Rede Padrão: <code>255.255.255.0</code></li>
</ul>

<p>A qual rede pertence esse IP? Convertendo os endereço par binário, obtemos:</p>

<ul>
    <li>Endereço IP: <code>11000000.10101000.00000001.00111101</code></li>
    <li>Máscara de Sub-Rede Padrão: <code>11111111.11111111.11111111.00000000</code></li>
</ul>

<p>Aplicando a operação lógica AND bit a bit:</p>

<ul>
    <li>Endereço IP: <code>11000000.10101000.00000001.00111101</code></li>
    <li>Máscara de Sub-Rede Padrão: <code>11111111.11111111.11111111.00000000</code></li>
    <li>Resultado do AND: <code>11000000.10101000.00000001.00000000</code></li>
</ul>

<p>O endereço obtido corresponde à porção de rede do endereço IP (11000000.10101000.00000001.00000000). Convertendo esse endereço de volta para o decimal, obtemos o endereço 192.168.1.0, que é o endereço da rede a qual pertence o IP, note o final 0 o endereço, em vez de 61, que é o número que identifica o host dentro dessa rede.</p>

<p>Dentro de uma rede, dois endereços são especiais e nunca devem ser atribuídos a um host. São eles o endereço da rede em si, terminando em 0 (primeiro endereço, 192.168.1.0), e o endereço de broadcast, terminado em 255 (último endereço, no exemplo, seria o endereço 192.168.1.255). Assim, essa rede terá a capacidade para até 254 hosts, mais os endereços de rede e de broadcast, totalizando 256 endereços.</p>

<p>Vejamos agora um segundo exemplo de aplicação de máscara de sub-rede, agora sem o uso de classes do endereçamento IP:</p>

<ul>
    <li>Endereço IP: <code>192.168.1.61</code></li>
    <li>Máscara de Sub-Rede Padrão: <code>255.255.255.224</code></li>
</ul>

<p>PS: Com essa máscara, ele não está na classe C e em nenhuma outra.</p>

<p>Convertendo os endereço par binário, obtemos:</p>

<ul>
    <li>Endereço IP: <code>11000000.10101000.00000001.00111101</code></li>
    <li>Máscara de Sub-Rede Padrão: <code>11111111.11111111.11111111.11100000</code></li>
</ul>

<p>Aplicando a operação lógica AND bit-a-bit:</p>

<ul>
    <li>Endereço IP: <code>11000000.10101000.00000001.00111101</code></li>
    <li>Máscara de Sub-Rede Padrão: <code>11111111.11111111.11111111.11100000</code></li>
    <li>Resultado do AND: <code>11000000.10101000.00000001.00100000</code></li>
</ul>

<p>O endereço obtido corresponde à porção de rede do endereço IP (11000000.10101000.00000001.00100000). Convertendo esse endereço de volta para decimal obtemos o endereço 192.168.1.32, que é o endereço da rede à qual pertence o IP. Note o final 32 do endereço, que fará com que essa rede acomode um número menor de hosts do que se fosse usada a máscara padrão (precisamente 30 hosts, mais rede e broadcast). O primeiro IP válido dessa sub-rede será o endereço 192.168.1.33.</p>

<p>Como são usados 27 bits para representar a porção de rede/sub-rede, também podemos representar essa rede omo 192.168.1.32/27, na notação CIDR.</p>

<p>A divisão em sub-redes é o processo de divisão de uma grande rede IP em múltiplas redes menores, com o propósito de aumentar sua performance, organização e segurança. Neste caso, deixamos de usar as máscaras padrão de classes e passamos a usar um esquema denominado CIDR (Classless Inter-Domain Routing), no qual a máscara a ser utilizada deve ser calculada de acordo com o endereço de rede original (a ser dividido) e o número de sub-redes ou hosts desejados.</p>

<p>O cálculo de máscaras de classe C é feito pela quantidade máxima de hosts (256) subtraído pelo outro número (no caso, 128, 192, 224, 240, 248 e 252), depois subtrai mais dois (o endereço da rede e o de broadcast). Por exemplo:</p>

<pre>
<code>
 256
<ins>-224</ins>
  32
<ins>  -2</ins>
  30
</code>
</pre>

<p>Da mesma forma, podemos fazer cálculos com outras classes e IPs.</p>

<p>A notação CIDR basicamente é onde tem os primeiros números 1 em binário na porção de rede da máscara, por exemplo, a máscara 255.0.0.0 tem a notação /8, a máscara 255.255.0.0 tem a notação /16 e a máscara 255.255.255.0 tem a notação /24. Numa aplicação em outra máscara, a notação muda (como a máscara 255.255.255.224 tem a notação /27).</p>

<p>Assim, eliminamos e endereçamento por classes e conseguimos aprimorar a agregação de rotas.</p>

<h3>O que é o Handshake de Três Vias</h3>

<p>O protocolo TCP é um protocolo orientado a conexão. Isso significa que, antes que qualquer dado possa ser enviado entre dois hosts, uma conexão deve ser estabelecida entre eles. Vamos estudar o processo pela qual uma conexão TCP é estabelecida entre dois hosts em uma rede.</p>

<p>O handshake (significa algo como "aperto de mão") funciona assim: O Tx (computador transmissor) envia uma mensagem contendo apenas um nº de sequência (seq) a e o bit SYN ativado. O Rx (computador receptor) responde com um pacote contendo um nº de sequência b, nº ACK = seq a + 1 e os bits SYN e ACK ativados. O Tx, ao receber esse pacote, envia uma mensagem de confirmação ACK de volta ao Rx, com o nº ACK = seq b + 1. A conexão está assim estabelecida.</p>

<p>Quando nossa máquina requisita a conexão remota através do protocolo TCP à um servidor na net, ela envia o bit SYN com o número da sequência (no caso 0), e o servidor responde com o ACK (com 1), e uma outra sequência (SYN) também vinda a partir do 0, que volta à nossa máquina, que envia outro ACK (com 1) e o seq dela com 1.</p>

<p>Veja o esquema gráfico da máquina, logo abaixo:</p>

<img src="imagens/esquema.jpg" alt="Esquema"/>

<p>Para estabelecer uma conexão TCP, após a troca dos três segmentos entre os hosts, o processo de estabelecimento de conexão está completo. Chamamos a esse processo de handshake de três vias (three-way handshake). O host que envia o primeiro segmento SYN realiza uma abertura de conexão ativa. O outro host (servidor que recebe o segmento SYN), realiza uma abertura de conexão passiva.</p>

<p>Quando a conexão é estabelecida, após o processo do handshake de três vias ter sido concluído, a conexão estará estabelecida e os host podem começar a trocar dados entre si. Ao final da comunicação, será necessário realizar um processo relativamente similar para a finalização da conexão.</p>

<h3>Protocolo FTP - File Transfer Protocol</h3>

<p>O File Transfer Protocol (FTP), é um protocolo para transferência de arquivos entre dois hosts (um cliente e um servidor), baseado em conexão IP e usando TCP. Desenvolvido em meados dos anos 70 para suportar compartilhamento de arquivos em redes TCP/IP e mais antigas. É um protocolo da camada de aplicação TCP/IP. O FTP está definido na RFC 959.</p>

<p>O FTP usa conexão de dados e controle separadas, as portas usadas são a 20 e 21, os dados são transferidos pela porta 20, e a porta 21 transmite informações de controle.</p>

<p>Veja a imagem de como funciona ele:</p>

<img src="imagens/ftp.png" alt="FTP"/>

<p>Clientes podem se autenticar por meio de um nome de usuário e senha, ou ainda usar conexão anônima (se o servidor o permitir). É possível proteger o nome de usuário e senha usando SSL/TLS, na forma de FTPS, ou ainda, usando SFTP (SSH File Transfer Protocol).</p>

<p>Um modo de conexão determina como a conexão de dados é estabelecida. O cliente cria uma conexão TCP a partir de uma porta aleatória com a porta 21 do servidor FTP. FTP pode operar em dois modos: Ativo ou Passivo.</p>

<p>No modo ativo, o cliente escuta conexões de dados que chegam do servidor em uma porta informada. O servidor inicia um canal de dados a partir de sua porta 20. Problemática se o cliente estiver atrás de um firewall ou roteador NAT.</p>

<p>Veja abaixo como funciona o modo ativo:</p>

<img src="imagens/ativo.gif" alt="Modo Ativo"/>

<p>Só que essas portas aleatórias podem ser bloqueadas pelo firewall, por este não saber que se trata de uma porta segura pra conexão. Nesse caso usamos o modo passivo.</p>

<p>No modo passivo, o cliente usa a conexão de controle para enviar um comando PASV ao servidor e recebe um endereço IP e número de porta aleatória como respostas, que serão usados para iniciar um canal de dados a partir de outra porta aleatória no cliente. Usada geralmente quando o cliente não consegue receber conexões TCP de entrada, como por exemplo, por conta de um firewall na rede.</p>

<p>Veja abaixo como funciona o modo passivo:</p>

<img src="imagens/passivo.gif" alt="Modo Passivo"/>

<p>Nesse caso, o cliente envia através de uma porta aleatória, se conecta a porta 21 do servidor, que responde por essa mesma porta, que está com a conexão aberta, informando qual porta aleatória (outra porta) que deverá ser usada por ambos para transferência, de forma que o firewall não bloqueie.</p>

<p>Quando os dados são transferidos pela rede, podem ser usados dois tipos prinipais de representação de dados:</p>

<ul>
    <li><b>Modo ASCII - </b>Usado para Texto.</li>
    <li><b>Modo Binário ("Imagem") - </b>Para arquivos em geral. Dados são transmitidos byte por byte.</li>
</ul>

<p>Além disso, existem outros dois modos de representação de dados disponíveis:</p>

<ul>
    <li><b>Modo EBCDIC - </b>Texto entre hosts que usam o conjunto de caracteres EBCDIC.</li>
    <li><b>Modo Local - </b>Permite aos hosts usar algum formato proprietário sem necessidade de conversão dos dados para ASCII.</li>
</ul>

<p>Os dados podem ser transferidos de três modos:</p>

<ul>
    <li><b>Modo Stream (Fluxo) - </b>Dados enviados em um fluxo contínuo. Todo o processamento é realizado pelo TCP.</li>
    <li><b>Modo Block (Bloco) - </b>Os dados são divididos em vários blocos pelo FTP, e então repassados ao TCP para transmissão.</li>
    <li><b>Modo Comprimido (Compressed) - </b>Os dados são comprimidos usando um algoritmo, como o RLE (Run-Length Encoding).</li>
</ul>

<p>Um servidor pode oferecer o serviço de FTP anônimo, no qual os usuários se loguem com uma conta de nome anonymous, sem o emprego de senha (o servidor muitas vezes pede o e-mail do usuário como "senha", porém, nenhuma verificação é realizada). No geral, é empregada por servidores que armazenam atualizações de softwares para os clientes baixarem.</p>

<p>Sobre a segurança do FTP, ele não foi projetado para ser um protoocolo seguro, e  está sujeito a diversos tipos de ataques, como ataques de força bruta, captura de pacotes, spoofing, entre outros. Além disso, o FTP não criptografa os dados transmitidos, incluindo nomes de usuários e senhas. Isso pode ser remediado usando-se uma versão segura do FTP, como o FTPS, ou ainda transmitindo os dados FTP por meio de um túnel SSH ou uma VPN (mais comum).</p>

<p>Vários protocolos foram derivados a partir do conceito do FTP, melhorando diversos aspectos, principalmente a segurança. Os mais utilizados são os seguintes: FTPS, SSH FTP, TFTP e SFTP. Além disso, existem muitos outros modos de transferência de arquivos não baseados em FTP, como as redes P2P (como as de torrent).</p>

<p>Podemos instalar também softwares de clientes de FTP. Um cliente de FTP é um software que se conecta a um servidor para requisitar a transferência de arquivos, tanto em download quanto em upload. Os clientes FTP podem ser em linha de comandos ou aplicações gráficas, ou mesmo web. Um software conhecido de FTP é o Filezilla.</p>

<p>Para utilizar um servidor FTP via linha de comando, digite <code>ftp</code>. Dentro do FTP, digite <code>open nomedoservidor.com.br</code>. Ele pedirá o login e a senha, caso estejam configurados no servidor. Dentro do FTP podemos utilizar comandos do Unix. Para upar arquivos usamos o comando <code>put "/caminhodoarquivo"</code>, para baixar arquivos usamos <code>get "nomedoarquivo"</code> e para encerrar a conexão usamos <code>bye</code>.</p>

<h3>12 Diferenças Entre os Protocolos TCP e UDP</h3>

<p>A camada de transporte da pilha TCP/IP, intermediária entre as camadas de Aplicação e Internet, é responsável por funções de comunicação entre processos de computadores diferentes. Desta forma, as aplicações podem enviar e receber dados entre si.</p>

<p>Na pilha TCP/IP, os dois principais protocolos da camada de transporte são o protocolo TCP (Transmission Control Protocol) e o protocolo UDP (User Datagram Protocol).</p>

<p>Esses são os tipos de conexão:</p>

<table>
    <tr>
        <th>TCP (Transmission Control Protocol)</th>
        <th>UDP (User Datagram Protocol)</th>
    </tr>
    <tr>
        <td>Orientado a conexão. Os dispositivos envolvidos precisam estabelecer uma conexão antes de transmitir dados (com handshake).</td>
        <td>Não orientado a conexão. Os dispositivos envolvidos não precisam estabelecer uma conexão antes de transmitir dados (sem handshake).</td>
    </tr>
    <tr>
        <td>Para aplicações que requeiram alta confiabilidade, com tempo de transmissão não muito crítico, como envio de e-mails e download de arquivos.</td>
        <td>Para aplicações que necessitem de transmissão de dados rápida e eficiente, como streaming de vídeo e jogos online.</td>
    </tr>
    <tr>
        <td>Os pacotes de dados são organizados em uma ordem específica.</td>
        <td>Não há ordem específica para os pacotes de dados. Se for necessária, a ordem deve ser gerenciada pela camada de aplicação.</td>
    </tr>
    <tr>
        <td>Confiável, pois garante a entrega dos dados ao destino com mecanismos de correção de erros e retransmissão de dados.</td>
        <td>Não confiável, pois a entrega de dados ao destino não pode ser garantida.</td>
    </tr>
    <tr>
        <td>Possui mecanismos de verificação de erros sofisticados e recuperação de erros.</td>
        <td>Mecanismo de verificação de erros básico, com checksum apenas, sem recuperação de erros.</td>
    </tr>
    <tr>
        <td>Mais lento que o UDP, devido ao overhead do seu cabeçalho e rotinas de conexão/desconexão envolvidas.</td>
        <td>Mais rápido que o TCP, mais simples e eficiente.</td>
    </tr>
    <tr>
        <td>Pacotes perdidos podem ser retransmitidos, evitando assim perda de dados.</td>
        <td>Pacotes perdidos não são retransmitidos.</td>
    </tr>
    <tr>
        <td>Cabeçalho de tamanho variável, de 20 (padrão) a 80 bytes (com todas as opções).</td>
        <td>Cabeçalho de tamanho fixo e pequeno: 8 bytes.</td>
    </tr>
    <tr>
        <td>Não suporta broadcasting de dados. Protocolo para comunicação entre dois endpoints.</td>
        <td>Suporta broadcasting de dados (e multicasting também).</td>
    </tr>
    <tr>
        <td>Usado por protocolos como HTTP, FTP, SMTP e HTTPS.</td>
        <td>Usado pelos protocolos DNS, DHCP, ANMP, RIP e TFTP.</td>
    </tr>
    <tr>
        <td>Realiza controle de fluxo (não envia mais pacotes do que o destinatário consegue receber).</td>
        <td>Não realiza controle de fluxo.</td>
    </tr>
    <tr>
        <td>Doze campos.</td>
        <td>Quatro campos.</td>
    </tr>
</table>

<p>Os 12 campos do TCP são esses:</p>

<ul>
    <li>Número de porta de origem.</li>
    <li>Número de porta de destino.</li>
    <li>Número de sequência.</li>
    <li>Número de confirmação.</li>
    <li>Comprimento do cabeçalho.</li>
    <li>Reservado.</li>
    <li>Flags ECN.</li>
    <li>Bits de controle.</li>
    <li>Tamanho da janela.</li>
    <li>Checksum.</li>
    <li>Ponteiro de urgente.</li>
    <li>Opções</li>
</ul>

<p>Já os 4 campos do UDP são esses:</p>

<ul>
    <li>Número de porta de origem.</li>
    <li>Número de porta de destino.</li>
    <li>Comprimento.</li>
    <li>Checksum.</li>
</ul>

<ul>
    <li><a href="tudo-sobre-redes-8.html">Parte Anterior da Matéria!</a></li>
    <li><a href="tudo-sobre-redes-10.html">Continuação da Matéria!</a></li>
</ul>

        </div>
    </body>
</html>