<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8"/>
        <link rel="icon" href="_imagens/favicon.ico"/>
        <title>Aprenda Redes</title>
        <link rel="stylesheet" href="_css/estilo.css"/>
    </head>
    <body>
        <div>
            <header>
                <h1>Aprenda Redes</h1>
                <menu>
                    <li><a href="index.html">Página Inicial</a></li>
                    <li><a href="contato.html">Contato!</a></li>
                    <li><a href="tudo-sobre-redes-1.html">Tudo sobre Redes Parte 1!</a></li>
                    <li><a href="tudo-sobre-redes-2.html">Tudo sobre Redes Parte 2!</a></li>
                    <li><a href="tudo-sobre-redes-3.html">Tudo sobre Redes Parte 3!</a></li>
                    <li><a href="tudo-sobre-redes-4.html">Tudo sobre Redes Parte 4!</a></li>
                    <li><a href="tudo-sobre-redes-5.html">Tudo sobre Redes Parte 5!</a></li>
                    <li><a href="tudo-sobre-redes-6.html" onclick="alert('Você já Está na Matéria desse Link!'); return false">Tudo sobre Redes Parte 6!</a></li>
                    <li><a href="tudo-sobre-redes-7.html">Tudo sobre Redes Parte 7!</a></li>
                    <li><a href="tudo-sobre-redes-8.html">Tudo sobre Redes Parte 8!</a></li>
                    <li><a href="tudo-sobre-redes-9.html">Tudo sobre Redes Parte 9!</a></li>
                    <li><a href="tudo-sobre-redes-10.html">Tudo sobre Redes Parte 10!</a></li>
                    <li><a href="tudo-sobre-redes-11.html">Tudo sobre Redes Parte 11!</a></li>
                    <li><a href="tudo-sobre-redes-12.html">Tudo sobre Redes Parte 12!</a></li>
                    <li><a href="tudo-sobre-redes-13.html">Tudo sobre Redes Parte 13!</a></li>
                </menu>
            </header>
            
<h2>Tudo sobre Redes Parte 6</h2>

<h3>Estrutura de um Pacote IPv4</h3>

<p>Na camada de internet da pilha TCP/IP, os dados provenientes da camada de transporte são empacotados em PDUs denominadas pacotes. Um pacote IPv4 é composto por um cabeçalho e um campo de dados, que contém os dados provenientes da camada superior (transporte).</p>

<p>Veja abaixo o encapsulamento de um datagrama IPv4:</p>

<img src="_imagens/datagrama.jpg" alt="Datagrama"/>

<p>A área cinza é o datagrama IP, os dados e o cabeçalho dele compõe os dados do quadro.</p>

<p>Vjea o formato do cabeçalho IPv4:</p>

<img src="_imagens/cabecalho-ipv4.jpg" alt="Cabeçalho IPv4"/>

<p>Podemos ver que ele tem 4 octetos, 32 bytes (contados a partir do 0), e os nomes dos campos do cabeçalho na ordem que aparecem.</p>

<p>Esses são os campos do cabeçalho IPv4:</p>

<ul>
    <li><b>Versão: </b>Indica a versão do protocolo IP que está sendo usado. Para o protocolo IPv4, o valor 4 é utilizado neste campo.</li>
    <li><b>Tamanho do Cabeçalho (IHL, Internet Header Length): </b>Comprimento do cabeçalho do pacote em palavras de 32 bits (bits existentes no cabeçalho / 32). O campo de opções pode ter tamanho variável, é importante registrar aqui o tamanho do cabeçalho, para que seja possível definir onde ele termina, e onde se inicia o campo de dados. Para um pacote que não usa nenhuma opção, o valor do IHL será de 160 /32 = 5, sendo que o 160 é o somatório de bits de compõem o cabeçalho do pacote.</li>
    <li><b>DSCP (Differentiated Services Code Point): </b>Esse campo originalmente era definido como ToS (Tipo de Serviço). É utilizado por tecnologias que necessitem de streaming de dados em tempo-real, como por exemplo VoIP.</li>
    <li><b>ECN (Explicit Congestion Notification): </b>Este campo permite uma notificação fim-a-fim de congestionamento de rede sem descartar pacotes. É um campo de uso opcional.</li>
    <li><b>Tamanho Total: </b>Define o tamanho total do pacote em bytes, incluindo o cabeçaho e o campo de dados.</li>
    <li><b>Identificação: </b>Identifica o datagrama (pacote) IP por meio de um número de identificação sequencial.</li>
    <li><b>Flags: </b>Usado para controlar a fragmentação dos pacotes. Possuí 3 bites, com esses significados (do maior pro menor): Bit 0 (O primeiro bit sempre é 0 e é reservado), bit 1 (DF (Don't Fragment), quando ativado indica que o datagrama não pode ser fragmentado. Se a fragmentação for requerida na rede e este bit estiver ativado, o pacote será descartado) e bit 2 (MF (More Fragments), indica o último fragmento, quando o bit for 1, há mais fragmentos depois dele, quando for 0, ele é o último fragmento do conjunto do pacote).</li>
    <li><b>Offset do Fragmento: </b>Determina a ordem dos fragmentos. Especifica o deslocamento de um fragmento em particular em relação ao início do pacote IP original, sem desfragmentação. O primeiro fragmentos possuí offset igual à zero. É medido em blocos de oito bytes.</li>
    <li><b>Tempo de Vida (TTL): </b>Tempo de vida máximo do datagrama. Impede que um pacote se perca em ma rede (internet) e entre em loop infinito entre os roteadores. Atualmente seu valor corresponde a saltos de roteadores (hops). Toda vez que um pacote passa por um roteador, o valor desse campo é decrementado (subtrai-se 1). Quando um roteador recebe um pacote cujo TTL é igual a 0, o pacote é descartado, evitando sua permanência infinita na rede.</li>
    <li><b>Protocolo: </b>Indicia o protocolo (presente no campo de dados) que pediu o envio do datagrama, através de um código numérico. Os códigos são definidos pela RFC 790.</li>
    <li><b>Checksum do Cabeçalho: </b>Usado para verificação de erros no cabeçalho do datagrama. Quando um pacote chega em um roteador, o roteador calcula o checksum do cabeçalho e compara o valor obtido com o valor armazenado nesse campo. Se os valores não baterem, significa que houve erro durante a transmissão dos dados, e o pacote é descartado. Toda vez que um pacote passa por um roteador, um novo checksum deve ser calculado e armazenado neste campo, pois os roteadores alteram o conteúdo do cabeçalho IP ao decrementar o campo de TTL.</li>
    <li><b>Endereço IP de Origem: </b>Endereço IP do remetente do pacote. Esse endereço pode ser alterado por um roteador se for utilizado um serviço de tradução de endereços, como o NAT.</li>
    <li><b>Endereço IP de Destino: </b>Endereço IP do destinatário do pacote. Esse endereço também pode ser alterado por um roteador se for utilizado um serviço de tradução de endereços, como o NAT.</li>
    <li><b>Opções + Pad: </b>Campo opcional. Usado em situações de teste e verificação de erros na rede. Asduas funções mais importas desse campo são traçar a rota de rede que está sendo usada na origem até o destino (traceroute) e marcar o horário com que o datagrama passa por cada roteador da origem até o destino (timestamp).</li>
    <li><b>Dados: </b>São os dados que o datagrama está carregando, com o limite de 64 Kb. Os dados não fazem parte do cálculo do checksum do cabeçalho. Os protocolos mais comuns encontrados no campo de dados são o TCP, UDP, ICMP, IGMP e OSPF, entre outros.</li>
</ul>

<p>Esse é o "resumão" com os campos e os tamanhos deles:</p>

<table>
    <tr>
        <th>Estrutura de um Pacote IP</th>
    </tr>
    <tr>
        <td>Versão (4 bits)</td>
    </tr>
    <tr>
        <td>Tamanho do Cabeçalho (4 bits)</td>
    </tr>
    <tr>
        <td>DSCP (6 bits)</td>
    </tr>
    <tr>
        <td>ECN (2 bits)</td>
    </tr>
    <tr>
        <td>Tamanho Total (16 bits)</td>
    </tr>
    <tr>
        <td>Identificação (16 bits)</td>
    </tr>
    <tr>
        <td>Flags (3 bits)</td>
    </tr>
    <tr>
        <td>Offset de Fragmento (13 bits)</td>
    </tr>
    <tr>
        <td>Tempo de Vida - TTL (8 bits)</td>
    </tr>
    <tr>
        <td>Protocolo (8 bits)</td>
    </tr>
    <tr>
        <td>Checksum do Cabeçalho (16 bits)</td>
    </tr>
    <tr>
        <td>Endereço IP de Origem (32 bits)</td>
    </tr>
    <tr>
        <td>Endereço IP de Destino (32 bits)</td>
    </tr>
    <tr>
        <td>Opções (32 bits)</td>
    </tr>
    <tr>
        <td>Dados (até 64 Kb)</td>
    </tr>
</table>

<h3>Introdução ao Modelo OSI</h3>

<p>O Modelo OSI (Open System Interconnect), é um modelo em camadas projetado para fornecer um framework para padronização de comunicação em sistemas de computadores.</p>

<p>Entender o modelo OSI é muito importante para quem deseja entender o funcionamento de redes de computadores, e é um tópico onipresente em testes de certificação, tais como Cisco CCNA e CompTIA Network+.</p>

<p>Padrões são necessários para promover interoperabilidade entre equipamentos de fabricantes distintos, e permitir economia de escala.</p>

<p>O modelo OSI foi desenvolvido pela ISO para facilitar a interconexão de sistemas de computadores, a partir do qual protocolos de comunicação de redes podem ser criados.</p>

<p>Trata-se de um modelo abstrato, conceitual, que traz o funcionamento de um protocolo ideal em redes de computadores.</p>

<p>O modelo OSI é composto por sete camadas:</p>

<table>
    <tr>
        <td>Camada de Aplicação</td>
    </tr>
    <tr>
        <td>Camada de Apresentação</td>
    </tr>
    <tr>
        <td>Camada de Sessão</td>
    </tr>
    <tr>
        <td>Camada de Transporte</td>
    </tr>
    <tr>
        <td>Camada de Rede</td>
    </tr>
    <tr>
        <td>Camada de Link de Dados</td>
    </tr>
    <tr>
        <td>Camada Física</td>
    </tr>
</table>

<p>Esses são os princípios da divisão em camadas:</p>

<ul>
    <li>Cada camada deve executar funções bem-definidas, similares.</li>
    <li>Os limites da camada são escolhidos para reduzir o fluxo de informações transportadas entre interfaces.</li>
    <li>A quantidade de camadas deve ser suficiente para que funções diferentes não precisem ser colocadas na mesma camada.</li>
    <li>Onde houver necessidade de um grau de abstração distindo, deve-se criar outra camada.</li>
    <li>Camadas separadas são criadas para manipular funções que são diferentes no processo realizado ou na tecnologia envolvida.</li>
    <li>Deve permitir que alterações em funções ou protocolos sejam realizadas em uma camada sem afetar as demais camadas.</li>
</ul>

<p>O modelo OSI garante que haja interoperabilidade entre produtos de fabricantes distintos, devido à padronização dos protocolos de comunicação.</p>

<p>Uma rede é constituída por equipamentos e sistemas de diversos fabricantes distintos, como roteadores e switches Cisco, sistemas Microsoft ou Linux, etc., e para que esses elementos possam se comunicar sem problemas, é necessária a padronização dos processos de comunicação.</p>

<p>O processo de padronização também permite o barateamento de custos, pois não ficamos reféns de sistemas proprietários.</p>

<p>Nas camadas do modelo OSI, cabeçalhos contendo informações são adicionados aos dados a serem transmitidos, em um processo denominado "encapsulamento". Encapsulamento é empacotar dados com informaçoes adicionais em cada camada.</p>

<p>Veja abaixo o processo de encapsulamento:</p>

<img src="_imagens/processo.jpg" alt="Processo"/>

<p>Em cada camada, damos um nome específico ao conjunto de dados com informações encapsuladas. Chamamos a esses conjuntos de PDU (Protocol Data Unit).</p>

<p>Veja as diferenças das camadas:</p>

<img src="_imagens/pdu.jpg" alt="PDU"/>

<h4>Camada 1 - Física</h4>

<p>Trata da sinalização de rede, e da conversão de bits (advindos das camadas superiores) em sinais elétricos, ópticos ou ainda em ondas eletromagnéticas para envio pelos diversos meios de transmissão utilizados, carregando os dados de um ponto a outro da rede.</p>

<p>Define os aspectos mecânicos e elétricos da rede. Especifica o tipo de cabeamento a ser utilizado, tensões elétricas, temporização, etc.</p>

<p>Nesta camada temos cabos, conectores, antenas, hubs, modens e placas de rede atuando (placas de rede atuam também na camada 2).</p>

<h4>Camada 2 - Link de Dados</h4>

<p>Organização dos dados a serem enviados em conjuntos de bits denominados quadros (frames), e especificação dos endereços físicos das interfaces de redes envolvidas (endereços MAC).</p>

<p>Um endereço MAC é responsável pela identificação única dos dispositivos em uma rede, consistindo em um endereço de 48 bits gravados em uma memória ROM presente na própria interface física de rede.</p>

<p>Também é responsável pela sinalização de início e fim de transmissão de um quadro, além de gerar um código para reconhecimento de erros de transmissão de dados, conhecidos como checksum.</p>

<h4>Camada 3 - Rede</h4>

<p>Introduz a capacidade de rotear o tráfego de um ponto da rede a outro, por meio de subredes, é uma camada de roteamentos. Podemos aplicar um esquema de endereçamento lógico aos pontos de rede, como por exemplo, o endereço IP.</p>

<p>Também pode ocorrer fragmentação dos dados a serem transmitidos, caso o tamanho desses dados exceda um limite pré-determinado, de modo que segmentos de rede que não suportem quadros de tamanho muito grande possam envviar os dados sem problemas.</p>

<h4>Camada 4 - Transporte</h4>

<p>No geral, a camada de transporte tem o papel de fornecer funções que permitam a comunicação entre processos de aplicações (softwares) entre computadores diferentes.</p>

<p>Assim, a camada de transporte fornece um mecanismo pelo qual aplicações distintas podem enviar e receber dados usando a mesma implementação de protocolos das camadas mais baixas.</p>

<h4>Camada 5 - Sessão</h4>

<p>Configuração das sessões de comunicações entre os dispositivos na rede. Uma sessão de comunicação pode ser iniciada, mantida e finalizada quando não houverem mais dados a transmitir, ou quando uma das partes quiser encerrar a comunicação. Sincronismo e restabelecimento de uma sessão de comunicações a partir do ponto onde houve um problema de interrupção na transmissão.</p>

<p>Outras funções: Determinar se a comunicação se dará em modo half-duplex ou full-duplex, gerenciar o uso de protocolos de tunelamento (para acesso remoto, por exemplo).</p>

<h4>Camada 6 - Apresentação</h4>

<p>Esta camada lida com as técnicas de apresentação dos dados, o que significa basicamente que ela é responsável pela forma como os dados são reconhecidos e visualizados em seu destino.</p>

<p>Como exemplos de suas atribuições, temos a codificação de caracteres, compressão e criptografia de dados.</p>

<h4>Camada 7 - Aplicação</h4>

<p>Esta é a camada de mais alto nível (conceitualmente), e é a responsável por fornecer os serviços de rede às aplicações que rodam no computador.</p>

<p>Assim, seu navegador ou seu programa de e-mails acessa a rede pois é capaz de se comunicar com a camada de aplicação da pilha de protocolos.</p>

<p>Esse é o resumo das camadas do modelo OSI:</p>

<table>
    <tr>
        <th>Camada</th>
        <th>Resumo</th>
    </tr>
    <tr>
        <td>Aplicação</td>
        <td>Prover serviços de rede às aplicações</td>
    </tr>
    <tr>
        <td>Apresentação</td>
        <td>Criptografia, codificação, compressão e formatos de dados</td>
    </tr>
    <tr>
        <td>Sessão</td>
        <td>Iniciar, manter e finalizar sessões de comunicação</td>
    </tr>
    <tr>
        <td>Transporte</td>
        <td>Trasmissão confiável de dados, segmentação</td>
    </tr>
    <tr>
        <td>Rede</td>
        <td>Endereçamento lógico e roteamentos, controle de tráfego</td>
    </tr>
    <tr>
        <td>Link de Dados</td>
        <td>Endereçamento físico, transmissão confiável de quadros</td>
    </tr>
    <tr>
        <td>Física</td>
        <td>Interface com meios de transmissão e sinalização</td>
    </tr>
</table>

<p>Veja abaixo como funciona a transmissão de dados no modelo OSI:</p>

<img src="_imagens/transmissao.jpg" alt="Transmissão"/>

<ul>
    <li><a href="tudo-sobre-redes-5.html">Parte Anterior da Matéria!</a></li>
    <li><a href="tudo-sobre-redes-7.html">Continuação da Matéria!</a></li>
</ul>

        </div>
    </body>
</html>