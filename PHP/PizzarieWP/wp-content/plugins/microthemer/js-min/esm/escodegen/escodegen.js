import xe from"./estraverse.js";import be from"./esutils.js";import Ee from"./source-map.js";var N,ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},W={},Ce="2.1.0";N=W,function(){var e,t,n,r,i,s,o,a,u,p,c,l,h,g,m,f,d,y,S,x,b,E,v,C,A,w;function q(e){return H.Statement.hasOwnProperty(e.type)}s=be,e=(i=xe).Syntax,n={"??":(t={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,Coalesce:3,LogicalOR:4,LogicalAND:5,BitwiseOR:6,BitwiseXOR:7,BitwiseAND:8,Equality:9,Relational:10,BitwiseSHIFT:11,Additive:12,Multiplicative:13,Exponentiation:14,Await:15,Unary:15,Postfix:16,OptionalChaining:17,Call:18,New:19,TaggedTemplate:20,Member:21,Primary:22}).Coalesce,"||":t.LogicalOR,"&&":t.LogicalAND,"|":t.BitwiseOR,"^":t.BitwiseXOR,"&":t.BitwiseAND,"==":t.Equality,"!=":t.Equality,"===":t.Equality,"!==":t.Equality,is:t.Equality,isnt:t.Equality,"<":t.Relational,">":t.Relational,"<=":t.Relational,">=":t.Relational,in:t.Relational,instanceof:t.Relational,"<<":t.BitwiseSHIFT,">>":t.BitwiseSHIFT,">>>":t.BitwiseSHIFT,"+":t.Additive,"-":t.Additive,"*":t.Multiplicative,"%":t.Multiplicative,"/":t.Multiplicative,"**":t.Exponentiation};var k=32,B=33;function P(e,t){var n="";for(t|=0;t>0;t>>>=1,e+=e)1&t&&(n+=e);return n}function F(e){var t=e.length;return t&&s.code.isLineTerminator(e.charCodeAt(t-1))}function M(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function I(e,t){var n,r;function i(e){return"object"==typeof e&&e instanceof Object&&!(e instanceof RegExp)}for(n in t)t.hasOwnProperty(n)&&(i(r=t[n])?i(e[n])?I(e[n],r):e[n]=I({},r):e[n]=r);return e}function T(e,t){return 8232==(-2&e)?(t?"u":"\\u")+(8232===e?"2028":"2029"):10===e||13===e?(t?"":"\\")+(10===e?"n":"r"):String.fromCharCode(e)}function D(e,t){var n;return 8===e?"\\b":12===e?"\\f":9===e?"\\t":(n=e.toString(16).toUpperCase(),u||e>255?"\\u"+"0000".slice(n.length)+n:0!==e||s.code.isDecimalDigit(t)?11===e?"\\x0B":"\\x"+"00".slice(n.length)+n:"\\0")}function O(e){if(92===e)return"\\\\";if(10===e)return"\\n";if(13===e)return"\\r";if(8232===e)return"\\u2028";if(8233===e)return"\\u2029";throw new Error("Incorrectly classified character")}function R(e){var t,n,r,i="";for(t=0,n=e.length;t<n;++t)r=e[t],i+=Array.isArray(r)?R(r):r;return i}function W(e,t){if(!E)return Array.isArray(e)?R(e):e;if(null==t){if(e instanceof r)return e;t={}}return null==t.loc?new r(null,null,E,e,t.name||null):new r(t.loc.start.line,t.loc.start.column,!0===E?t.loc.source||null:E,e,t.name||null)}function L(){return m||" "}function j(e,t){var n,r,i,o;return 0===(n=W(e).toString()).length?[t]:0===(r=W(t).toString()).length?[e]:(i=n.charCodeAt(n.length-1),o=r.charCodeAt(0),(43===i||45===i)&&i===o||s.code.isIdentifierPartES5(i)&&s.code.isIdentifierPartES5(o)||47===i&&105===o?[e,L(),t]:s.code.isWhiteSpace(i)||s.code.isLineTerminator(i)||s.code.isWhiteSpace(o)||s.code.isLineTerminator(o)?[e,t]:[e,m,t])}function U(e){return[o,e]}function z(e){var t;t=o,e(o+=a),o=t}function K(e,t){if("Line"===e.type){if(F(e.value))return"//"+e.value;var n="//"+e.value;return C||(n+="\n"),n}return x.format.indent.adjustMultilineComment&&/[\n\r]/.test(e.value)?function(e,t){var n,r,i,a,u,p,c,l;for(n=e.split(/\r\n|[\r\n]/),p=Number.MAX_VALUE,r=1,i=n.length;r<i;++r){for(a=n[r],u=0;u<a.length&&s.code.isWhiteSpace(a.charCodeAt(u));)++u;p>u&&(p=u)}for(void 0!==t?(c=o,"*"===n[1][p]&&(t+=" "),o=t):(1&p&&--p,c=o),r=1,i=n.length;r<i;++r)l=W(U(n[r].slice(p))),n[r]=E?l.join(""):l;return o=c,n.join("\n")}("/*"+e.value+"*/",t):"/*"+e.value+"*/"}function Y(t,n){var r,i,u,p,c,l,h,g,m,f,d,S;if(t.leadingComments&&t.leadingComments.length>0){if(p=n,C){for(n=[],g=(u=t.leadingComments[0]).extendedRange,m=u.range,(S=((d=v.substring(g[0],m[0])).match(/\n/g)||[]).length)>0?(n.push(P("\n",S)),n.push(U(K(u)))):(n.push(d),n.push(K(u))),f=m,r=1,i=t.leadingComments.length;r<i;r++)m=(u=t.leadingComments[r]).range,S=(v.substring(f[1],m[0]).match(/\n/g)||[]).length,n.push(P("\n",S)),n.push(U(K(u))),f=m;S=(v.substring(m[1],g[1]).match(/\n/g)||[]).length,n.push(P("\n",S))}else for(u=t.leadingComments[0],n=[],y&&t.type===e.Program&&0===t.body.length&&n.push("\n"),n.push(K(u)),F(W(n).toString())||n.push("\n"),r=1,i=t.leadingComments.length;r<i;++r)F(W(h=[K(u=t.leadingComments[r])]).toString())||h.push("\n"),n.push(U(h));n.push(U(p))}if(t.trailingComments)if(C)g=(u=t.trailingComments[0]).extendedRange,m=u.range,(S=((d=v.substring(g[0],m[0])).match(/\n/g)||[]).length)>0?(n.push(P("\n",S)),n.push(U(K(u)))):(n.push(d),n.push(K(u)));else for(c=!F(W(n).toString()),l=P(" ",function(e){var t;for(t=e.length-1;t>=0&&!s.code.isLineTerminator(e.charCodeAt(t));--t);return e.length-1-t}(W([o,n,a]).toString())),r=0,i=t.trailingComments.length;r<i;++r)u=t.trailingComments[r],c?(n=0===r?[n,a]:[n,l]).push(K(u,l)):n=[n,U(K(u))],r===i-1||F(W(n).toString())||(n=[n,"\n"]);return n}function _(e,t,n){var r,i=0;for(r=e;r<t;r++)"\n"===v[r]&&i++;for(r=1;r<i;r++)n.push(g)}function V(e,t,n){return t<n?["(",e,")"]:e}function G(e){var t,n,r;for(t=1,n=(r=e.split(/\r\n|\n/)).length;t<n;t++)r[t]=g+o+r[t];return r}function H(){}function X(e){return W(e.name,e)}function $(e,t){return e.async?"async"+(t?L():m):""}function J(e){return e.generator&&!x.moz.starlessGenerator?"*"+m:""}function Q(e){var t=e.value,n="";return t.async&&(n+=$(t,!e.computed)),t.generator&&(n+=J(t)?"*":""),n}H.prototype.maybeBlock=function(t,n){var r,i,s=this;return i=!x.comment||!t.leadingComments,t.type===e.BlockStatement&&i?[m,this.generateStatement(t,n)]:t.type===e.EmptyStatement&&i?";":(z((function(){r=[g,U(s.generateStatement(t,n))]})),r)},H.prototype.maybeBlockSuffix=function(t,n){var r=F(W(n).toString());return t.type!==e.BlockStatement||x.comment&&t.leadingComments||r?r?[n,o]:[n,g,o]:[n,m]},H.prototype.generatePattern=function(t,n,r){return t.type===e.Identifier?X(t):this.generateExpression(t,n,r)},H.prototype.generateFunctionParams=function(n){var r,i,s,o;if(o=!1,n.type!==e.ArrowFunctionExpression||n.rest||n.defaults&&0!==n.defaults.length||1!==n.params.length||n.params[0].type!==e.Identifier){for((s=n.type===e.ArrowFunctionExpression?[$(n,!1)]:[]).push("("),n.defaults&&(o=!0),r=0,i=n.params.length;r<i;++r)o&&n.defaults[r]?s.push(this.generateAssignment(n.params[r],n.defaults[r],"=",t.Assignment,7)):s.push(this.generatePattern(n.params[r],t.Assignment,7)),r+1<i&&s.push(","+m);n.rest&&(n.params.length&&s.push(","+m),s.push("..."),s.push(X(n.rest))),s.push(")")}else s=[$(n,!0),X(n.params[0])];return s},H.prototype.generateFunctionBody=function(n){var r,i;return r=this.generateFunctionParams(n),n.type===e.ArrowFunctionExpression&&(r.push(m),r.push("=>")),n.expression?(r.push(m),"{"===(i=this.generateExpression(n.body,t.Assignment,7)).toString().charAt(0)&&(i=["(",i,")"]),r.push(i)):r.push(this.maybeBlock(n.body,9)),r},H.prototype.generateIterationForStatement=function(n,r,i){var s=["for"+(r.await?L()+"await":"")+m+"("],o=this;return z((function(){r.left.type===e.VariableDeclaration?z((function(){s.push(r.left.kind+L()),s.push(o.generateStatement(r.left.declarations[0],0))})):s.push(o.generateExpression(r.left,t.Call,7)),s=j(s,n),s=[j(s,o.generateExpression(r.right,t.Assignment,7)),")"]})),s.push(this.maybeBlock(r.body,i)),s},H.prototype.generatePropertyKey=function(e,n){var r=[];return n&&r.push("["),r.push(this.generateExpression(e,t.Assignment,7)),n&&r.push("]"),r},H.prototype.generateAssignment=function(e,n,r,i,s){return t.Assignment<i&&(s|=1),V([this.generateExpression(e,t.Call,s),m+r+m,this.generateExpression(n,t.Assignment,s)],t.Assignment,i)},H.prototype.semicolon=function(e){return!d&&e&k?"":";"},H.Statement={BlockStatement:function(e,t){var n,r,i=["{",g],s=this;return z((function(){var o,a,u,p;for(0===e.body.length&&C&&(n=e.range)[1]-n[0]>2&&("\n"===(r=v.substring(n[0]+1,n[1]-1))[0]&&(i=["{"]),i.push(r)),p=1,8&t&&(p|=16),o=0,a=e.body.length;o<a;++o)C&&(0===o&&(e.body[0].leadingComments&&(n=e.body[0].leadingComments[0].extendedRange,"\n"===(r=v.substring(n[0],n[1]))[0]&&(i=["{"])),e.body[0].leadingComments||_(e.range[0],e.body[0].range[0],i)),o>0&&(e.body[o-1].trailingComments||e.body[o].leadingComments||_(e.body[o-1].range[1],e.body[o].range[0],i))),o===a-1&&(p|=k),u=e.body[o].leadingComments&&C?s.generateStatement(e.body[o],p):U(s.generateStatement(e.body[o],p)),i.push(u),F(W(u).toString())||C&&o<a-1&&e.body[o+1].leadingComments||i.push(g),C&&o===a-1&&(e.body[o].trailingComments||_(e.body[o].range[1],e.range[1],i))})),i.push(U("}")),i},BreakStatement:function(e,t){return e.label?"break "+e.label.name+this.semicolon(t):"break"+this.semicolon(t)},ContinueStatement:function(e,t){return e.label?"continue "+e.label.name+this.semicolon(t):"continue"+this.semicolon(t)},ClassBody:function(e,n){var r=["{",g],i=this;return z((function(n){var s,o;for(s=0,o=e.body.length;s<o;++s)r.push(n),r.push(i.generateExpression(e.body[s],t.Sequence,7)),s+1<o&&r.push(g)})),F(W(r).toString())||r.push(g),r.push(o),r.push("}"),r},ClassDeclaration:function(e,n){var r,i;return r=["class"],e.id&&(r=j(r,this.generateExpression(e.id,t.Sequence,7))),e.superClass&&(i=j("extends",this.generateExpression(e.superClass,t.Unary,7)),r=j(r,i)),r.push(m),r.push(this.generateStatement(e.body,B)),r},DirectiveStatement:function(e,t){return x.raw&&e.raw?e.raw+this.semicolon(t):function(e){var t,n,r,i;for(i="double"===l?'"':"'",t=0,n=e.length;t<n;++t){if(39===(r=e.charCodeAt(t))){i='"';break}if(34===r){i="'";break}92===r&&++t}return i+e+i}(e.directive)+this.semicolon(t)},DoWhileStatement:function(e,n){var r=j("do",this.maybeBlock(e.body,1));return j(r=this.maybeBlockSuffix(e.body,r),["while"+m+"(",this.generateExpression(e.test,t.Sequence,7),")"+this.semicolon(n)])},CatchClause:function(e,n){var r,i=this;return z((function(){var n;e.param?(r=["catch"+m+"(",i.generateExpression(e.param,t.Sequence,7),")"],e.guard&&(n=i.generateExpression(e.guard,t.Sequence,7),r.splice(2,0," if ",n))):r=["catch"]})),r.push(this.maybeBlock(e.body,1)),r},DebuggerStatement:function(e,t){return"debugger"+this.semicolon(t)},EmptyStatement:function(e,t){return";"},ExportDefaultDeclaration:function(e,n){var r,i=["export"];return r=n&k?B:1,i=j(i,"default"),q(e.declaration)?j(i,this.generateStatement(e.declaration,r)):j(i,this.generateExpression(e.declaration,t.Assignment,7)+this.semicolon(n))},ExportNamedDeclaration:function(n,r){var i,s=["export"],a=this;return i=r&k?B:1,n.declaration?j(s,this.generateStatement(n.declaration,i)):(n.specifiers&&(0===n.specifiers.length?s=j(s,"{"+m+"}"):n.specifiers[0].type===e.ExportBatchSpecifier?s=j(s,this.generateExpression(n.specifiers[0],t.Sequence,7)):(s=j(s,"{"),z((function(e){var r,i;for(s.push(g),r=0,i=n.specifiers.length;r<i;++r)s.push(e),s.push(a.generateExpression(n.specifiers[r],t.Sequence,7)),r+1<i&&s.push(","+g)})),F(W(s).toString())||s.push(g),s.push(o+"}")),n.source?s=j(s,["from"+m,this.generateExpression(n.source,t.Sequence,7),this.semicolon(r)]):s.push(this.semicolon(r))),s)},ExportAllDeclaration:function(e,n){return["export"+m,"*"+m,"from"+m,this.generateExpression(e.source,t.Sequence,7),this.semicolon(n)]},ExpressionStatement:function(n,r){var i,o,a,u;return 123===(o=W(i=[this.generateExpression(n.expression,t.Sequence,7)]).toString()).charCodeAt(0)||"class"===(a=o).slice(0,5)&&(123===(u=a.charCodeAt(5))||s.code.isWhiteSpace(u)||s.code.isLineTerminator(u))||function(e){var t;return"function"===e.slice(0,8)&&(40===(t=e.charCodeAt(8))||s.code.isWhiteSpace(t)||42===t||s.code.isLineTerminator(t))}(o)||function(e){var t,n,r;if("async"!==e.slice(0,5)||!s.code.isWhiteSpace(e.charCodeAt(5)))return!1;for(n=6,r=e.length;n<r&&s.code.isWhiteSpace(e.charCodeAt(n));++n);return n!==r&&"function"===e.slice(n,n+8)&&(40===(t=e.charCodeAt(n+8))||s.code.isWhiteSpace(t)||42===t||s.code.isLineTerminator(t))}(o)||S&&16&r&&n.expression.type===e.Literal&&"string"==typeof n.expression.value?i=["(",i,")"+this.semicolon(r)]:i.push(this.semicolon(r)),i},ImportDeclaration:function(n,r){var i,s,a=this;return 0===n.specifiers.length?["import",m,this.generateExpression(n.source,t.Sequence,7),this.semicolon(r)]:(i=["import"],s=0,n.specifiers[s].type===e.ImportDefaultSpecifier&&(i=j(i,[this.generateExpression(n.specifiers[s],t.Sequence,7)]),++s),n.specifiers[s]&&(0!==s&&i.push(","),n.specifiers[s].type===e.ImportNamespaceSpecifier?i=j(i,[m,this.generateExpression(n.specifiers[s],t.Sequence,7)]):(i.push(m+"{"),n.specifiers.length-s==1?(i.push(m),i.push(this.generateExpression(n.specifiers[s],t.Sequence,7)),i.push(m+"}"+m)):(z((function(e){var r,o;for(i.push(g),r=s,o=n.specifiers.length;r<o;++r)i.push(e),i.push(a.generateExpression(n.specifiers[r],t.Sequence,7)),r+1<o&&i.push(","+g)})),F(W(i).toString())||i.push(g),i.push(o+"}"+m)))),i=j(i,["from"+m,this.generateExpression(n.source,t.Sequence,7),this.semicolon(r)]))},VariableDeclarator:function(e,n){var r=1&n?7:6;return e.init?[this.generateExpression(e.id,t.Assignment,r),m,"=",m,this.generateExpression(e.init,t.Assignment,r)]:this.generatePattern(e.id,t.Assignment,r)},VariableDeclaration:function(e,t){var n,r,i,s,o,a=this;function u(){for(s=e.declarations[0],x.comment&&s.leadingComments?(n.push("\n"),n.push(U(a.generateStatement(s,o)))):(n.push(L()),n.push(a.generateStatement(s,o))),r=1,i=e.declarations.length;r<i;++r)s=e.declarations[r],x.comment&&s.leadingComments?(n.push(","+g),n.push(U(a.generateStatement(s,o)))):(n.push(","+m),n.push(a.generateStatement(s,o)))}return n=[e.kind],o=1&t?1:0,e.declarations.length>1?z(u):u(),n.push(this.semicolon(t)),n},ThrowStatement:function(e,n){return[j("throw",this.generateExpression(e.argument,t.Sequence,7)),this.semicolon(n)]},TryStatement:function(e,t){var n,r,i,s;if(n=["try",this.maybeBlock(e.block,1)],n=this.maybeBlockSuffix(e.block,n),e.handlers)for(r=0,i=e.handlers.length;r<i;++r)n=j(n,this.generateStatement(e.handlers[r],1)),(e.finalizer||r+1!==i)&&(n=this.maybeBlockSuffix(e.handlers[r].body,n));else{for(r=0,i=(s=e.guardedHandlers||[]).length;r<i;++r)n=j(n,this.generateStatement(s[r],1)),(e.finalizer||r+1!==i)&&(n=this.maybeBlockSuffix(s[r].body,n));if(e.handler)if(Array.isArray(e.handler))for(r=0,i=e.handler.length;r<i;++r)n=j(n,this.generateStatement(e.handler[r],1)),(e.finalizer||r+1!==i)&&(n=this.maybeBlockSuffix(e.handler[r].body,n));else n=j(n,this.generateStatement(e.handler,1)),e.finalizer&&(n=this.maybeBlockSuffix(e.handler.body,n))}return e.finalizer&&(n=j(n,["finally",this.maybeBlock(e.finalizer,1)])),n},SwitchStatement:function(e,n){var r,i,s,o,a,u=this;if(z((function(){r=["switch"+m+"(",u.generateExpression(e.discriminant,t.Sequence,7),")"+m+"{"+g]})),e.cases)for(a=1,s=0,o=e.cases.length;s<o;++s)s===o-1&&(a|=k),i=U(this.generateStatement(e.cases[s],a)),r.push(i),F(W(i).toString())||r.push(g);return r.push(U("}")),r},SwitchCase:function(n,r){var i,s,o,a,u,p=this;return z((function(){for(i=n.test?[j("case",p.generateExpression(n.test,t.Sequence,7)),":"]:["default:"],o=0,(a=n.consequent.length)&&n.consequent[0].type===e.BlockStatement&&(s=p.maybeBlock(n.consequent[0],1),i.push(s),o=1),o===a||F(W(i).toString())||i.push(g),u=1;o<a;++o)o===a-1&&r&k&&(u|=k),s=U(p.generateStatement(n.consequent[o],u)),i.push(s),o+1===a||F(W(s).toString())||i.push(g)})),i},IfStatement:function(n,r){var i,s,o=this;return z((function(){i=["if"+m+"(",o.generateExpression(n.test,t.Sequence,7),")"]})),s=1,r&k&&(s|=k),n.alternate?(i.push(this.maybeBlock(n.consequent,1)),i=this.maybeBlockSuffix(n.consequent,i),i=n.alternate.type===e.IfStatement?j(i,["else ",this.generateStatement(n.alternate,s)]):j(i,j("else",this.maybeBlock(n.alternate,s)))):i.push(this.maybeBlock(n.consequent,s)),i},ForStatement:function(n,r){var i,s=this;return z((function(){i=["for"+m+"("],n.init?n.init.type===e.VariableDeclaration?i.push(s.generateStatement(n.init,0)):(i.push(s.generateExpression(n.init,t.Sequence,6)),i.push(";")):i.push(";"),n.test&&(i.push(m),i.push(s.generateExpression(n.test,t.Sequence,7))),i.push(";"),n.update&&(i.push(m),i.push(s.generateExpression(n.update,t.Sequence,7))),i.push(")")})),i.push(this.maybeBlock(n.body,r&k?B:1)),i},ForInStatement:function(e,t){return this.generateIterationForStatement("in",e,t&k?B:1)},ForOfStatement:function(e,t){return this.generateIterationForStatement("of",e,t&k?B:1)},LabeledStatement:function(e,t){return[e.label.name+":",this.maybeBlock(e.body,t&k?B:1)]},Program:function(e,t){var n,r,i,s,o;for(s=e.body.length,n=[y&&s>0?"\n":""],o=17,i=0;i<s;++i)y||i!==s-1||(o|=k),C&&(0===i&&(e.body[0].leadingComments||_(e.range[0],e.body[i].range[0],n)),i>0&&(e.body[i-1].trailingComments||e.body[i].leadingComments||_(e.body[i-1].range[1],e.body[i].range[0],n))),r=U(this.generateStatement(e.body[i],o)),n.push(r),i+1<s&&!F(W(r).toString())&&(C&&e.body[i+1].leadingComments||n.push(g)),C&&i===s-1&&(e.body[i].trailingComments||_(e.body[i].range[1],e.range[1],n));return n},FunctionDeclaration:function(e,t){return[$(e,!0),"function",J(e)||L(),e.id?X(e.id):"",this.generateFunctionBody(e)]},ReturnStatement:function(e,n){return e.argument?[j("return",this.generateExpression(e.argument,t.Sequence,7)),this.semicolon(n)]:["return"+this.semicolon(n)]},WhileStatement:function(e,n){var r,i=this;return z((function(){r=["while"+m+"(",i.generateExpression(e.test,t.Sequence,7),")"]})),r.push(this.maybeBlock(e.body,n&k?B:1)),r},WithStatement:function(e,n){var r,i=this;return z((function(){r=["with"+m+"(",i.generateExpression(e.object,t.Sequence,7),")"]})),r.push(this.maybeBlock(e.body,n&k?B:1)),r}},M(H.prototype,H.Statement),H.Expression={SequenceExpression:function(e,n,r){var i,s,o;for(t.Sequence<n&&(r|=1),i=[],s=0,o=e.expressions.length;s<o;++s)i.push(this.generateExpression(e.expressions[s],t.Assignment,r)),s+1<o&&i.push(","+m);return V(i,t.Sequence,n)},AssignmentExpression:function(e,t,n){return this.generateAssignment(e.left,e.right,e.operator,t,n)},ArrowFunctionExpression:function(e,n,r){return V(this.generateFunctionBody(e),t.ArrowFunction,n)},ConditionalExpression:function(e,n,r){return t.Conditional<n&&(r|=1),V([this.generateExpression(e.test,t.Coalesce,r),m+"?"+m,this.generateExpression(e.consequent,t.Assignment,r),m+":"+m,this.generateExpression(e.alternate,t.Assignment,r)],t.Conditional,n)},LogicalExpression:function(e,t,n){return"??"===e.operator&&(n|=64),this.BinaryExpression(e,t,n)},BinaryExpression:function(e,r,i){var o,a,u,p,c,l;return p=n[e.operator],a="**"===e.operator?t.Postfix:p,u="**"===e.operator?p:p+1,p<r&&(i|=1),o=47===(l=(c=this.generateExpression(e.left,a,i)).toString()).charCodeAt(l.length-1)&&s.code.isIdentifierPartES5(e.operator.charCodeAt(0))?[c,L(),e.operator]:j(c,e.operator),c=this.generateExpression(e.right,u,i),"/"===e.operator&&"/"===c.toString().charAt(0)||"<"===e.operator.slice(-1)&&"!--"===c.toString().slice(0,3)?(o.push(L()),o.push(c)):o=j(o,c),"in"!==e.operator||1&i?("||"===e.operator||"&&"===e.operator)&&64&i?["(",o,")"]:V(o,p,r):["(",o,")"]},CallExpression:function(e,n,r){var i,s,o;for(i=[this.generateExpression(e.callee,t.Call,3)],e.optional&&i.push("?."),i.push("("),s=0,o=e.arguments.length;s<o;++s)i.push(this.generateExpression(e.arguments[s],t.Assignment,7)),s+1<o&&i.push(","+m);return i.push(")"),2&r?V(i,t.Call,n):["(",i,")"]},ChainExpression:function(e,n,r){return t.OptionalChaining<n&&(r|=2),V(this.generateExpression(e.expression,t.OptionalChaining,r),t.OptionalChaining,n)},NewExpression:function(e,n,r){var i,s,o,a,u;if(s=e.arguments.length,u=4&r&&!f&&0===s?5:1,i=j("new",this.generateExpression(e.callee,t.New,u)),!(4&r)||f||s>0){for(i.push("("),o=0,a=s;o<a;++o)i.push(this.generateExpression(e.arguments[o],t.Assignment,7)),o+1<a&&i.push(","+m);i.push(")")}return V(i,t.New,n)},MemberExpression:function(n,r,i){var o,a;return o=[this.generateExpression(n.object,t.Call,2&i?3:1)],n.computed?(n.optional&&o.push("?."),o.push("["),o.push(this.generateExpression(n.property,t.Sequence,2&i?7:5)),o.push("]")):(n.optional||n.object.type!==e.Literal||"number"!=typeof n.object.value||(a=W(o).toString()).indexOf(".")<0&&!/[eExX]/.test(a)&&s.code.isDecimalDigit(a.charCodeAt(a.length-1))&&!(a.length>=2&&48===a.charCodeAt(0))&&o.push(" "),o.push(n.optional?"?.":"."),o.push(X(n.property))),V(o,t.Member,r)},MetaProperty:function(e,n,r){var i;return(i=[]).push("string"==typeof e.meta?e.meta:X(e.meta)),i.push("."),i.push("string"==typeof e.property?e.property:X(e.property)),V(i,t.Member,n)},UnaryExpression:function(e,n,r){var i,o,a,u,p;return o=this.generateExpression(e.argument,t.Unary,7),""===m?i=j(e.operator,o):(i=[e.operator],e.operator.length>2?i=j(i,o):(p=(u=W(i).toString()).charCodeAt(u.length-1),a=o.toString().charCodeAt(0),((43===p||45===p)&&p===a||s.code.isIdentifierPartES5(p)&&s.code.isIdentifierPartES5(a))&&i.push(L()),i.push(o))),V(i,t.Unary,n)},YieldExpression:function(e,n,r){var i;return i=e.delegate?"yield*":"yield",e.argument&&(i=j(i,this.generateExpression(e.argument,t.Yield,7))),V(i,t.Yield,n)},AwaitExpression:function(e,n,r){return V(j(e.all?"await*":"await",this.generateExpression(e.argument,t.Await,7)),t.Await,n)},UpdateExpression:function(e,n,r){return e.prefix?V([e.operator,this.generateExpression(e.argument,t.Unary,7)],t.Unary,n):V([this.generateExpression(e.argument,t.Postfix,7),e.operator],t.Postfix,n)},FunctionExpression:function(e,t,n){var r=[$(e,!0),"function"];return e.id?(r.push(J(e)||L()),r.push(X(e.id))):r.push(J(e)||m),r.push(this.generateFunctionBody(e)),r},ArrayPattern:function(e,t,n){return this.ArrayExpression(e,t,n,!0)},ArrayExpression:function(e,n,r,i){var s,a,u=this;return e.elements.length?(a=!i&&e.elements.length>1,s=["[",a?g:""],z((function(n){var r,i;for(r=0,i=e.elements.length;r<i;++r)e.elements[r]?(s.push(a?n:""),s.push(u.generateExpression(e.elements[r],t.Assignment,7))):(a&&s.push(n),r+1===i&&s.push(",")),r+1<i&&s.push(","+(a?g:m))})),a&&!F(W(s).toString())&&s.push(g),s.push(a?o:""),s.push("]"),s):"[]"},RestElement:function(e,t,n){return"..."+this.generatePattern(e.argument)},ClassExpression:function(e,n,r){var i,s;return i=["class"],e.id&&(i=j(i,this.generateExpression(e.id,t.Sequence,7))),e.superClass&&(s=j("extends",this.generateExpression(e.superClass,t.Unary,7)),i=j(i,s)),i.push(m),i.push(this.generateStatement(e.body,B)),i},MethodDefinition:function(e,t,n){var r,i;return r=e.static?["static"+m]:[],i="get"===e.kind||"set"===e.kind?[j(e.kind,this.generatePropertyKey(e.key,e.computed)),this.generateFunctionBody(e.value)]:[Q(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)],j(r,i)},Property:function(e,n,r){return"get"===e.kind||"set"===e.kind?[e.kind,L(),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]:e.shorthand?"AssignmentPattern"===e.value.type?this.AssignmentPattern(e.value,t.Sequence,7):this.generatePropertyKey(e.key,e.computed):e.method?[Q(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]:[this.generatePropertyKey(e.key,e.computed),":"+m,this.generateExpression(e.value,t.Assignment,7)]},ObjectExpression:function(e,n,r){var i,s,a,u,p=this;return e.properties.length?(i=e.properties.length>1,z((function(){a=p.generateExpression(e.properties[0],t.Sequence,7)})),i||(u=W(a).toString(),/[\r\n]/g.test(u))?(z((function(n){var r,o;if(s=["{",g,n,a],i)for(s.push(","+g),r=1,o=e.properties.length;r<o;++r)s.push(n),s.push(p.generateExpression(e.properties[r],t.Sequence,7)),r+1<o&&s.push(","+g)})),F(W(s).toString())||s.push(g),s.push(o),s.push("}"),s):["{",m,a,m,"}"]):"{}"},AssignmentPattern:function(e,t,n){return this.generateAssignment(e.left,e.right,"=",t,n)},ObjectPattern:function(n,r,i){var s,a,u,p,c,l=this;if(!n.properties.length)return"{}";if(p=!1,1===n.properties.length)(c=n.properties[0]).type===e.Property&&c.value.type!==e.Identifier&&(p=!0);else for(a=0,u=n.properties.length;a<u;++a)if((c=n.properties[a]).type===e.Property&&!c.shorthand){p=!0;break}return s=["{",p?g:""],z((function(e){var r,i;for(r=0,i=n.properties.length;r<i;++r)s.push(p?e:""),s.push(l.generateExpression(n.properties[r],t.Sequence,7)),r+1<i&&s.push(","+(p?g:m))})),p&&!F(W(s).toString())&&s.push(g),s.push(p?o:""),s.push("}"),s},ThisExpression:function(e,t,n){return"this"},Super:function(e,t,n){return"super"},Identifier:function(e,t,n){return X(e)},ImportDefaultSpecifier:function(e,t,n){return X(e.id||e.local)},ImportNamespaceSpecifier:function(e,t,n){var r=["*"],i=e.id||e.local;return i&&r.push(m+"as"+L()+X(i)),r},ImportSpecifier:function(e,t,n){var r=e.imported,i=[r.name],s=e.local;return s&&s.name!==r.name&&i.push(L()+"as"+L()+X(s)),i},ExportSpecifier:function(e,t,n){var r=e.local,i=[r.name],s=e.exported;return s&&s.name!==r.name&&i.push(L()+"as"+L()+X(s)),i},Literal:function(t,n,r){var i;if(t.hasOwnProperty("raw")&&b&&x.raw)try{if((i=b(t.raw).body[0].expression).type===e.Literal&&i.value===t.value)return t.raw}catch{}return t.regex?"/"+t.regex.pattern+"/"+t.regex.flags:"bigint"==typeof t.value?t.value.toString()+"n":t.bigint?t.bigint+"n":null===t.value?"null":"string"==typeof t.value?function(e){var t,n,r,i,o,a="",p=0,c=0;for(t=0,n=e.length;t<n;++t){if(39===(r=e.charCodeAt(t)))++p;else if(34===r)++c;else if(47===r&&u)a+="\\";else{if(s.code.isLineTerminator(r)||92===r){a+=O(r);continue}if(!s.code.isIdentifierPartES5(r)&&(u&&r<32||!u&&!h&&(r<32||r>126))){a+=D(r,e.charCodeAt(t+1));continue}}a+=String.fromCharCode(r)}if(o=(i=!("double"===l||"auto"===l&&c<p))?"'":'"',!(i?p:c))return o+a+o;for(e=a,a=o,t=0,n=e.length;t<n;++t)(39===(r=e.charCodeAt(t))&&i||34===r&&!i)&&(a+="\\"),a+=String.fromCharCode(r);return a+o}(t.value):"number"==typeof t.value?function(e){var t,n,r,i,s;if(e!=e)throw new Error("Numeric literal whose value is NaN");if(e<0||0===e&&1/e<0)throw new Error("Numeric literal whose value is negative");if(e===1/0)return u?"null":p?"1e400":"1e+400";if(t=""+e,!p||t.length<3)return t;for(n=t.indexOf("."),u||48!==t.charCodeAt(0)||1!==n||(n=0,t=t.slice(1)),r=t,t=t.replace("e+","e"),i=0,(s=r.indexOf("e"))>0&&(i=+r.slice(s+1),r=r.slice(0,s)),n>=0&&(i-=r.length-n-1,r=+(r.slice(0,n)+r.slice(n+1))+""),s=0;48===r.charCodeAt(r.length+s-1);)--s;return 0!==s&&(i-=s,r=r.slice(0,s)),0!==i&&(r+="e"+i),(r.length<t.length||c&&e>1e12&&Math.floor(e)===e&&(r="0x"+e.toString(16)).length<t.length)&&+r===e&&(t=r),t}(t.value):"boolean"==typeof t.value?t.value?"true":"false":function(e){var t,n,r,i,s,o,a,u;if(n=e.toString(),e.source){if(!(t=n.match(/\/([^/]*)$/)))return n;for(r=t[1],n="",a=!1,u=!1,i=0,s=e.source.length;i<s;++i)o=e.source.charCodeAt(i),u?(n+=T(o,u),u=!1):(a?93===o&&(a=!1):47===o?n+="\\":91===o&&(a=!0),n+=T(o,u),u=92===o);return"/"+n+"/"+r}return n}(t.value)},GeneratorExpression:function(e,t,n){return this.ComprehensionExpression(e,t,n)},ComprehensionExpression:function(n,r,i){var s,o,a,u,p=this;return s=n.type===e.GeneratorExpression?["("]:["["],x.moz.comprehensionExpressionStartsWithAssignment&&(u=this.generateExpression(n.body,t.Assignment,7),s.push(u)),n.blocks&&z((function(){for(o=0,a=n.blocks.length;o<a;++o)u=p.generateExpression(n.blocks[o],t.Sequence,7),o>0||x.moz.comprehensionExpressionStartsWithAssignment?s=j(s,u):s.push(u)})),n.filter&&(s=j(s,"if"+m),u=this.generateExpression(n.filter,t.Sequence,7),s=j(s,["(",u,")"])),x.moz.comprehensionExpressionStartsWithAssignment||(u=this.generateExpression(n.body,t.Assignment,7),s=j(s,u)),s.push(n.type===e.GeneratorExpression?")":"]"),s},ComprehensionBlock:function(n,r,i){var s;return s=j(s=n.left.type===e.VariableDeclaration?[n.left.kind,L(),this.generateStatement(n.left.declarations[0],0)]:this.generateExpression(n.left,t.Call,7),n.of?"of":"in"),s=j(s,this.generateExpression(n.right,t.Sequence,7)),["for"+m+"(",s,")"]},SpreadElement:function(e,n,r){return["...",this.generateExpression(e.argument,t.Assignment,7)]},TaggedTemplateExpression:function(e,n,r){var i=3;return 2&r||(i=1),V([this.generateExpression(e.tag,t.Call,i),this.generateExpression(e.quasi,t.Primary,4)],t.TaggedTemplate,n)},TemplateElement:function(e,t,n){return e.value.raw},TemplateLiteral:function(e,n,r){var i,s,o;for(i=["`"],s=0,o=e.quasis.length;s<o;++s)i.push(this.generateExpression(e.quasis[s],t.Primary,7)),s+1<o&&(i.push("${"+m),i.push(this.generateExpression(e.expressions[s],t.Sequence,7)),i.push(m+"}"));return i.push("`"),i},ModuleSpecifier:function(e,t,n){return this.Literal(e,t,n)},ImportExpression:function(e,n,r){return V(["import(",this.generateExpression(e.source,t.Assignment,7),")"],t.Call,n)}},M(H.prototype,H.Expression),H.prototype.generateExpression=function(n,r,i){var s,o,a,u,p;return o=n.type||e.Property,x.verbatim&&n.hasOwnProperty(x.verbatim)?(u=r,W("string"==typeof(p=(a=n)[x.verbatim])?V(G(p),t.Sequence,u):V(G(p.content),null!=p.precedence?p.precedence:t.Sequence,u),a)):(s=this[o](n,r,i),x.comment&&(s=Y(n,s)),W(s,n))},H.prototype.generateStatement=function(t,n){var r,i;return r=this[t.type](t,n),x.comment&&(r=Y(t,r)),i=W(r).toString(),t.type!==e.Program||y||""!==g||"\n"!==i.charAt(i.length-1)||(r=E?W(r).replaceRight(/\s+$/,""):i.replace(/\s+$/,"")),W(r,t)},A={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},w={indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},N.version=Ce,N.generate=function(e,n){var i,s,A={indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null};return null!=n?("string"==typeof n.indent&&(A.format.indent.style=n.indent),"number"==typeof n.base&&(A.format.indent.base=n.base),n=I(A,n),a=n.format.indent.style,o="string"==typeof n.base?n.base:P(a,n.format.indent.base)):(a=(n=A).format.indent.style,o=P(a,n.format.indent.base)),u=n.format.json,p=n.format.renumber,c=!u&&n.format.hexadecimal,l=u?"double":n.format.quotes,h=n.format.escapeless,g=n.format.newline,m=n.format.space,n.format.compact&&(g=m=a=o=""),f=n.format.parentheses,d=n.format.semicolons,y=n.format.safeConcatenation,S=n.directive,b=u?null:n.parse,E=n.sourceMap,v=n.sourceCode,C=n.format.preserveBlankLines&&null!==v,x=n,E&&(r=N.browser?ve.sourceMap.SourceNode:Ee.SourceNode),i=function(e){var n,r;if(n=new H,q(e))return n.generateStatement(e,1);if(r=e,H.Expression.hasOwnProperty(r.type))return n.generateExpression(e,t.Sequence,7);throw new Error("Unknown node type: "+e.type)}(e),E?(s=i.toStringWithSourceMap({file:n.file,sourceRoot:n.sourceMapRoot}),n.sourceContent&&s.map.setSourceContent(n.sourceMap,n.sourceContent),n.sourceMapWithCode?s:s.map.toString()):(s={code:i.toString(),map:null},n.sourceMapWithCode?s:s.code)},N.attachComments=i.attachComments,N.Precedence=I({},t),N.browser=!1,N.FORMAT_MINIFY=A,N.FORMAT_DEFAULTS=w}();var Ae=W.FORMAT_DEFAULTS,we=W.FORMAT_MINIFY,qe=W.Precedence,ke=W.attachComments,Be=W.browser,Pe=W.generate,Fe=W.version;export{Ae as FORMAT_DEFAULTS,we as FORMAT_MINIFY,qe as Precedence,ke as attachComments,Be as browser,W as default,Pe as generate,Fe as version};