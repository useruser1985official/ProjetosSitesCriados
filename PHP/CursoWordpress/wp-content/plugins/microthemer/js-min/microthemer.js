jQuery(document).ready((function(e){var t=TvrMT.TvrCom,a=TvrMT.MTF,s=TvrMT.MTdetached,r=TvrMT.detachedWin,o=TvrMT.mod.MTace,n=TvrMT.mod.MTint,i=TvrMT.mod.MTloop,l=TvrMT.mod.MTdd,c=TvrMT.mod.MTsave,d=TvrMT.mod.MTsass,_=TvrMT.mod.MTgrid,u=TvrMT.mod.MTfolder,p=TvrMT.mod.MThtml,f=TvrMT.mod.MTai,g=(TvrMT.mod.MTtransform,TvrMT.mod.MTlayout),m=TvrMT.mod.MTwidget,v=TvrMT.data.dyn.pref,h=parseInt(v.allow_scss),b=TvrMT.data.dyn.client_scss,y=e("body").width();TvrMT.TvrUi={appName:TvrMT.data.dyn.ui_config.appName,cssFilters:TvrMT.data.prog.CSSFilters,cssProps:TvrMT.data.prog.CSSProps,gatheredCSS:TvrMT.data.prog.gatheredCSS,templates:TvrMT.data.templates,blog_details:TvrMT.data.dyn.blog_details,TVR_DEV_MODE:TVR_DEV_MODE,scss_enabled:h,client_scss:b,pref:TvrMT.data.dyn.pref,uiData:TvrMT.data.dyn.ui,sass:!1,jsDataFunc:!1,revisionStack:{undo:[],redo:[],current:null},jsuVersion:7,jsuEvents:{js_css_compilation:3,synced_code_gui:4,imp_only_sh_and_grad_fix:5,property_value_structure:6,separate_css_units:7},aiRetryShouldAwaitSave:0,selInFocusID:t.checkObject(TvrMT.data.dyn.ui,["non_section","meta","last_viewed_selector"]),sRules:CSSUtilities,reinitRules:!0,tooMuchCSS:!1,tmp:{},uiUrl:e("#ui-url").attr("rel"),pluginUrl:e("#plugin-url").attr("rel"),innoFireall:parseInt(e("#inno-firewall-issue").attr("rel")),adminUrl:e("#admin-url").attr("rel"),microUrl:e("#micro-url").attr("rel"),totalSecs:parseInt(e("#total-sec-count").text()),TvrSugCSS:{},breadcrumbNodesCache:{},highlightEnabled:!1,colorPickerDragging:!1,progStatus:[],intelli:!1,awaitingIFrame:!0,placeholderFrame:!0,errorBeingProcessed:0,compProps:{},grid:{container:!1,items:[]},intelliCompProps:{},nodeCSS:{},intellinodeCSS:{},mixedElKey:0,update_gf_url:!1,g_url:"",comboScrollTopPos:0,pageOrPostID:t.checkObject(TvrMT.data.dyn,["ui_config","preview_item_id"]),numSug:100,numRecent:6,numSampled:15,numMiniTiles:12,numSavedTiles:56,numSiteTiles:56,maxSelsPerFolder:40,proGroups:{flexbox:1,grid:1,animation:1,transition:1,transform:1,mask:1},samplingProps:["font_family","font_size","line_height","color","padding_top","padding_right","padding_bottom","padding_left","margin_top","margin_right","margin_bottom","margin_left","row_gap","column_gap","border_width","border_radius"],gridTrackProps:["grid-template-rows","grid-template-columns","grid-auto-rows","grid-auto-columns"],propAliases:TvrMT.data.prog.propAliases,cssFuncAliases:TvrMT.data.prog.cssFuncAliases,domChanged:{updateHTMLPane:!1,updateFrontIndexes:!1},mutationObserver:!1,selectorLabelEditing:!1,retargetSelector:!1,draftSelector:{atts:{},ace:{}},draftFolders:[],draft_user_action:{new:{},retarget:{}},stat:{win:window,doc:document,head:document.head,$doc:e(document),body:e("body"),tvr:e("#tvr"),vis:e("#visual-view"),styleComponents:e("#style-components"),logicAnalysis:e("#logicAnalysis"),phpSyntax:e("#phpSyntax"),nav:e("#tvr-nav"),mainMenu:e("#mt-folders"),searchFoldersInput:e("#search-folders-input"),mainMenuInner:e("#tvr-menu"),top:e("#mt-top-controls"),code:e("#hand-css-area"),codeInner:e("#tvr-inner-code"),grid:e("#grid-control-wrap"),inlineEditor:e("#inline-editor"),adaptableEditor:e("#adaptable-editor"),aiPanel:e("#ai-assistant-panel"),aiEditor:e("#ai-editor"),view:e("#display-css-code-dialog"),res:e("#responsive-bar"),css_icons:e("#css-group-icons"),slider:e("#v-mq-slider"),opts:e("#tvr-options"),front:e("#v-frontend-wrap"),frontInner:e("#v-frontend"),wiz:e("#advanced-wizard"),inspectionPanes:e("#wizard-panes"),currentFolderItem:e("#current-folder-item"),refineTarget:e("#refine-target-controls"),cssModifiers:e("#cm-css-filters"),contextMenu:e("#mt-context-menu"),addSelectorForm:e("#cm-edit-folder-options").find(".add-selector-form"),editSelectorForm:e("#cm-selector-options").find(".edit-selector-form"),suggestionsMenu:e("#mt-suggestions-menu"),suggestionsAdvanced:e("#mt-suggestions-panel"),curSecTrailText:e("#sec-in-focus"),curSelTrailText:e("#cur-sel-trail-text"),curStateTrailText:e("#cur-state-trail-text"),curSecInput:e("#sec-hierarchy-input"),curSelInput:e("#sel-hierarchy-input"),curCodeInput:e("#code-hierarchy-input"),publishButton:e("#mt-publish-action"),breadcrumbs:e("#full-breadcrumbs"),sliderDragbar:e("#mtss-dragbar"),actStyles:e("#actual-styles"),settingsMenu:e("#program-settings-menu"),aiAssistant:e("#ai-assistant-panel"),notifications:e("#mt-notifications"),iframe:e("#viframe"),iframeDoc:!1,dialogs:e("#dialogs"),cssUnitGrid:e("#css-units-grid"),scss_compile_notes:e("#scss-error-notes"),scss_error_file:e("#scss-error-file"),widthTest:e("#tvr-width-input"),changeUrlInputWrap:e("#previewPath").parent(),inputWidthCalc:e("#inputWidthCalc"),codeInputWidthCalc:e("#codeInputWidthCalc")},tOut:6e4,hi:{section:"folder-icon tvr-icon",selector:"selector-icon tvr-icon",tab:"edit-media-queries lg-icon"},baseFontSize:16,browser:e("#user-browser").attr("rel"),meta:{},inputWaitingObj:{},timer:{},previous_selector:"",joined_selectors:[],jumpTo:!1,something_wrong:!1,debugCount:0,wasOpen:!1,dataLoading:!1,intelliAfterLoad:!1,ajaxUrl:e("#wpAjaxUrl").attr("rel"),toolbarHeight:0,frameHeight:0,frameWidth:0,previewWidth:0,rulerVal:0,prev:!1,fullWidth:y,resSliderWidth:0,tabsWidth:0,sortableMenuDims:{},mqs:[],totalSels:parseInt(e("#total-sel-count").text()),trial:"1"!=e("#plugin-trial").attr("rel"),gFontTarget:Object(),selsToLoad:0,totalToLoad:0,pgInFocusWiz:"font",aceTypingInterval:50,inputTypingInterval:50,beforeSaveInterval:1200,beforeAutoConvertInterval:2e3,saveInProgress:!1,pendingAutoSave:function(){return t.obj_length(S.pendingAutoSaveConfig)},pendingAutoSaveConfig:{},reSave:!1,siteUrl:e("#site-url").attr("rel"),homeUrl:e("#home-url").attr("rel"),itemAlreadyExpanded:!1,tooltipDelay:300,edge_mode:parseInt(e("#edge-mode").attr("rel")),init:function(){window!=window.top&&window.parent.TvrMT&&(window.location=S.homeUrl),TvrMT.init.add_listeners()},set_default_theme_mode:function(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&S.toggle_feature(e("#mymtonoffswitch-mt_dark_mode").closest(".mt-ui-toggle")),S.pref.theme_mode_set=1,c.save_multiple_preferences({mt_dark_mode:S.pref.mt_dark_mode,theme_mode_set:1},1)},ua_detected:function(){S.something_wrong=!1},JSerrors:[],prevJSerrors:[],reportedJSErrors:[],process_error:function(e,t,a,s,r,o,n){if(S.errorBeingProcessed>3)return S.errorBeingProcessed=0,!1;if(S.errorBeingProcessed++,(o=o||{}).stack){let e=o.stack.match(/\((https?:[^:]+):(\d+):(\d+)/);e&&(a=e[1],s=e[2],r=e[3])}let i=a.substring(a.lastIndexOf("/")+1).split("?")[0],l={error:t,file:i,URL:a,line:s,col:r,error_key:i+"|"+s+"|"+r+"|"+t,source:"ui"===e?TvrLang.interface:TvrLang.frontend,stack:S.strip_domain_names(o.stack)};S.JSerrors.push(l),S.instant_show_js_error(e,l)},catch_js_errors:function(){if(window.top.Cypress||!parseInt(S.pref.monitor_js_errors))return!1;window.onerror=function(e,t,a,s,r){S.process_error("ui",e,t,a,s,r)}},instantPreviewNotSass:function(){return!parseInt(S.pref.allow_scss)},adminAssetsEnabled:function(){return parseInt(S.pref.admin_asset_loading)||parseInt(S.pref.admin_asset_editing)},isMTerror:function(e,t,a){return a||e&&(e.indexOf("microthemer/js")>-1||e.indexOf("micro-themes/mt/js")>-1||t&&e.indexOf("micro-themes/draft-scripts.js")>-1)},instant_show_js_error:function(e,a){let s=S.pref.reporting.file.unique_errors;s!==Object(s)&&(S.pref.reporting.file.unique_errors={},s=S.pref.reporting.file.unique_errors),TVR_DEV_MODE||!s[a.error_key]?(s[a.error_key]=1,t.action_after_timeout("maybe_send_error_report",500,{item:S.maybe_send_error_report,args:[!1,!1,a]})):s[a.error_key]++;let r="html"===S.pref.pg_focus;if(S.isMTerror(a.URL,!0,r)){var o={short:a.error,long:"<p>"+S.appName+" "+TvrLang.js_error_site+":</p>"+S.js_error_deets(),type:"warning"};"ui"===e||a.URL.indexOf("micro-themes/mt/js")>-1?c.update_full_logs(o):c.log(o)}},extractErrorDetails:function(e,t){let s={url:"",message:"An unknown error occurred",functionName:t,col:"unknown",line:"unknown",originalError:e};if(!e)return s;if(s.message=e.message||String(e),s.url=e.url||"","string"==typeof e.stack){const t=e.stack.split("\n"),r=[/at\s.*\(.*:(\d+):(\d+)\)?/,/@.*:(\d+):(\d+)/];for(const e of t)if(e.includes("dyn_amends")){for(const t of r){const r=e.match(t);if(r){s.url=a?a.get_current_url():"",s.line=parseInt(r[1],10),s.col=parseInt(r[2],10);break}}if(null!==s.col)break}}return s},js_error_deets:function(a){t.startT(arguments);var s="",r=a?S.prevJSerrors:S.JSerrors;if(r.length>0){for(var o in s+="<ol>",r)if(r.hasOwnProperty(o)){var n=r[o];for(var i in s+="<li>",n)if(n.hasOwnProperty(i)){var l=n[i];if("URL"===i&&l)l='<a target="_blank" href="'+l+'">'+t.root_rel(l).split("?")[0]+"</a>";else{if("stack"===i||"file"===i||"error_key"===i)continue;"error"===i&&"object"==typeof l&&(l=l.detail&&"object"==typeof l.detail&&l.detail.message?l.detail.message:"Error details unknown")}s+="<b>"+t.ucwords(i)+":</b> "+l+"<br />"}s+="</li>"}s+="</ol>",S.prevJSerrors=e.extend(!0,[],S.JSerrors),S.reportedJSErrors=[].concat(S.prevJSerrors),S.JSerrors=[]}return t.endT(arguments),s},isProGroup:function(e){var t=S.get_meta(e,"group");return S.proGroups[t.groupSlug]||"html"!==t.groupSlug&&S.checkItemTrialDisabled(S.getAbsIndex(t))},isForbiddenProperty:function(e){return!(S.pref.buyer_validated||!t.isDomEl(e)||!e.hasClass("property-input")||!S.isProGroup(e))&&(e.val(""),alert(TvrLang.trial_notice),!0)},getAbsIndex:function(e,t){e=e||S.get_meta(t,"selector");let a=i.get_selector_data(e,"all-devices").data;return a?a.abs_index:S.totalSels},checkItemTrialDisabled:function(e,t){let a=!1,s="mt-trial-disabled";return!parseInt(S.pref.buyer_validated)&&e>=15?(a=!0,t&&(t.addClass(s),S.stat.inlineEditor.addClass(s))):t&&S.stat.inlineEditor.removeClass(s),a},adjust_mqs_for_unit:function(e){t.startT(arguments);var a=["min","max"];for(var s in e)if(e.hasOwnProperty(s))for(var r=0;r<a.length;++r){var o=a[r];e[s][o]=parseFloat(e[s][o]),e[s][o+"_unit"]&&"px"!=e[s][o+"_unit"]&&(e[s][o]=parseFloat(e[s][o])*S.baseFontSize)}return t.endT(arguments),e},maybe_pair_class:function(e,a){var s=t.get_pseudo_class(e);if(!s)return!1;var r=s[0];if(!S.get_pseudo_config(s)[r].strip)return!1;var o="mt-"+t.convert_to_param(r,"");if("class"==a)return o;if("selector"==a||"full"==a){var n=new RegExp(r+"(?!.*"+r+")"),i=e.replace(n,"."+o);return"selector"==a?i:e+", "+i}},get_pseudo_config:function(t){var a={};for(var s in t)t.hasOwnProperty(s)&&(a[t[s]]={});var r=["page_specific","pseudo_elements","pseudo_classes"];for(var o in r)if(r.hasOwnProperty(o)){var n=r[o];for(var i in S.cssFilters[n].items)if(S.cssFilters[n].items.hasOwnProperty(i)){var l=i.replace("::",":");if(a[i]||a[l]){var c=a[l]?l:i;a[c]=e.extend(!0,{},S.cssFilters[n].items[i]),a[c].pCE=i}}}return a},psuedo_is_set:function(){var e=S.stat.tvr.attr("class"),t=["pseudo_classes","page_specific","pseudo_elements"];for(var a in t)if(t.hasOwnProperty(a)&&e.indexOf(t[a])>-1)return!0;return!1},support_sampling:function(e,t){return(t.attr("name")||"").indexOf("[styles][html]")<0},get_property_tab_control:function(e){var a=e.replace(/_/g,"-");return t.checkObject(TvrMT.data.prog.lh,[a,"tab_control"])},pseudo_class_format:function(e){return"filter-"+e.replace(/[:\(\)]+/g,"")},get_pseudo:function(e,t){if("val"==e){var a=S.pseudo_class_format(t.pseudoCE);return S.stat.cssModifiers.find("ul.css-filter-list").find("li."+a).find("input").val()}},get_local_window_function:function(e,t){return r=TvrMT.detachedWin,s=window.TvrMT.MTdetached,!t&&g.detached_window_available(!0)&&!!r.MTlocal&&r.MTLocalFunctionsReady?r.MTlocal[e]:window.MTlocal[e]},keyboard_save_action:function(a,s){S.ua_detected(),S.draftSelector.ace.deferSave=!1;var r=parseInt(S.pref.show_code_editor)?"full":"inline",n="fullSCSSCompile"===s,i="manual"===s;o.get_focus_editor();if("inline"===r){if(S.selInFocusID){var l=e("#"+S.selInFocusID+"-code-code-css-"+S.get_mq_focus());if(t.isDomEl(l))return c.ajax_save_settings({$editor:S.stat.adaptableEditor,noSaveDelay:!n,manualSave:1,$property:l.find("textarea.property-input"),settings:n?{fullSCSSCompile:1}:{}}),a&&a.preventDefault(),!1;{var d={},_="All settings saved (Ctrl + S)";n&&(d.fullSCSSCompile=1,_="Full Sass compile (Ctrl + Alt + P)"),i&&(_="All settings saved");let e={noSaveDelay:!n,manualSave:1,settings:d=c.user_action(d,{items:[_],icon:"mtif-save"})},t=S.get_selector_in_focus(),a=t?t.selector.find("span.html-content-refresh"):null;a&&a.hasClass("tvr-pulse")&&(e.cbFunction=p.refreshPreview),c.ajax_save_settings(e)}}}else o.ace_instant_save(r,o.ace_sync_details.$textarea,S.stat.adaptableEditor,!n,n,i);a&&a.preventDefault()},keyPressDone:{},shortcutOnce:function(e){S.keyPressDone[e.action]||(e.item.apply(this,e.args),S.keyPressDone[e.action]=1)},setup_keyboard_shortcuts:function(s){var r,i,l;t.startT(arguments),function(e,t,a){function s(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent("on"+t,a)}function r(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return d[e.which]?d[e.which]:_[e.which]?_[e.which]:String.fromCharCode(e.which).toLowerCase()}function o(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function n(e,t){var a,s,r,n=[];for("+"===(a=e)?a=["+"]:a=(a=a.replace(/\+{2}/g,"+plus")).split("+"),r=0;r<a.length;++r)s=a[r],p[s]&&(s=p[s]),t&&"keypress"!=t&&u[s]&&(s=u[s],n.push("shift")),o(s)&&n.push(s);if(a=s,!(r=t)){if(!c)for(var i in c={},d)95<i&&112>i||d.hasOwnProperty(i)&&(c[d[i]]=i);r=c[a]?"keydown":"keypress"}return"keypress"==r&&n.length&&(r="keydown"),{key:s,modifiers:n,action:r}}function i(e,a){return null!==e&&e!==t&&(e===a||i(e.parentNode,a))}function l(e){function a(e){e=e||{};var t,a=!1;for(t in g)e[t]?a=!0:g[t]=0;a||(h=!1)}function i(e,t,a,s,r,n){var i,l,c=[],d=a.type;if(!p._callbacks[e])return[];for("keyup"==d&&o(e)&&(t=[e]),i=0;i<p._callbacks[e].length;++i)if(l=p._callbacks[e][i],(s||!l.seq||g[l.seq]==l.level)&&d==l.action){var _;(_="keypress"==d&&!a.metaKey&&!a.ctrlKey)||(_=l.modifiers,_=t.sort().join(",")===_.sort().join(",")),_&&(_=s&&l.seq==s&&l.level==n,(!s&&l.combo==r||_)&&p._callbacks[e].splice(i,1),c.push(l))}return c}function c(e,t,a,s){p.stopCallback(t,t.target||t.srcElement,a,s)||!1!==e(t,a)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function d(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=r(e);t&&("keyup"==e.type&&m===t?m=!1:p.handleKey(t,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e))}function _(e,t,s,o){function i(t){return function(){h=t,++g[e],clearTimeout(f),f=setTimeout(a,1e3)}}function l(t){c(s,t,e),"keyup"!==o&&(m=r(t)),setTimeout(a,10)}for(var d=g[e]=0;d<t.length;++d){var _=d+1===t.length?l:i(o||n(t[d+1]).action);u(t[d],_,o,e,d)}}function u(e,t,a,s,r){p._directMap[e+":"+a]=t;var o=(e=e.replace(/\s+/g," ")).split(" ");1<o.length?_(e,o,t,a):(a=n(e,a),p._callbacks[a.key]=p._callbacks[a.key]||[],i(a.key,a.modifiers,{type:a.action},s,e,r),p._callbacks[a.key][s?"unshift":"push"]({callback:t,modifiers:a.modifiers,action:a.action,seq:s,level:r,combo:e}))}var p=this;if(e=e||t,!(p instanceof l))return new l(e);p.target=e,p._callbacks={},p._directMap={};var f,g={},m=!1,v=!1,h=!1;p._handleKey=function(e,t,s){var r,n=i(e,t,s);t={};var l=0,d=!1;for(r=0;r<n.length;++r)n[r].seq&&(l=Math.max(l,n[r].level));for(r=0;r<n.length;++r)n[r].seq?n[r].level==l&&(d=!0,t[n[r].seq]=1,c(n[r].callback,s,n[r].combo,n[r].seq)):d||c(n[r].callback,s,n[r].combo);n="keypress"==s.type&&v,s.type!=h||o(e)||n||a(t),v=d&&"keydown"==s.type},p._bindMultiple=function(e,t,a){for(var s=0;s<e.length;++s)u(e[s],t,a)},s(e,"keypress",d),s(e,"keydown",d),s(e,"keyup",d)}if(e){var c,d={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},_={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},p={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};for(a=1;20>a;++a)d[111+a]="f"+a;for(a=0;9>=a;++a)d[a+96]=a;l.prototype.bind=function(e,t,a){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,a),this},l.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},l.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},l.prototype.reset=function(){return this._callbacks={},this._directMap={},this},l.prototype.stopCallback=function(e,t){return!(-1<(" "+t.className+" ").indexOf(" tvr-mousetrap ")||i(t,this.target))&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},l.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},l.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(d[t]=e[t]);c=null},l.init=function(){var e,a=l(t);for(e in a)"_"!==e.charAt(0)&&(l[e]=function(e){return function(){return a[e].apply(a,arguments)}}(e))},l.init(),e.TvrMousetrap=l,"undefined"!=typeof module&&module.exports&&(module.exports=l),"function"==typeof define&&define.amd&&define((function(){return l}))}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?s:null),r=TvrMousetrap,i={},l=r.prototype.stopCallback,r.prototype.stopCallback=function(e,t,a,s){return!!this.paused||!i[a]&&!i[s]&&l.call(this,e,t,a)},r.prototype.bindGlobal=function(e,t,a){if(this.bind(e,t,a),e instanceof Array)for(t=0;t<e.length;t++)i[e[t]]=!0;else i[e]=!0},r.init(),TvrMousetrap.bindGlobal(["alt"],(function(e){return!S.mouseWheelAltAction&&S.iframeEditing()&&a.hoveredElement&&S.shortcutOnce({action:"select_hovered_element",item:a.select_element,args:[a.hoveredElement,{e:e,scroll:!1}]}),!1}),"keypress"),TvrMousetrap.bindGlobal(["alt"],(function(e){return S.mouseWheelAltAction&&(S.mouseWheelAltAction=!1),!1}),"keyup"),TvrMousetrap.bindGlobal(["command+alt+b","ctrl+alt+b"],(function(e){return S.shortcutOnce({action:"toggle_builder",item:n.keyboard_toggle_builder}),!1}),"keypress"),TvrMousetrap.bindGlobal(["command+alt+c","ctrl+alt+c"],(function(e){return S.shortcutOnce({action:"show_code_editor",item:S.toggle_feature,args:[!1,"show_code_editor"]}),!1}),"keypress"),TvrMousetrap.bindGlobal(["command+alt+d","ctrl+alt+d"],(function(e){return S.shortcutOnce({action:"detach_preview",item:S.toggle_feature,args:[!1,"detach_preview"]}),!1}),"keypress"),TvrMousetrap.bindGlobal(["command+alt+g","ctrl+alt+g"],(function(e){return S.shortcutOnce({action:"view_generated_code",item:S.show_dialog,args:[S.stat.settingsMenu.find("li.item-display-css-code")]}),!1}),"keypress"),TvrMousetrap.bindGlobal(["command+alt+h","ctrl+alt+h"],(function(e){return S.shortcutOnce({action:"toggle_highlighting",item:function(){parseInt(S.pref.mt_highlight)?S.feature_off(0,"mt_highlight",{fHTML:1,noSave:1}):S.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"reg"})}}),!1}),"keydown"),TvrMousetrap.bindGlobal(["command+alt+j","ctrl+alt+j"],(function(e){return S.shortcutOnce({action:"toggle_inline_gui",item:S.toggle_inline_gui}),!1}),"keypress"),TvrMousetrap.bindGlobal(["command+alt+n","ctrl+alt+n"],(function(e){return S.shortcutOnce({action:"toggle_preview_page_menu",item:S.toggle_preview_page_menu,args:[S.stat.settingsMenu.find(".program-settings-tab-preview_page")]}),!1}),"keypress"),TvrMousetrap.bindGlobal(["command+alt+o","ctrl+alt+o"],(function(e){return S.shortcutOnce({action:"beautifyCode",item:function(){var e=o.eds["adaptable-editor"];e&&o.beautify_editor_content(e)}}),!1}),"keypress"),TvrMousetrap.bindGlobal(["command+alt+p","ctrl+alt+p"],(function(e){return S.shortcutOnce({action:"fullSCSSCompile",item:function(){S.close_dialog(),S.keyboard_save_action(e,"fullSCSSCompile")}}),!1}),"keypress"),TvrMousetrap.bindGlobal(["command+alt+r","ctrl+alt+r"],(function(e){return S.shortcutOnce({action:"editor_focus",item:function(){var e=o.eds["adaptable-editor"];e&&e.focus()},args:[]}),!1}),"keypress"),TvrMousetrap.bindGlobal(["command+s","ctrl+s"],(function(e){return S.shortcutOnce({action:"keyboard_save_action",item:S.keyboard_save_action,args:[e,"save"]}),!1})),TvrMousetrap.bindGlobal(["command+alt+t","ctrl+alt+t"],(function(e){return S.shortcutOnce({action:"hover_inspect",item:S.toggle_feature,args:[!1,"hover_inspect",{noSave:1}]}),!1}),"keypress"),TvrMousetrap.bindGlobal(["command+alt+,","ctrl+alt+,"],(function(t){return S.shortcutOnce({action:"nav_prev_item",item:S.quick_nav,args:[e("#vb-focus-prev")]}),!1}),"keypress"),TvrMousetrap.bindGlobal(["command+alt+.","ctrl+alt+."],(function(t){return S.shortcutOnce({action:"nav_next_item",item:S.quick_nav,args:[e("#vb-focus-next")]}),!1}),"keypress"),e(s).on("keydown",(function(a){if(38===a.which||40===a.which){var s=e(a.target);t.isDomEl(s)&&s.hasClass("mt-slider")&&!s.next(".combo-arrow").hasClass("on")&&m.increment_change(a,40===a.which)}})),e(s).on("keyup",(function(t){if(S.keyPressDone={},18===t.which)return t.preventDefault(),!1;if(13===t.which||27===t.which){var a=!(!t.target||!t.target.className)&&t.target.className;if(a){var s,r=t.target.id,o=e(t.target),n=13===t.which;o.closest("body").hasClass("tvr-visual")&&(a.indexOf("selector-css-textarea")>=0||a.indexOf("selector-name-input")>=0?(s=n?".tvr-button":".cancel",o.closest(".mt-folder-form").find(s).trigger("click")):a.indexOf("add-section-label-input")>=0||a.indexOf("edit-section-label-input")>=0?n?o.closest(".mt-folder-form").find(".tvr-button").trigger("click"):S.close_context_menu():"previewPath"===r&&n?o.closest(".tvr-input-wrap").find(".change-preview-url").trigger("click"):a.indexOf("new-item-input")>=0&&n?o.closest(".tvr-new-item").find(".new-item-add").trigger("click"):"sel-hierarchy-input"===r||"sec-hierarchy-input"===r?S.selectorLabelEditing?n?S.save_selector_label_edit():S.cancel_selector_label_edit():n?S.save_draft_selector(S.retargetSelector,!0):S.cancel_selector_label_edit(S.retargetSelector):"import_from_pack_name"===r||"export_pack_name"===r?(s=n?".dialog-button":".close-dialog",o.closest(".tvr-dialog").find(s).trigger("click")):"tvr-ai-prompt"!==r||t.shiftKey||(o.closest(".ai-prompt-form").find(".ai-send-prompt").trigger("click"),o.val(o.val().replace(/\n+$/,""))))}}})),t.endT(arguments)},toggle_main_menu:function(e){var a=!S.stat.mainMenu.hasClass("expanded"),s=e.data("trigger"),r=s===S.stat.mainMenu.data("trigger");if(!a&&r){if(S.hide_folders_or_settings("folders","left"),S.selInFocusID&&!S.search_filter){let e=S.get_selector_in_focus();S.scrollIntoView(S.folders_scrollable_area(),e.selectorM)}return!1}a&&S.show_folders_or_settings("folders","left"),S.search_filter||("all"===s?t.scroll_to({scrollDiv:S.folders_scrollable_area(),top:!0}):S.maybe_show_current_folder_item_view()),S.stat.mainMenu.data("trigger",s)},expand_interface_if_collapsed:function(){parseInt(S.pref.hide_interface)&&S.feature_off(!1,"hide_interface")},show_folders_or_settings:function(t,a){if(S.expand_interface_if_collapsed(),"settings"===t||"ai"===t){var s=e("#program-settings-icon"),r=e("#mt-ai-assistant");"ai"===t&&s.hasClass("on")&&S.hide_folders_or_settings("settings","right"),"settings"===t&&r.hasClass("on")&&S.hide_folders_or_settings("ai","right")}var o=g.get_sidebar_container(t,!1,a);o.$el.addClass("expanded on"),o.$toggle.addClass("on"),S.stat.tvr.addClass("mt-"+t+"-showing"),"folders"===t&&!parseInt(S.pref.dock_folders_left)||g.update_sidebar_z_indexes(t,a)},hide_folders_or_settings:function(e,t,a){MTlocal.clean_tooltips();var s=g.get_sidebar_container(e,!1,t),r=s.$toggle;if(s.$otherToggle&&(r=r.add(s.$otherToggle)),s.$el.removeClass("expanded on"),r.removeClass("on"),S.stat.tvr.removeClass("mt-"+e+"-showing"),!a){var o=g.return_another_panel_to_top(e,t);o&&o!==e?g.update_sidebar_z_indexes(o,t):s.$el.removeClass("mt-top-panel")}},close_all_expanded:function(a){t.startT(arguments);for(var r=a.data("forpopup"),o=g.detached_window_available(!0),n={contextMenu:{name:"contextMenu",$el:S.stat.contextMenu,run:S.close_context_menu},contextMenuDetached:{name:"contextMenu",$el:!!o&&s.getLocalContextMenuEl(),run:!!o&&s.close_context_menu},folders:{name:"folders",$el:S.stat.mainMenu,run:S.hide_folders_or_settings,args:["folders","left"],closeException:function(e){return"mymtonoffswitch-dock_folders_left"===e.attr("id")||"folders"===S.stat.contextMenu.data("relatedto")}},settingsMenu:{name:"settingsMenu",$el:S.stat.settingsMenu,run:S.hide_folders_or_settings,args:["settings","right"],closeException:function(e){return!!S.doNotCloseSettingsMenu&&(S.doNotCloseSettingsMenu=!1,!0)}},aiAssistant:{name:"aiAssistant",$el:S.stat.aiAssistant,run:S.hide_folders_or_settings,args:["ai","right"],closeException:function(e){return!!S.doNotCloseSettingsMenu&&(S.doNotCloseSettingsMenu=!1,!0)}},picker:{name:"picker",$el:S.stat.styleComponents.find(".sp-container"),run:S.picker_method,args:["hide"]},units:{name:"units",$el:m.stat.cssUnitMenu,run:m.hide_unit_menu,args:[]},phpSyntax:{name:"phpSyntax",$el:S.stat.phpSyntax,run:u.hide_popdown_content,args:[S.stat.phpSyntax]},logicAnalysis:{name:"logicAnalysis",$el:S.stat.logicAnalysis,run:u.hide_popdown_content,args:[S.stat.logicAnalysis]}},i=Object.keys(n),l=0;l<i.length;l++){var c=n[i[l]],d=c.name,_=c.$el;!(t.isDomEl(_)&&_.hasClass("expanded"))||c.closeException&&c.closeException(a)||r===d||e.contains(_[0],a[0])||_[0].isSameNode(a[0])||t.isDomEl(a.closest(".ui-autocomplete"))||c.run.apply(this,c.args||[])}(a.hasClass("grid-control")||a.hasClass("pg-icon-grid"))&&m.hide_slider_set(),t.endT(arguments)},close_tooltip:function(e,t){e.attr("title",t.text()).removeAttr("aria-describedby"),t.remove()},reset_global_vars:function(){t.startT(arguments),S.selInFocusID="",S.menuSelInFocusID="",S.curSelCSS="#mt-no-element",S.intelli_css="#mt-no-element",t.endT(arguments)},update_global_vars:function(e,s){t.startT(arguments),S.prevSelInFocusID=S.selInFocusID,S.selInFocusID=e.selectorID,S.prevSelInFocusID&&S.prevSelInFocusID!==S.selInFocusID&&(S.selInFocusIDChanged=1),S.menuSelInFocusID=S.selInFocusID.replace("opts","strk"),S.curSelCSS=t.custom_escape_quotes(e.selectorCode),S.curSec=e.sectionSlug,u.updatePrevFolder(e.sectionSlug),S.previous_selector=e.selectorCode,S.curSelEls=S.iframeEditing()?a.jquery_compat_sel_elements(S.curSelCSS):{},S.retargetSelector||S.draftSelector.atts.id||S.save_last_viewed_selector(S.selInFocusID),S.update_current_selector_controls(e,!1,s),S.update_cur_item_apply_state(e,"both"),t.endT(arguments)},prepareDisabledOrNotLoadingWarning:function(e){var t=S.is_cur("section",e.sectionSlug);if(!S.folderLoadingWarningDone&&t&&u.folderNotLoading(e.sectionSlug))c.log({short:TvrLang.folder_not_loading,long:"<p>"+TvrLang.folder_not_loading_long+'. <span class="link view-current-folder-options">View folder options</span></p><p><b>Help videos:</b></p><ul><li><a target="_blank" href="https://themeover.com/automatic-page-speed-optimisation/">Automatic page speed</a></li><li><a target="_blank" href="https://themeover.com/load-wordpress-css-on-specific-pages/">Customing folder conditions</a></li></ul>',type:"warning"}),S.folderLoadingWarningDone=!0;else{var a=[],s=-1;for(var s in t&&S.is_dis(e.sectionM)&&(a[++s]=TvrLang.folder_disabled),S.is_cur("selector",e.selectorID)&&S.is_dis(e.selectorM)&&(a[++s]=TvrLang.selector_disabled),a)if(a.hasOwnProperty(s)){var r={short:a[s],long:"<p>"+TvrLang.enable_with_icon+"</p>",type:"warning"};c.log(r),S.folderDisabledWarningDone=!0}}},update_cur_item_apply_state:function(e,t){if(!e)return!1;if(("section"===t||"both"===t)&&S.is_cur("section",e.sectionSlug)){var a=S.is_dis(e.sectionM),s=u.folderNotLoading(e.sectionSlug),r=!u.folderIsEffectivelyGlobal(e.sectionSlug),o=(S.stat.curSecTrailText.hasClass("item-disabled"),""),n="";a?o+=" item-disabled":n+=" item-disabled",r?o+=" item-conditional":n+=" item-conditional",s?o+=" item-not-loading":n+=" item-not-loading",o&&S.stat.curSecTrailText.addClass(o),n&&S.stat.curSecTrailText.removeClass(n)}if(e.selectorM&&("selector"===t||"both"===t)&&S.is_cur("selector",e.selectorID)&&e.selectorM){var i=S.is_dis(e.selectorM),l=S.stat.curSelInput.hasClass("item-disabled");i&&!l?S.stat.curSelInput.addClass("item-disabled"):!i&&l&&S.stat.curSelInput.removeClass("item-disabled")}},save_last_viewed_selector:function(e){t.updateObject(S.uiData,["non_section","meta","last_viewed_selector"],e),S.dontLogSelectorChange||c.silent_save("",[{trail:["non_section","meta","last_viewed_selector"],action:"replace",data:e}])},menu_object:function(t){return e("#"+t.replace("opts","strk"))},section_slug:function(e){if(!e)return!1;let t=e.match(/(?:strk|opts)-([^-]+)-/);return!!t&&t[1]},is_cur:function(e,a){if(t.hasValue(S.selInFocusID)){if("section"==e){if(a==S.section_slug(S.selInFocusID))return!0}else if("selector"==e&&a==S.selInFocusID)return!0;return!1}},viewCurrentFolderLoading:function(){var e=S.stat.mainMenuInner.find("li.section-tag.in-focus");e.length&&S.toggle_folder_more_options(e.find(".toggle-folder-more-options"))},is_dis:function(e){return e.hasClass("item-disabled")},sel_trail:function(e){var a=/\s?>\s?|\s?\+(?![^(]*\))\s?|\s?~\s?|\s/g,s=t.get_all_matches(e,a,0);return{pieces:e.split(a),splitMatches:s}},load_css_ref:function(e){t.startT(arguments),S.show_dialog(e),t.endT(arguments)},show_google_fonts_field:function(e){e.is(":visible")?S.show_dialog(e.find(".g-font")):(e.removeClass("hidden"),S.adjust_scroll_buttons(S.get_pg_meta(),"style"))},hide_google_fonts_field:function(e,t){S.gFontTarget.val("").prop("val",""),t.addClass("hidden"),S.adjust_scroll_buttons(S.get_pg_meta(),"style")},insert_google_font:function(e){S.close_dialog(),S.gFontTarget.val(e).focus(),S.post_edit(S.gFontTarget),c.ajax_save_settings({$property:S.gFontTarget})},mediaFrame:null,mediaFrameCustomised:!1,launch_img_uploader:function(t){S.mediaFrame||(S.mediaFrame=wp.media({title:"Select or Upload Media",button:{text:"Insert Image"},multiple:!1}),S.mediaFrame.on("open",(function(){if(!S.mediaFrameCustomised){let t=["thumbnail","medium","large","full"],a=e("<div>",{class:"custom-size-menu",css:{transform:"translateY(-2px)"}}),s=e("<select>",{id:"tvr-image-size-select"});t.forEach((function(t){let a=t.charAt(0).toUpperCase()+t.slice(1);"Full"===a&&(a+=" size"),s.append(e("<option>",{selected:"full"===t,value:t,text:a}))})),a.append(s),e(".media-toolbar-primary").last().css({display:"grid",gridAutoFlow:"column",placeItems:"baseline"}).prepend(a),S.mediaFrameCustomised=!0}})),S.mediaFrame.on("select",(function(){const a=S.mediaFrame.state().get("selection").first().toJSON(),s=e("#tvr-image-size-select").val(),r=s&&a.sizes&&a.sizes[s]?a.sizes[s].url:a.sizes.full?a.sizes.full.url:a.url;S.update_bg_image(t,r)}))),S.mediaFrame.open()},update_bg_image:function(e,a){var s=S.get_meta(e,"property").property.find(".property-input");a='url("'+(a=t.root_rel_if_local(a,!0))+'")',s.val(a),S.adjust_comp_span(s,"after"),t.scroll_input_end(s),c.ajax_save_settings({$property:s})},clear_bg_image:function(e){t.startT(arguments),S.update_bg_image(e,""),t.endT(arguments)},get_animation_name:function(e){return e.groupTab.find("input.property-input").val()},refresh_event_binding:function(){S.iframeEditing()&&a.stat.win.MT_Events_Manager&&a.stat.win.MT_Events_Manager.refresh_event_binding()},user_play:function(e,t,s,r){var o=e.animationConfig;S.iframeEditing()&&o.flashCSSRules&&o.animationName&&a.trigger_animation(o,r)},mt_scroll:{style:{offsets:[],rightPositions:[],rightPosIndex:-1},responsive:{offsets:[],rightPositions:[],rightPosIndex:-1},gridcolumns:{offsets:[],rightPositions:[],rightPosIndex:-1},gridrows:{offsets:[],rightPositions:[],rightPosIndex:-1}},scroll_row:function(e){var a,s,r=e.data("type");if("style"===r||"gridcolumns"===r||"gridrows"===r){var o=S.get_pg_meta();if(!o)return!1;"style"===r?(a=o.groupTab,s=o.groupTab.find(".pg-inner")):s=(a=o.group.find(".tab-control-"+S.pref.grid_focus+"."+r).find(".mt-variable-line")).find(".mt-vl-inner")}else"responsive"===r&&(a=S.stat.res.find(".query-tabs-wrap"),s=S.stat.res.find(".query-tabs"));if(s){var n=S.get_row_excess(a,s,r);if(!n)return!1;var i,l=a.width(),c=Math.abs(parseInt(s.css("marginLeft")));if(e.hasClass("mt-scroll-left"))i=S.mt_scroll[r].rightPositions[S.mt_scroll[r].rightPosIndex-1],t.isDefined(i)?(S.mt_scroll[r].rightPositions.splice(S.mt_scroll[r].rightPosIndex,1),S.mt_scroll[r].rightPosIndex--):(i=0,S.mt_scroll[r].rightPositions=[],S.mt_scroll[r].rightPosIndex=-1);else{for(var d=c+l,_=n<d?n:d,u=S.mt_scroll[r].offsets,p=0;p<u.length;p++){if(u[p]>_){var f=u[p-1],g=u[p];_=f>c&&g>d?f:g;break}}if(c===_)return!1;S.mt_scroll[r].rightPositions.push(_),S.mt_scroll[r].rightPosIndex++,i=_}i*=-1,s.css("marginLeft",i+"px")}},adjust_scroll_buttons:function(e,a){if(t.startT(arguments),!e&&"responsive"!==a)return!1;var s,r,o,n,i=!1,l=!1;switch(a){case"style":r=(s=S.get_group(e)).find(".pg-inner"),o=e.selector.find("li.scroll-lr-buttons-"+a),i="code"===e.groupSlug||"grid"===e.groupSlug,l="grid"===e.groupSlug;break;case"responsive":s=S.stat.res.find(".query-tabs-wrap"),r=S.stat.res.find(".query-tabs"),o=S.stat.res.find("div.scroll-lr-buttons");break;case"gridcolumns":case"gridrows":r=(s=e.group.find(".tab-control-"+S.pref.grid_focus+"."+a).find(".mt-variable-line")).find(".mt-vl-inner"),o=e.selector.find("li.scroll-lr-buttons-"+a)}if(!r)return!1;n=S.get_row_excess(s,r,a,"checkShow"),s.removeClass("pending-overflow-check"),n&&!i?(o.addClass("buttons-showing"),s.addClass("hor-scroll-needed"),S.mt_scroll[a].rightPositions=[]):(S.mt_scroll[a].rightPositions=[],S.mt_scroll[a].rightPosIndex=-1,r.css("marginLeft","0px"),o.removeClass("buttons-showing"),s.removeClass("hor-scroll-needed")),l&&S.adjust_grid_line_scroll_buttons(e),t.endT(arguments)},adjust_grid_line_scroll_buttons:function(e){S.adjust_scroll_buttons(e,"gridcolumns"),S.adjust_scroll_buttons(e,"gridrows")},get_row_excess:function(a,s,r,o){t.startT(arguments);var n,i=a.width(),l=0,c=[],d=a.hasClass("property-html"),_=a.hasClass("property-grid");return(_?s.children().filter(".tab-control-"+S.pref.grid_focus):s.children()).each((function(t){if(!d||t<3){var a=e(this);a.is(":visible")&&parseInt(a.css("opacity"))&&(l+=a.outerWidth(!0),c.push(l))}})),(a.hasClass("property-border")||_)&&(l/=2),l-i>1&&(l+=50),n=l-i,S.mt_scroll[r].offsets=c,t.endT(arguments),n>1&&n},input_icon_toggle:function(a,s,r){t.startT(arguments);var n,i,d,_=a,u=a.attr("data-input-type"),p=a.attr("data-input-level"),f="pgtab"===p?"group":p,m=S.title(a),v=a.hasClass("active")?"":1,h=!1,b=u+"-tracker",y=!1,T={domDepth:p,maxDepth:"selector",clean:{},cleanMaxDepth:"selector"},x=!1,w="disabled"===u&&"tab"===p?S.context_menu_data.mq_key:S.get_mq_focus(),k=S.get_input_stems(w),C=k.mq,M=k.imp;if("important"===u){d="tvr_mcth[non_section][important]"+M+"["+(i=S.get_meta(a,"property")).sectionSlug+"]["+i.selectorSlug+"]["+i.groupSlug+"]["+i.propertySlug+"]";var j=t.get_name_attr_index(i.property.find("input.property-input").attr("name"));!1!==j&&(d+="["+j+"]"),T.mq_key=w,T.recurse_key=["important"],T.clean.selector=[],y=!0}else if("disabled"===u){if(y=!0,T.itemWasDisabled=p,!(i=S.get_meta_for_context(a,f)))return;if("section"===p)d=(H=S.disabled_quick_edit(i.sectionM,p,i)).find("input.section-data-label").attr("name").replace("[label]","["+u+"]");else if("selector"===p)d=(H=S.disabled_quick_edit(i.selectorM,p,i)).find("input.selector-label").attr("name").replace(/\[label\]$/,"["+u+"]"),T.clean.selector=[[u]],S.maybe_save_draft_selector_before_action(i,"selector","disable");else if("tab"===p)H=S.stat.res.find(".mq-tab-"+w),b+="-"+w,d=C+"["+i.sectionSlug+"]["+i.selectorSlug+"][tab]["+u+"]",_=i.selectorM.find("span.disabled-responsive-tabs"),T.domDepth="selector",T.mq_key=w,T.onlyRecurse="all-devices"!==w,T.incRecurse=T.onlyRecurse,T.recurse_key=["m_query"],T.clean.selector=[["tab"],[u]];else if("subgroup"===p||"pgtab"===p){H=a.closest("span.quick-opts-wrap");var D="pgtab"===p,I=!!D&&a.data("tab-group"),O=D?"pgtab_"+u:"pg_"+u,E=D?a.data("tab-group"):i.subgroupSlug;d=C+"["+i.sectionSlug+"]["+i.selectorSlug+"]["+O+"]["+E+"]",T.domDepth="group",T.mq_key=w,T.onlyRecurse="all-devices"!==w,T.incRecurse=T.onlyRecurse,T.recurse_key=["m_query"],T.clean.selector=[[O],[E]],!1!==(h=S.maybe_add_nth_index_filter(D,I,i,a,T.clean.selector))&&(d+="["+h+"]"),D&&(p="group")}else"script"===p&&(H=a.closest("div.item-row"),d="tvr_preferences[enq_js]["+t.convert_to_param(H.find(".script-name").text(),"")+"][disabled]")}else if("chained"===u){if(y=!0,i=S.get_meta(a,"subgroup"),v){var P,F,L=S.get_subgroup_or_tabgroup(i,"inputs"),A=!!t.isDomEl(S.inputWaitingObj)&&S.inputWaitingObj,q=A?A.val():"",R=t.isDefined(q);if(e.fn.MTreverse=[].reverse,L.MTreverse().each((function(a){var s=e(this),r=s.val();R&&s.attr("name")===A.attr("name")&&(F=A),t.isDefined(r)&&(P=s)})),P){var N=void 0,$=(F=F||P).closest(".property-tag").find(".css_unit-tracker");t.isDomEl($)&&(N=F.closest(".property-tag").find(".css_unit-tracker").val()),S.sync_fields(F,i,N)}}d=C+"["+i.sectionSlug+"]["+i.selectorSlug+"][pg_"+u+"]["+i.subgroupSlug+"]",T.domDepth="group",T.mq_key=w,T.recurse_key=["m_query"],T.clean.selector=[["pg_"+u],[i.subgroupSlug]]}else if("flexitem"===u||"griditem"===u){var H=a.closest("div.property-fields");x=!0;var U="tvr_mcth["+(i=S.get_meta(H.find("div.sub-label"),"group")).sectionSlug+"]["+i.selectorSlug+"]";if(d=U+"[pg_"+u+"]",T.domDepth="group",T.mq_key=w,T.recurse_key=["m_query"],T.clean.selector=[["pg_"+u]],"griditem"===u){var V={};l.fill_object_from_name(V,d,v);var z=v?0:1;return l.fill_object_from_name(V,U+"[nth_item]",z),c.quick_save_data(!1,V),"griditems"!==S.get_grid_focus()&&(S.pref.grid_focus="griditems"),S.trigger_pg_icon_click("grid"),!1}}if(v){var W='<input class="input-toggle-tracker '+b+'" type="hidden" name="'+d+'" value="1" />';a.addClass("active");var G="add";a.attr("data-neg");"disabled"===u&&"tab"===p?_.append(W):_.before(W),"disabled"===u&&(H.addClass("item-disabled"),S.update_cur_item_apply_state(i,p)),"flexitem"!==u&&"griditem"!==u||H.add(S.stat.grid).addClass("show-single-"+u)}else{a.removeClass("active");G="remove",a.attr("data-pos");(n=_.siblings("."+b)).val(""),"disabled"===u&&(H.removeClass("item-disabled"),S.update_cur_item_apply_state(i,p)),"flexitem"!==u&&"griditem"!==u||H.add(S.stat.grid).removeClass("show-single-"+u)}c.h_i_class(p,i);var B=a.attr("class"),K=!1;if("important"===u&&(B+=" lg-icon",(K=!!S.chain_is_on(i)&&i.subgroupH+" "+TvrLang.fields_sync)&&!s&&S.sync_important(i,G)),r||(T.M=i,"chained"!==u&&(T.mtData={},l.fill_object_from_name(T.mtData,d,v)),"script"===p?e.extend(!0,S.pref,T.mtData):(s&&(T.return="mtData"),T=l.dom_to_data(T))),v||n.remove(),!r&&!s){x||(T=c.user_action(T,{items:[p],val:m,valTT:K,M:i,pathTT:!0,icon:B})),y&&g.editor_and_gui()&&i&&i.selector&&o.gui_to_editor(!1,i);var J={settings:T};c.ajax_save_settings(J)}t.endT(arguments)},get_input_stems:function(e){var t="tvr_mcth",a="";return"all-devices"!==e&&(t+="[non_section][m_query]["+e+"]",a="[m_query]["+e+"]"),{mq:t,imp:a}},maybe_add_nth_index_filter:function(e,a,s,r,o){var n=e?s.group.find(".property-tag.tab-control-"+a).first():r.closest(".subgroup-tag").next(".property-tag");if(n.hasClass("has-variable-line"))return!1;var i=n.find("input.property-input"),l=!!t.isDomEl(i)&&t.get_name_attr_index(i.attr("name"));return!1!==l&&o.push(["value"],[l]),l},disabled_quick_edit:function(e,t,a){return"section"===t&&S.is_cur("section",a.sectionSlug)&&(e=e.add(S.stat.curSecTrailText)),"selector"===t&&S.is_cur("selector",a.selectorID)&&(e=e.add("#sel-in-focus")),e},tt_config:function(a){return{position:{my:"center top",at:"center bottom+10",collision:"flipfit"},hide:!1,show:{effect:"none",duration:0,delay:S.tooltipDelay},create:function(e,t){},open:function(s,r){t.startT(arguments),S.itemIsBeingDragged&&MTlocal.clean_tooltips();var o=S.get_tt(r),n=a.get_tt_trigger(s,this),i=n.data("dyn-tt-root"),l=!!i&&e("#"+i);if(o.data("mt-tt-trigger",i?l:n),i){var c=l.hasClass("on")?l.data("neg"):l.data("pos");c||(c=l.attr("title")),o.html(c)}var d=o.find(".ui-tooltip-content").html();d&&(d=t.regular_escaped_to_non_escaped(d.replace(/&amp;/g,"&").replace(/\n/g,"<br />")),o.html(d));var _=o.parent();if(t.isDomEl(_)&&"body"!==_[0].tagName.toLowerCase()){var u=n.offset();o.appendTo("body"),o.css({top:u.top+40+"px",left:u.left-40+"px"})}t.endT(arguments)},close:function(e,t){S.tt=!1,S.tt_trigger={}}}},title:function(e){var t=e.data("ui-tooltip-title");return t||e.attr("title")},get_tt:function(e){return S.tt=e.tooltip},refresh_tt:function(a,s,r){t.startT(arguments),a.each((function(t){var a=e(this);"native"==S.tooltipDelay||!S.tt||r&&!a.is(r)?(a.attr("title",s),r&&r.data("dyn-tt-root")&&S.update_tt(S.tt,s,a)):S.update_tt(S.tt,s,a)})),t.endT(arguments)},update_tt:function(e,a,s){if(!(t.isDomEl(e)&&t.isDomEl(s)&&e.data("mt-tt-trigger")&&e.data("mt-tt-trigger").is(s)))return!1;var r=e.find(".ui-tooltip-content");(r=t.isDomEl(r)?r:e).html(a.replace("\n","<br />")),S.tt_trigger.data("ui-tooltip-title",a)},parse_editor_selectors:function(e){var t={},a=0,s=parseInt(S.pref.allow_scss)?"scss":"css";if(e){var r=S.parse_scss_or_css(e,s);if(!r)return!1;r.forEach("ruleset",(function(e){var s,r=e.content;++a;for(var o=0;o<r.length;o++){var n=r[o];"block"===n.type?r.splice(o,1):"selector"===n.type&&n}s=e.end.line-1;var i=e.toString().trim();if(i.match(/\*/)){for(var l=i.split(","),c=l.length-1;c>=0;c--){"*"===l[c].trim()&&l.splice(c,1)}i=l.join(",")}i&&(t["hand_coded_css-"+a]={type:"hand_coded_css",sName:i,code:i,line:s})}))}return t},get_all_selector_code:function(a,s,r,o){t.startT(arguments);let n="",i={};if(r){let e=S.uiData.non_section.hand_coded_css;e&&(n+=e)}else{var l=t.checkObject(S.uiData.non_section,["meta","fullCodeSelectors"]);i=l?e.extend(!0,{},l):{}}for(var c in S.uiData){if(!S.uiData.hasOwnProperty(c))continue;let e=S.uiData[c];if(!("non_section"===c||s&&(u.folderNotLoading(c)||e.this&&e.this.disabled))&&S.uiData.hasOwnProperty(c))for(var d in e){if(!S.uiData[c].hasOwnProperty(d))continue;let e=S.uiData[c][d];if(!("this"===d||!e||c+"_"+d===S.ignoreSelector||s&&e.disabled)&&(e&&e.label&&(!a||!e.isDraft&&!e.isDraftRetarget))){var _=e.label.split("|");if(r){let e=_[1];if(o){let t=e.split(/\s+/).reverse()[0],a=t[0];t&&"."!==a&&"#"!==a&&(e=null)}e&&(n+="|"+e)}else i["strk-"+c+"-"+d]={fName:S.uiData[c].this.label,sName:_[0],code:_[1]}}}}return t.endT(arguments),r?n:i},get_dom_item:function(a,s,r,o,n,i){var l,c,d,_=n?e.extend(!0,{},a,n):a,u="menu"===r?"strk":"opts";switch(s){case"section":case"selector":case"group":l=_.trail.item;break;case"subgroup":case"property":var p=t.prop_to_cssf(a.property_key),f=t.checkObject(TvrMT.data.prog.lh,[p,"sub_slug"]),g="subgroup"===s?"subgroup":a.property_key;if("animation"===a.group_key&&(f="animation"),!f)return!1;l=_.trail.root_to_group.concat([f,g,a.recurse.mq_key])}return c="#"+u+"-"+l.join("-"),d=i?i.find(c):e(c),!!t.isDomEl(d)&&(o?{$item:d,id:c,M:S.get_meta(d,s)}:d)},get_selector_in_focus:function(){if(S.selInFocusID){let a=e("#"+S.selInFocusID);if(t.isDomEl(a,!0))return S.get_meta(a,"selector")}return!1},get_context_from_container:function(e){return e.parent().data("context")},get_meta_for_context:function(e,t,a){switch(a=a||S.get_context_from_container(e)){case void 0:case"folders-menu":return S.get_meta(e,t);case"popup-form":case"folder-popup":return S.context_menu_data.M;case"current-item":return S.get_selector_in_focus()}return!1},get_meta:function(a,s){t.startT(arguments),S.meta={};var r=["stub","section","selector","group","subgroup","property"];for(var o in r)if(r.hasOwnProperty(o)&&r[o]==s){if(a.attr("class")&&a.attr("class").indexOf(s+"-tag")>=0)var n=a;else n=a.closest("."+s+"-tag");var i=n.attr("id").split("-")}var l="";for(var c in i)if(i.hasOwnProperty(c)&&0!=c&&6!=c&&7!=c){if(s=r[c],l+="-"+i[c],"property"==s||"subgroup"==s){var d=l,_="property"==s?d+"-"+i[6]:d+"-subgroup-"+i[6];"all"==i[6]&&(i[6]+="-devices",_+="-devices"),S.meta.tabSlug=i[6],S.meta[s]=e("#opts"+_),S.meta.pgTabControlSlug=S.meta[s].data("pgtabcontol")}else S.meta[s]=e("#opts"+l);var u=i[c];if(S.meta[s+"Slug"]=u,"section"==s)S.meta[s+"M"]=e("#strk"+l),S.meta[s+"H"]=S.meta.sectionM.find(".section-data-label").val(),S.meta[s+"ID"]="opts-"+S.meta.sectionSlug,S.meta[s+"MID"]="strk-"+S.meta.sectionSlug;else if("selector"==s){S.meta[s+"M"]=e("#strk"+l);var p=S.meta.selectorM.find(".selector-label").val().split("|");S.meta[s+"H"]=p[0],S.meta[s+"Code"]=p[1],S.meta[s+"ID"]="opts-"+S.meta.sectionSlug+"-"+S.meta.selectorSlug,S.meta[s+"MID"]="strk-"+S.meta.sectionSlug+"-"+S.meta.selectorSlug}else if("group"==s){S.meta[s+"ID"]="opts-"+S.meta.sectionSlug+"-"+S.meta.selectorSlug+"-"+S.meta.groupSlug;var f=S.get_mq_focus();S.meta[s+"Tab"]=S.meta[s].find("div.property-fields-"+f),"html"===S.meta.groupSlug&&(S.meta.groupIndex=S.getGroupIndex(S.meta.sectionSlug,S.meta.selectorSlug,S.meta.groupSlug)),S.meta[s+"H"]=S.stat.css_icons.find("ul.styling-option-icons").find(".pg-icon-"+S.meta.groupSlug).attr("title"),"animation"==u||"transition"==u?(S.meta.event=S.meta[s+"Tab"].find("input.mt-event-input").first().val(),S.meta.eventKey=S.meta.event?t.convert_to_param(S.meta.event,""):"",S.meta.eventValue=S.meta[s+"Tab"].find("input.mt-event-value-input").first().val()):S.meta.event=S.meta.eventKey=S.meta.eventValue=""}else"subgroup"==s||"property"==s&&(S.meta.subgroupH=S.meta.subgroup.find("span.subgroup-label").text(),S.meta[s+"H"]=S.meta[s].find("span.option-label").text())}return S.meta.tabSlug||(S.meta.tabSlug=S.get_mq_focus()),S.meta.tabH=S.get_tab_name(S.meta.tabSlug),t.endT(arguments),S.meta},getLastMultiTab:function(e){return S.pref.lastMultiTab[e]||{index:0,action:"replace",aspect:"text"}},getGroupIndex:function(e,t,a,s){let r=S.pref.lastMultiTab[a];return r&&r.index?parseInt(r.index):0},get_pg_meta:function(a){if(!S.selInFocusID||!S.pref.pg_focus)return!1;var s=e("#"+S.selInFocusID);if(!t.isDomEl(s,!0))return!1;var r=a?s.find("li.group-tag-"+S.pref.pg_focus).find("group-row-"+a):s.find("li.group-tag-"+S.pref.pg_focus);return!!t.isDomEl(r,!0)&&S.get_meta(r,"group")},setColorOnHide:"",colorpicker_bind:function(a,s){if(t.startT(arguments),a.length<2&&S.checkItemTrialDisabled(S.getAbsIndex(!1,a)))return!1;e("<div></div>");var r=!1,o=s?a:a.find("input.color:not(.bound)");o.each((function(){r=!0;var a=e(this),s=a.closest(".property-tag").attr("id");a.mtspectrum({appendTo:S.stat.styleComponents,belongsTo:s,containerClassName:"picker-belongs-to-"+s,showAlpha:!0,showInput:!1,allowEmpty:!0,showInitial:!0,preferredFormat:"rgb",showButtons:!1,showSelectionPalette:!0,localStorageKey:"shared_palette",maxSelectionSize:9,hide:function(e){S.setColorOnHide&&(a.val(S.setColorOnHide),S.setColorOnHide=""),S.$pickerContainer.draggable("destroy"),S.$pickerContainer.removeClass("expanded")},show:function(a){t.startT(arguments);var s=S.inputWaitingObj=e(this),r=S.get_meta(s,"property"),o=".picker-belongs-to-"+r.property.attr("id"),n=S.$pickerContainer=S.stat.styleComponents.find(o);n.hasClass("ui-draggable")||n.draggable({cancel:".combo-arrow, input, .palette-tile, .sp-palette-row-initial, .ui-menu, .palette-button, .refresh-icon, .sp-alpha, .sp-alpha-inner, .sp-alpha-handle"}),n.hasClass("extra-fields-added")||(n.addClass("extra-fields-added").find(".sp-mt-inputs").prepend('<input type="number" min="0" max="1" step="0.1" class="sp-input-opacity sp-input">'),n.find(".sp-clear").on("click.mt",(function(e){S.clear_spectrum_inputs(r,!0)}))),n.addClass("expanded").data("popupName","picker"),S.draw_palette(n);var i,l=n.css(["top","left"]),c=parseInt(l.top),d=parseInt(l.left);if(i=S.pref.dock_styles_left?{top:c+10+"px",left:"0px"}:{top:"-1px",left:d+40+"px"},n.css(i),s.val())S.maybe_set_variable_color(s.val(),s,n.find(".sp-input-var"))||S.update_spectrum_inputs(a,s,{},!0);else{var _=r.property.find("span.comp-style").find("span").attr("style");if(_){var u=_.split("background-color:");"transparent"!=u[1]&&"rgba(0, 0, 0, 0)"!=u[1]||(u[1]="rgba(0, 0, 0, 1)"),S.update_spectrum(u[1],s,{},!0,!0),s.val(""),r.property.find(".sp-preview-inner").css("background-color","transparent").addClass("sp-clear-display")}}t.endT(arguments)},move:function(a){S.color_tile_selected&&t.isDomEl(S.color_tile_selected,!0)&&(S.color_tile_selected.removeClass("tile-selected"),S.color_tile_selected=!1,S.$palette.find(".mt-save-color").addClass("show"),S.$palette.find(".mt-remove-color").removeClass("show")),S.update_spectrum_inputs(a,e(this),{},!0),S.set_input_timer(10)}}).on("dragstart.spectrum",(function(e,t){S.colorPickerDragging=!0,S.get_local_window_function("maybe_hide_mt_highlight")()})).on("dragstop.spectrum",(function(e,t){S.colorPickerDragging=!1,S.get_local_window_function("maybe_reinstate_mt_highlight")()})).addClass("bound")})),r&&s&&o.mtspectrum("show"),t.endT(arguments)},format_autocomplete_id:function(e,t){var a=e.closest(".property-tag"),s=a.attr("id"),r=t+"-belongs-to-"+s,o=a.hasClass("tab-control-gridtemplate"),n=a.hasClass("tab-control-gridauto");if(o||n){r+="-input-nth-index-"+(e.closest(".tvr-input-wrap").index()+1),o&&(r+="-input-filter-"+e.closest(".vl-item").data("input-filter"))}return{containerID:r,fieldID:s}},get_related_meta:function(t,a,s){var r,o,n,i,l,c,d=t+"-belongs-to",_="picker"===t?"sp-container":"ui-autocomplete";if(!s&&a.hasClass(_)){r=a.data(d),o=a.attr("id"),n=a,s=S.get_meta(e("#"+r),"property"),c=".tvr-input-wrap";var u=o.split(/(?:-input-nth-index-|-input-filter-)/g);u[1]&&(c+=":nth-child("+u[1]+")"),u[2]&&(c+=" ."+u[2]),i=s.property.find(c).find("input.property-input"),"combo"===t&&n.siblings(".sp-input-var").length&&(l=n.siblings(".sp-input-var"))}else{s=s||S.get_meta(a,"property"),i="picker"===t?s.property.find("input.property-input"):a.parent().find("input.property-input");var p=S.format_autocomplete_id(i,t);r=p.fieldID,o=p.containerID,n=e("#"+o)}return{$input:i,$colorVarInput:l,$container:n,containerID:o,fieldID:r,M:s}},draw_palette:function(a){var s=S.get_meta(S.inputWaitingObj,"property"),r=this.get_related_meta("picker",!1,s),o=(a=a||r.$container).find("ul.mt-picker-palette");t.isDomEl(o)?o.replaceWith(S.color_palette()):a.prepend(S.color_palette()),S.$palette=a.find("ul.mt-picker-palette"),a.find("ul.mt-picker-palette").on("click.mt-spectrum","span.full-palette-toggle, span.palette-button, span.refresh-icon, span.tile-color",(function(t){var s=e(t.target),o=r.$input;if(s.hasClass("full-palette-toggle"))S.toggle_feature(s);else if(s.hasClass("tile-color")){S.$palette.find("span.tile-selected").removeClass("tile-selected");var n=s.data("color");S.maybe_set_variable_color(n,o,a.find(".sp-input-var"))||S.update_spectrum(n,o,{},!0);var i=s.data("id");c.ajax_save_settings({context:"redrawPalette",$property:o});var d=(s=S.$palette.find("span."+i)).parent();s.addClass("tile-selected"),S.color_tile_selected=s;var _=S.$palette.find("div.saved-colors-wrap"),u=_.find("span.mt-save-color"),p=_.find("span.mt-remove-color");d.hasClass("saved-tile")?(u.removeClass("show"),p.addClass("show")):(u.addClass("show"),p.removeClass("show"))}else if(s.hasClass("palette-button")){var f=n=a.find(".sp-input-var").val()||o.mtspectrum("get").toRgbString(),g=!1;s.hasClass("mt-remove-color")&&(f=!1,g=n=S.$palette.find("span.tile-selected").data("color")),l.splice_sug_val(f,g,"color","saved",{redrawPalette:1,save:!0})}else s.hasClass("refresh-icon")&&l.refresh_sug_values({specific:"color",$resample:s})}))},color_palette:function(){var t=e("#mt-picker-palette").clone().removeAttr("id"),a=t.find("li.view-full-palette"),s=S.pref.my_props.sug_values.color,r=s.recent,o=s.saved,n=s.sampled;if(S.pref.full_color_palette){var i=a.find("span.full-palette-toggle");i.addClass("on").attr("title",i.data("neg"))}return t.find("ul.mt-picker-palette").html(e(S.color_palette_tiles("mini","recent",S.numMiniTiles-1,r)).add(a)),t.find("ul.recent-full-palette").html(S.color_palette_tiles("full","recent",S.numMiniTiles,r)),t.find("ul.saved-full-palette").html(S.color_palette_tiles("full","saved",S.numSavedTiles,o)),t.find("ul.site-full-palette").html(S.color_palette_tiles("full","site",S.numSiteTiles,n)),t},isVariableTile:function(e){var t="";return e&&(e.indexOf("var(")>-1?t="var":e.indexOf("$")>-1&&(t="$")),t},color_palette_tiles:function(e,a,s,r){for(var o="",n=0;n<s;++n){var i=r[n],c=i&&i.indexOf("$")>-1?l.get_variable_value(i,"scss"):i,d=S.pref.color_as_hex?t.maybe_to_hex(i):i,_=i?'title="'+d+'"':"",u=i?'style="background-color:'+c+'"':"",p=i?"has-color":"no-color",f=e+"-"+a+"-"+n,g=S.isVariableTile(i);o+='<li class="'+e+"-tile "+a+"-tile  palette-tile "+p+'">'+(i?'<span class="tile-color '+f+'" data-color="'+i+'" data-id="'+f+'" '+u+" "+_+">"+g+"</span>":"")+"</li>"}return o},picker_method:function(e){if(t.startT(arguments),t.isDomEl(S.inputWaitingObj))if("hide"===e)S.inputWaitingObj.mtspectrum("hide");else if("clickpick"===e){S.get_meta(S.inputWaitingObj,"property").property.find(".sp-container").trigger("mouseup")}t.endT(arguments)},update_spectrum:function(e,a,s,r,o){t.startT(arguments);var n=tinycolor(e),i=n.toRgb();tinycolor(i).isValid()&&(a.mtspectrum("set",i),S.update_spectrum_inputs(n,a,s,r,o),o||S.adjust_comp_span(a,"after"),t.endT(arguments))},update_spectrum_inputs:function(e,a,s,r,o){if(t.startT(arguments),e){var n=e.toRgbString();o||(a.val(n).css("background-color",n).attr("value",n),S.setColorOnHide=n);var i=this.get_related_meta("picker",a).$container;i.find(".sp-input-hex").not(s).val(e.toHexString()),i.find(".sp-input-rgb").not(s).val(e.toRgbString()),i.find(".sp-input-hsl").not(s).val(e.toHslString()),i.find(".sp-input-opacity").not(s).val(e.toRgb().a),i.find(".sp-input-var").not(s).val(""),r&&!o&&S.maybe_sync_fields(a),t.isDomEl(s)&&s.focus(),t.endT(arguments)}else a.val("")},clear_spectrum_inputs:function(e,a){t.startT(arguments);var s=e.property.find("input.color");e.property.find("input.sp-input, input.color").val("").end().find("div.sp-alpha-inner, div.sp-preview-inner").css("background-color","transparent").end().find("div.sp-preview-inner").addClass("sp-clear-display"),S.adjust_comp_span(s,"after"),a&&(S.picker_method("hide"),S.maybe_sync_fields(s)),t.endT(arguments)},update_count:function(a,s,r,o,n){t.startT(arguments),t.hasValue(n)||(n=0);var i=parseInt(a.attr("rel"));if("add"==s)var l=i+parseInt(r);else if("subtract"==s)l=i-parseInt(r);if(a.attr("rel",l),"section"!=o){if(0==i){a.after(' <span class="folder-count-wrap count-wrap">(<span class="folder-state-count state-count"></span>)</span>')}if(0==l){a.next("span").remove()}else a.next("span").find(".state-count").text(parseInt(l))}if("section"==o){var c=e("#total-sec-count"),d=parseInt(c.text());l>i?(S.totalSecs=parseInt(d+r),c.text(S.totalSecs),S.totalSels=S.totalSels+parseInt(n),e("#total-sel-count").text(parseInt(S.totalSels))):(S.totalSecs=parseInt(d-r),c.text(S.totalSecs),S.totalSels=S.totalSels-parseInt(n),e("#total-sel-count").text(parseInt(S.totalSels)))}else if("selector"==o){var _=e("#total-sel-count"),u=parseInt(_.text());l>i?(S.totalSels=parseInt(u+r),_.text(S.totalSels)):(S.totalSels=parseInt(u-r),_.text(S.totalSels))}S.toggle_enabled_buttons(),t.endT(arguments)},com_data_finished_loading:function(e,a){t.startT(arguments),e.find("img.ajax-loader").remove(),c.update_prog_indicator("minus",a,TvrLang.load_style_opt),t.endT(arguments)},ajax_load_revisions_table:function(){t.startT(arguments),c.update_prog_indicator("plus",TvrLang.load_revisions_table,!1,!0),e.ajax({type:"GET",url:S.ajaxUrl,data:"mt_action=get_revisions",async:!0,timeout:S.tOut,error:function(e,a){t.startT(arguments),c.update_prog_indicator("minus",{short:TvrLang.load_revisions_table_failed,long:"<p>"+S.handle_ajax_error(e,a)+"</p>"},TvrLang.load_revisions_table),t.endT(arguments)},success:function(a){t.startT(arguments);var s=e(a).html();e("#revision-area").html(s),c.update_prog_indicator("minus",!1,TvrLang.load_revisions_table),t.endT(arguments)},complete:function(){t.startT(arguments)}}),t.endT(arguments)},update_wizard_html:function(s){e("#refresh-html-pane").addClass("active"),t.action_after_timeout("wizard_html_expensive",3,{item:function(e){if(t.startT("update_wizard_html_inner"),e.bindOnly)S.insert_formatted_html_content({data:""},e);else{a.dom;var s=a.stat.html[0].outerHTML;a.maybe_refresh_front_N_index(!0);t.ww.assignTask({taskName:"formatHTML",terminateCurrent:!0,terminateOnCompletion:!0,html:s,hasPseudo:a.hasPseudo,overlayParentIsAlt:a.overlayParentIsAlt,mainThreadData:e,custom:S.custom_wizard_html_replace(),cb:{ref:"TvrUi",funcName:"insert_formatted_html_content"}})}t.endT("update_wizard_html_inner")},args:[s]})},insert_formatted_html_content:function(t,a){o.update_arbitrary_editor({context:"wizardHTML",editorID:"wizard_inspector_html",data:t.html,mode:"customhtml",filterClass:"wizard_inspector_html",containerClass:".css-code-wrap",dontSetHeight:!0,readOnly:!0,fontSize:"13px",noValidation:!0,directContent:t.html,dontScrollHTML:a.dontScrollHTML,clicked:a.clicked,active_selector:a.css,select_config:a,existingSelCSS:a.existingSelCSS,intelli_css:a.intelli_css,active_css:a.active_css,doNotFocusEditor:a.doNotFocusEditor,maintainCurrentLine:a.maintainCurrentLine,bindOnly:a.bindOnly}),e("#refresh-html-pane").removeClass("active")},builder_html_atts_regex:function(e,t,a){var s="(?:(?:"+e.join("|")+")|(?:(?:"+t.join("|")+')-(?:[a-zA-Z0-9-]+?)))="(?:[\\s\\S]*?)"';if(a){var r=a.join("|");s+='|(?:\\s?class="(?:'+r+')?"|'+r+")"}return new RegExp(s,"g")},custom_wizard_html_replace:function(){var e={pattern:!1,repl:""},t=n.get_active_builder();return t&&n.get(t).runIfExists("wizardHtmlReplace",[e]),e},update_wizard_html_scroll:function(e,t){var a="wizard_inspector_html",s=o.eds[a],r=o.getAceRowForTriggerElement(e,t);return o.go_to_line_in_editor(r,s,a,e,!0)},refresh_html_pane:function(){var e=S.pref.show_code_editor?o.get_code_editor_selector():S.curSelCSS,t=o.eds.wizard_inspector_html;if(t){t.getCursorPosition().row;S.maybeUpdateInspectorPanels({updateHTML:1,active_css:e,dontScrollHTML:!0,updateVisEditor:1})}},get_breadcrumb_node:function(e,t){var a=S.breadcrumbNodesCache,s=e<0;return(s?a.descendentNodes:a.nodes)[s?-1*e-1:e].siblingsIncSelf[t]},breadcrumb_clicked:function(e,t){if((e=e.closest(".mt-breadcrumb")).hasClass("active-crumb"))return!1;var a=S.stat.breadcrumbs.find(".active-crumb"),s=e.hasClass("full-crumb-item"),r=!s,o=e.data(),n=parseInt(o.level),i=parseInt(o.eq),l=S.get_breadcrumb_node(n,i),c=l.$el;a.removeClass("active-crumb"),S.stat.breadcrumbs.find('.mt-breadcrumb[data-level="'+n+'"]').addClass("active-crumb");var d=parseInt(a.data("level"));void 0===S.breadcrumbNodesCache.nestedElLevelAdjust&&(S.breadcrumbNodesCache.nestedElLevelAdjust=0),S.breadcrumbNodesCache.nestedElLevelAdjust+=n-d,S.dom_nav_option_used(c,{e:t,node:l,isNested:r,dontReloadBreadcrumbs:s,level:n,$clicked:e,$prevActiveCrumb:a,pseudoSelected:o.pseudotype})},update_breadcrumbs_nested_html:function(s,r,o,n,i,l){let c=n.$el,d=n.$siblingsIncSelf,_=a.relevantAtts(),u=a.get_breadcrumb_data(c,_,!0,"",a.dom.selectorsString,s);n.bcLabel=u.bcLabel,n.formattedBCLabel=u.formattedBCLabel,n.siblingsIncSelf=[],d.each((function(){n.siblingsIncSelf.push(a.get_breadcrumb_data(e(this),_,!0,"",a.dom.selectorsString,s))}));var p=n.level,f=0===p,g=n.family,m=a.dom.triggerElOffset,v=a.dom.triggerElDimensions,h=t.offsets_match(n.offset,m),b=t.dimensions_match(n.dim,v),y="mt-breadcrumb mt-bc-item mt-ui-element",T=n.pseudo[":nth-child(n)"],x=T-1,w='data-nth="'+T+'" data-total="'+n.totalSiblings+'"',k="",C="mt-bc-item",M=n.bcLabel,j=n.formattedBCLabel,D='<span class="bc-sep mt-ui-element"></span>',I="";if(f&&(y+=" active-crumb",r.activeBreadcrumbLabel=M),i){var O="::"+i;r.activeBreadcrumbLabel+=O,j=j.replace(/<\/span>$/,O+"</span>"),I='data-pseudotype="'+i+'"'}if((g.next.count>0||g.prev.count>0)&&(y+=" node-has-siblings"),h&&!f&&(k='<span class="mt-crumb-icon mt-ui-element '+(C+=b?" fully-nested-crumb "+t.iconClasses("square-regular"):" nested-crumb "+t.iconClasses("border-style"))+'"></span>'),r.breadcrumbs+='<span class="'+y+' full-crumb-item" data-level="'+p+'" data-eq="'+x+'" '+w+" "+I+" >"+j+D+"</span>",h||f){var E=f?j:"";!f&&a.get_matching_selectors(n.$el,S.get_all_selector_code(!0,!0),S.pseudoSelected).length&&(y+=" mt-hasValues mtif"),void 0!==S.breadcrumbNodesCache.nestedElLevelAdjust&&(p+=S.breadcrumbNodesCache.nestedElLevelAdjust),r.nestedTabs+='<span class="'+y+' nested-el-item" data-level="'+p+'" data-eq="'+x+'" '+I+'title="'+t.escapeHTML(M)+'" '+w+" >"+k+E+D+"</span>"}},update_breadcrumbs_and_nested_tabs:function(s){if(t.startT(arguments),a&&a.stat.nestedEls&&!t.isDomEl(a.triggerEl))return a.stat.nestedEls.add(e("#dom-bread").find(".drag-content")).html(""),!1;if(s.dontReloadBreadcrumbs||(S.breadcrumbNodesCache={}),S.iframeEditing()&&a.dom.search&&a.dom.search.nodes){for(var r={breadcrumbs:"",nestedTabs:"",activeBreadcrumbLabel:""},o=a.dom.search.nodes.length-1;o>=0;o--)S.update_breadcrumbs_nested_html(s,r,o,a.dom.search.nodes[o],0===o&&S.pseudoSelected),a.dom.search.nodes[o];for(o=0;o<a.dom.search.descendentNodes.length;o++)S.update_breadcrumbs_nested_html(s,r,o,a.dom.search.descendentNodes[o]),a.dom.search.descendentNodes[o];if(a.stat.nestedEls&&a.stat.nestedEls.html(r.nestedTabs),!s.dontReloadBreadcrumbs){var n=e("#dom-bread"),i=n.find(".drag-containment"),l=n.find(".drag-content");s.domArrowAdjustment;l.css("width","auto").html(r.breadcrumbs);var c=n.width(),d=l.width(),_=d,u=0,p=0;l.width(d).css("left","0px"),d>c?(p="-"+(u=d-c)+"px",_=c+2*u,S.stat.breadcrumbs.draggable("enable"),i.addClass("mt-is-draggable")):(S.stat.breadcrumbs.draggable("disable"),i.removeClass("mt-is-draggable")),i.width(_),i.css({left:p}),S.breadcrumbNodesCache={nodes:a.dom.search.nodes,descendentNodes:a.dom.search.descendentNodes}}}t.endT(arguments)},update_dom_arrows:function(e){if(t.startT(arguments),a.dom.search){var s=S.stat.refineTarget;if(s.find("span").addClass("disabled"),a.dom.search.nodes&&a.dom.search.nodes.length){var r=a.dom.search.nodes[0].family;r.par.count&&s.find("span.tvr-parent").removeClass("disabled"),r.prev.count&&s.find("span.tvr-prev-sibling").removeClass("disabled"),r.next.count&&s.find("span.tvr-next-sibling").removeClass("disabled"),r.child.count&&s.find("span.tvr-child").removeClass("disabled")}t.endT(arguments)}},dom_arrow_clicked:function(e,t){var a=e.attr("class"),s=a.indexOf("tvr-parent")>=0,r=a.indexOf("tvr-child")>=0,o=S.stat.breadcrumbs.find(".active-crumb");if(s||r){var n=s?o.prev():o.next();S.breadcrumb_clicked(n,t)}else{var i=o.data(),l=parseInt(i.eq),c=parseInt(i.level);a.indexOf("tvr-prev-sibling")>=0?l-=1:l+=1;var d=S.get_breadcrumb_node(c,l);d&&S.dom_nav_option_used(d.$el,{e:t,node:d,level:c,eq:l,domArrowAdjustment:"sibling",$prevActiveCrumb:o})}},dom_nav_option_used:function(t,s){s=e.extend({scroll:!s.isNested,forceHighlight:1,manualSelect:1},s),a.select_element(e(t),s)},update_view_code_tabs:function(a){var s=S.microUrl,r=S.pref.asset_loading,o=r.logic,n=-1,i=[],l={};parseInt(S.pref.allow_scss)&&(i.push({name:"All Sass",tab_slug:"all-sass",url:s+"draft-styles.scss",publish_url:s+"active-styles.scss",mode:"scss"},{name:"Previous Sass compile",tab_slug:"previous-sass-compile",file:"stdin",mode:"scss",note:"scss-error-notes"}),l["all-sass"]=++n,l["previous-sass-compile"]=++n),r.global_css&&(i.push({name:"Global CSS",tab_slug:"global-css",url:s+"draft-styles.css",publish_url:s+"active-styles.css",mode:"css"}),l["global-css"]=++n),r.global_js&&(i.push({name:"Global JS",tab_slug:"global-js",url:s+"draft-scripts.js",publish_url:s+"active-scripts.js",mode:"js"}),l["global-js"]=++n);for(let a=0;a<o.length;++a){var c=o[a],d=c.slug;"empty"!==r.conditional[d]&&(i.push(e.extend(!0,{name:t.checkObject(S.uiData,[d,"this","label"]),type:"conditional",tab_slug:"conditional-"+d,url:s+"mt/conditional/draft/"+d+".css",publish_url:s+"mt/conditional/active/"+d+".css",mode:"css"},c)),l["conditional-"+d]=++n)}S.generatedCodeTabs={items:i,indexMap:l};let _=S.get_initial_code_view_tab(),u='<input class="dialog-focus" type="hidden" name="tvr_mcth[non_section][display_css_code]" value="'+_+'">';if(i.length){for(let e=0;e<i.length;++e){let t=i[e],a=_===e?"active ":"",s="";"conditional"===t.type&&(s+="conditional-tab "),u+='<span class="'+s+a+" mt-tab dialog-tab dialog-tab-"+e+" dialog-"+t.tab_slug+'" rel="'+e+'">'+t.name+"</span>"}a&&S.update_generated_code_editor("",_,i[_])}S.stat.view.find("div.dialog-tabs").html(u)},get_initial_code_view_tab:function(){let e=S.generatedCodeTabs,a=S.scss_error?e.indexMap["previous-sass-compile"]:0,s=S.get_selector_in_focus();if(s&&!S.scss_error){u.folderIsConditional(s.sectionSlug)&&"empty"!==t.checkObject(S.pref.asset_loading,["conditional",s.sectionSlug])&&(a=e.indexMap["conditional-"+s.sectionSlug])}return a},url_short_display_name:function(e,t){return e.replace(RegExp(t+"(?:mt/conditional/)?"),"")},update_generated_code_editor:function(a,s,r){var n=r.mode,i=r.tab_slug,l=S.microUrl,c="";if((a&&"css"===n||"scss"===n&&(1!==parseInt(s)||!S.scss_error))&&(a=o.beautify_css_or_scss(a),c=" ("+TvrLang.beautified+")"),o.update_arbitrary_editor({context:"viewCSS",mode:n,editorID:"generated-code",filterClass:"generated-code",readOnly:!0,directContent:a,tabKey:parseInt(s)}),e("#generated-code").attr("data-tab",r.tab_slug),"previous-sass-compile"===i)S.toggle_scss_import_compile_note("show"),S.toggle_view_draft_published_files("hide");else{let a=e("#view-file"),s=a.find(".draft-file"),o=a.find(".published-file"),n=parseInt(S.pref.minify_css)?" (minified)":"",i=!t.fileExists(r.publish_url);s.attr("href",r.url).text(S.url_short_display_name(r.url,l)+c),i?o.removeAttr("href").attr("data-unpublished",1).text(S.url_short_display_name(r.publish_url,l)):o.attr("href",r.publish_url).removeAttr("data-unpublished").text(S.url_short_display_name(r.publish_url,l)+n),S.toggle_scss_import_compile_note("hide"),S.toggle_view_draft_published_files("show")}},update_inspector_stylesheet:function(e,a,s){t.startT(arguments),"loadNew"==s?c.simple_ajax_request({skipQueue:1,url:a.url,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:S.update_inspector_stylesheet,cbfArgs:[a]}):o.update_arbitrary_editor({context:"inspectorStylesheet",editorID:"inspect_stylesheet_preview",data:e,filterClass:"inspect_stylesheet_preview",readOnly:!0,directContent:e,containerClass:".content-main",find:a}),t.endT(arguments)},ui_reset:function(e){if(t.startT(arguments),!confirm(TvrLang.reset_settings_confirm))return!1;c.pending_auto_saves("clear");var a=S.ajaxUrl,s=TvrLang.reset_empty_folders;c.general_ajax_submission("reset",a,s,"GET","mt_action=tvr_ui_reset"),t.endT(arguments)},get_css_filter_alias_orig:function(a,s){t.startT(arguments);var r=e("#css-filters"),o=S.pseudo_class_format(a.closest("li").data("pref_sub_key")),n=(t.isDomEl(a.closest("#fav-filters"))?r.find("span.quick-opts-wrap"):e("#fav-filters")).find("li."+o);return t.endT(arguments),"favourite_filter"!=s?n:n.find(".star-icon")},get_css_filter_alias:function(e,t){var a=e.closest("li"),s="li."+S.pseudo_class_format(e.closest("li").data("pref_sub_key"));return S.otherFilters(s,a)},clear_css_filters:function(a){t.startT(arguments),S.stat.cssModifiers.find("li.css-filter-item").each((function(t){var s=e(this),r=s.data(),o=r.type;if(!(a&&"page_specific"===o)){if(s.hasClass("on")){var n=S.get_css_filter_alias(s),i=s;n.length&&(i=i.add(n)),i.removeClass("on"),delete S.pref[o][r.pref_sub_key]}if(s.hasClass("filter-editable")){var l=s.find(".cssfilter-combo").attr("name").match(/\((.+?)\)/),c=l?l[1]:"";s.find(".cssfilter-combo").val(c)}}})),S.stat.tvr.removeClass("pseudo_classes pseudo_elements"),t.endT(arguments)},force_styles_analysis:function(){S.tooMuchCSS=!1,S.forceStylesAnalysis=!0,l.update_stylesheet_rules()},get_custom_prefix_combo_data:function(e,s){var r=S.format_combo_suggestions(!1,"body_classes",t.checkObject(a,["dom","search","sigAtts","pageOtherClass"])||[]);s(S.format_combo_suggestions(!1,"recent",S.pref.recent_custom_prefixes).concat(r))},url_pages_cache:{},url_pages_cache_previous_result:[],logic_pages_cache:{},logic_pages_cache_previous_result:[],search_pages_latest_term:null,get_item_from_previous_results:function(e,t){t=t||this.url_pages_cache_previous_result;for(var a=0;a<t.length;a++){var s=t[a];if(e===s.value)return s}return!1},filter_code_suggestions:function(e,t){var a=e?e.term.toLowerCase():null;t(S.filter_matching_results(a,TvrMT.data.prog.combo.all_sel_suggestions))},filter_matching_results:function(e,a){for(var s=[],r=0;r<a.length;r++){var o=a[r],n=o?o.value+o.label+o.category:"";o.logic_only&&!S.conditionLogicSiteSearch||e&&!n.match(new RegExp(t.escapeRegExp(e),"i"))||s.push(o)}return s},prepend_recent_paths:function(e,t){if(!a)return t;var s,r=[],o=S.conditionLogicSiteSearch?TvrMT.data.prog.combo.recent_logic:TvrMT.data.prog.combo.custom_paths,n=a.get_current_page_title(),i=0;for(i=t.length-1;i>=0;i--)(s=t[i]).category===TvrLang.recent&&t.splice(i,1);for(i=0;i<o.length;i++){var l=(s=o[i])===Object(s),c=l?s.label:s,d=l?s.value:s,_=l?s.item_id:null,u=l?s.logic:null,p=l?s.exclude_logic:null,f=l?s.logic_only:null;!S.conditionLogicSiteSearch&&(n&&c===n&&(c+=" ("+TvrLang.current_page+")"),d.indexOf("ct_template")>-1)||r.push({label:c||d,value:d,category:TvrLang.recent,item_id:_,logic:u,exclude_logic:p,logic_only:f})}if(S.conditionLogicSiteSearch&&a){let e=a.getMTDynFrontData(),t=e.title,s=e.logic;r.unshift({label:t,value:s,category:TvrLang.current_page,item_id:e.post_id,logic:s,logic_only:1})}return r.concat(t)},clear_recent_page_path:function(t,a){a.preventDefault();for(var s=e("#previewPath"),r=t.closest("li").attr("data-path"),o=TvrMT.data.prog.combo.custom_paths,n=o.length-1;n>=0;n--){var i=o[n];r===(i===Object(i)?i.value:i)&&o.splice(n,1)}s.MTautocomplete("search",s.val()),c.simple_ajax_request({type:"POST",url:S.ajaxUrl+"&update_custom_paths=1",sendData:c.serialized_data_with_single_key(JSON.stringify(o)),plus:"",minus:""})},return_page_results:function(e,t,a,s){if(S[s+"_previous_result"]=a,a=S.prepend_recent_paths(e,a),a=S.filter_matching_results(e,a),s){S[s][e]=a;var r=Object.keys(S[s]);r.length>9&&delete S[s][r[0]]}t(a)},get_site_pages:function(a,s){var r=S.stat.changeUrlInputWrap,o=e("#previewPath").val(),n=a&&a.term?a.term.toLowerCase():t.isDefined(o)?o:null,i=S.conditionLogicSiteSearch?"logic_pages_cache":"url_pages_cache";S.search_pages_latest_term=n,n?(S[i][n]?S.return_page_results(n,s,S[i][n]):S.return_page_results(n,s,S[i+"_previous_result"]),r.addClass("active"),t.action_after_timeout("site_page_search",200,{item:function(e){var t=S.conditionLogicSiteSearch?"&logic_format=1":"";c.simple_ajax_request({skipQueue:1,type:"GET",url:S.ajaxUrl+"&get_site_pages=1&search_term="+n+t,cbFunction:function(e,t){var a=JSON.parse(e);S.return_page_results(S.search_pages_latest_term,s,a,i),r.removeClass("active")},cbfArgs:[n]})},args:[{}]})):S.return_page_results(n,s,TvrMT.data.dyn.site_pages)},restore_rev:function(e){if(t.startT(arguments),!confirm(TvrLang.restore_settings_confirm))return!1;var a=S.ajaxUrl,s=TvrLang.restore_settings,r=e.attr("rel");c.general_ajax_submission("restore",a,s,"GET",r),t.endT(arguments)},toggle_revision_save_status:function(e){var t,a=e.add(e.closest("tr"));e.hasClass("revision-is-saved")?(a.removeClass("revision-is-saved"),t=0):(a.addClass("revision-is-saved"),t=1),c.simple_ajax_request({type:"GET",url:S.ajaxUrl+"&rev_save_status="+t+"&rev_id="+e.attr("rel")})},buildOptions:function(){},set_input_timer:function(e){const a=e||S.inputTypingInterval;t.action_after_timeout("typing",a,{item:S.done_typing,args:[]})},set_defer_save_timer:function(e,t){var a="save"+t;S.timer[a]&&clearTimeout(S.timer[a]),S.timer[a]=setTimeout(c.action_save,S.beforeSaveInterval,e)},extract_inner_styles:function(e){var a=(e=(e=t.remove_only_last_char(e,"}")).split("{"))[1]?e[1]:"";return a&&(e.shift(),a=e.join("{")),a.trim()},post_edit:function(a){t.startT(arguments),a.each((function(t){var a=e(this);S.update_input_width_and_scroll(a),S.adjust_comp_span(a,"after")})),t.endT(arguments)},adjust_event_fields:function(e){var s,r=t.convert_to_param(e.val(),""),o=e.closest(".field-wrap"),n=o.siblings(".event-target-field"),i=o.siblings(".event-value-field");t.hasValue(r)?(s=i,"css"!==l.event_type(r)?s=s.add(n):S.hide_property_fields(n),s.addClass("show-event-fields")):(s=i.add(n),S.hide_property_fields(s)),a.after_animation(s.first(),{type:"transition",cb:function(){S.adjust_scroll_buttons(S.get_pg_meta(),"style")}})},get_default_unit:function(e,a){return t.checkObject(S.pref,["my_props",e,"pg_props",a,"default_unit"],!0)},get_factory_default_unit:function(e,a){return e||(e=t.prop_to_cssf(a)),t.checkObject(TvrMT.data.prog.lh,[e,"fdu"],!0)},update_default_unit:function(e,a,s){t.updateObject(S.pref,["my_props",e,"pg_props",a,"default_unit"],s)},maybe_set_unit:function(e,a,s,r,o){if(!r)return!1;var n=void 0!==e.unit?e.unit:S.get_default_unit(a,s);if(t.isDefined(n)){r=r.trim().replace(/=(?:.+)(\(.*?\))/g,(function(e){return e.replace(/ /g,"")}));var i={val:r,converted:!1,calc:""};if(r.indexOf(" ")<0)i=S.do_conversion(r,n,s,0,o);else{var l=[],c=r.split(" ");for(var d in c)if(c.hasOwnProperty(d)){var _=S.do_conversion(c[d],n,s,d,o);l[d]=_.val,_.converted&&(i.converted=!0,i.calc+=0!=d?", "+_.calc:_.calc)}i.val=l.join(" ")}return i}},do_conversion:function(e,t,a,s,r){var o={val:e,converted:!1,calc:""};return m.unitCouldBeAdded(e,t)?t&&(o.val=e+t,o.converted=!0):"="===e.charAt(0)&&(o=S.process_excel_function(e,a,s,r)),o},process_excel_function:function(e,a,s,r){var o={val:e,converted:!1,calc:""},n=e.split("(");if(!n[0]||!n[1]||n[1].indexOf(")")<0)return o;var i=n[0].replace("=",""),l=n[1].replace(")","").split(",");for(var d in l)if(l.hasOwnProperty(d)&&(l[d]=l[d].trim(),!t.isDefined(l[d])))return o;var _=S.nodeCSS[0];return _?(l[1]&&(_=S.nodeCSS[l[1]-1]),S.auto_convert(l[0],i,_,a,e,s,r)):(c.log({short:"Auto-conversion could not be calculated",long:"<p>The current selector may not target any elements on the current page.</p>",type:"warning"}),o)},auto_convert:function(a,s,r,o,n,i,l){t.startT(arguments);var d,_,u,p,f,g,m={val:n,converted:!1,calc:""},v=o,h=!1,b=TvrMT.data.prog.autoMap;if(b[v]&&b[v][s]){if(!e.isPlainObject(b[v][s])&&!b[v][s][0]){if(l){var y={short:"Auto-conversion aborted",long:"<p>"+b[v][s]+"</p>",type:"warning"};c.log(y)}return t.endT(arguments),m}d=b[v][s].node,_=b[v][s].prop,Array.isArray(_)&&(_=_[i]),_=_.replace(/_/g,"-"),u=parseInt(r[d][_].replace("px","")),t.hasValue(b[v][s].tip)&&(h="<p>"+b[v][s].tip+"</p>")}if("%"===s?(p=a/u*100,f=a+"px / "+u+"px * 100 = "+parseFloat(p.toFixed(3).toString())+s,g=a+"px divided by "+u+"px ("+d+" "+_+") multiplied by 100 = <b>"+p+s+"</b>"):"em"!==s&&"rem"!==s||(_="font-size","em"==s?(d="element","font_size"==v&&(d="parent"),u=parseInt(r[d]["font-size"].replace("px",""))):(d="HTML base",u=S.baseFontSize),p=a/u,f=a+"px / "+u+"px = "+parseFloat(p.toFixed(3).toString())+s,g=a+"px divided by "+u+"px ("+d+" "+_+") = <b>"+p+s+"</b>"),!p)return t.endT(arguments),m;if(l){y={short:f,long:"<p>"+TvrLang.auto_conversion_performed+": <b>"+n+"</b><br />"+g+"<br />"+TvrLang.auto_values_rounded+"</p>",type:"info"};h&&(y.long+=h),c.log(y)}return m={val:parseFloat(p.toFixed(3).toString())+s,converted:!0,calc:f},t.endT(arguments),m},update_packs_obj:function(e){TvrMT.data.prog.combo.directories.push(e),TvrMT.data.prog.combo.directories.sort()},set_import_field:function(t){e("#import_from_pack_name").val(t)},handle_ajax_error:function(e,t){return 0==e.status?TvrLang.error_connection:404==e.status?TvrLang.error_404:500==e.status?TvrLang.error_500:"parsererror"==t?TvrLang.error_parser:"timeout"==t?TvrLang.error_timeout:TvrLang.error_unknown+"\n"},show_dialog:function(a){t.startT(arguments),S.close_dialog(!0);var s=(a=a.attr("rel")?a:a.closest("*[rel]")).attr("rel");if("not-yet"===s)return!1;if(e("#"+s+"-dialog").addClass("show"),S.stat.dialogs.addClass("show"),"mt-initial-setup"===s)S.pref.buyer_validated||e("#license-key-input").focus();else if("import-from-pack"===s)t.hasValue(a.attr("data-pack-name"))&&e("#import_from_pack_name").val(a.attr("data-pack-name")),e("#preview-import-css-0").hasClass("ace_editor")||l.update_import_css_editor("");else if("export-to-pack"===s){var r="";e("#tvr-menu").find(".section-tag").each((function(){var t=S.get_meta(e(this),"section"),a="",s="";parseInt(t.sectionM.find(".selector-count-state").attr("rel"))>0&&(a='checked="checked"',s="on"),r+='<li><input type="checkbox" name="export_sections['+t.sectionSlug+']" '+a+' /> <span class="fake-checkbox '+s+' mtif mtif-tick-box-unchecked"></span><span class="folder-icon tvr-icon"></span><span class="ef-label">'+t.sectionH+"</span></li>"})),e("#available-folders").html(r);var o=e("#custom-css");S.stat.code.find("textarea.hand-css-textarea").each((function(a){var s=e(this),r=o.find(".custom-"+s.attr("id"));t.hasValue(s.val())?t.check_fake(r):t.uncheck_fake(r)})),e("#export_to_pack").val(1),e("#export_pack_name").val(""),e("#toggle-checked-folders").find("input").prop("checked",!1).end().find(".fake-checkbox").removeClass("on")}else if("display-css-code"===s)S.update_view_code_tabs(!0),c.ajax_save_settings({context:"view-code",settings:{},noSaveDelay:!0,essentialSave:1});else if("inspect-stylesheet"===s){var n=t.escapeRegExp(a.data("selector")),i=n+"\\s*?{?",d={url:a.data("href"),media:a.data("media"),selector:n,findSelectorParts:!0,selectorPattern:i};S.update_inspector_stylesheet(!1,d,"loadNew")}else"display-revisions"===s?S.ajax_load_revisions_table():"manage-design-packs"===s&&S.reload_iframe(a,"manage");"google-fonts"===s?(S.gFontTarget=a.closest(".field-wrap").find(".property-input"),S.reload_iframe(a,"google_fonts")):"program-docs"===s&&S.reload_iframe(a,"docs",e("#docs-url").attr("rel"),!0),"mt-enqueue-js"===s&&p.npm.updateDependencyTableRows(e("#mt-enqueue-js-dialog").find(".dependency-table-wrap").find(".dependency-rows"),S.pref.npm_dependencies),t.endT(arguments)},close_dialog:function(a,s){t.startT(arguments);var r=S.stat.tvr.find("div.tvr-dialog.show");a&&r.length?S.stat.dialogs.addClass("dialog-already-showing"):S.stat.dialogs.removeClass("dialog-already-showing"),S.stat.dialogs.removeClass("show"),r.removeClass("show"),e("#export_to_pack, #new_pack").val(0),t.endT(arguments)},reload_docs_iframe:function(a){t.startT(arguments);var s="docs_iframe",r=e("#docs-url").attr("rel");t.hasValue(a.attr("data-docs-index"))&&(r+="&docs_index=1"),t.hasValue(a.attr("data-prop-group"))&&(r+="&prop_group="+a.attr("data-prop-group")),t.hasValue(a.attr("data-prop"))&&(r+="&prop="+a.attr("data-prop"));e("#"+s);window.frames[s].location=r,t.endT(arguments)},reload_iframe:function(a,s,r,o){var n=s+"_iframe",i=e("#"+n);r=r||i.attr("rel"),"docs"===s&&(t.hasValue(a.attr("data-docs-index"))&&(r+="&docs_index=1"),t.hasValue(a.attr("data-prop-group"))&&(r+="&prop_group="+a.attr("data-prop-group")),t.hasValue(a.attr("data-prop"))&&(r+="&prop="+a.attr("data-prop"))),(o||"manage"===s||"1"!==i.attr("data-frame-loaded"))&&(i.attr("data-frame-loaded",0),i[0].src=r,window.frames[n].location=r,i.on("load",(function(){i.attr("data-frame-loaded",1)})))},toggle_help_info:function(e){e.next().slideToggle("fast",(function(){}))},toggle_multi_checkboxes:function(a){t.startT(arguments);var s=e("#available-folders, #custom-css");a.hasClass("on")?s.find("input").prop("checked",!1).end().find(".fake-checkbox").add(a).removeClass("on"):s.find("input").prop("checked",!0).end().find(".fake-checkbox").add(a).addClass("on"),t.endT(arguments)},get_dyn_meta:function(e){t.startT(arguments);var a=e.closest(".dyn-wrap");S.dyn_meta={wrap:a,slug:a.data("slug"),add_input:a.find(".new-item-input"),add_button:a.find(".new-item-add"),menu:a.find(".tvr-dyn-menu")};var s=e.closest("li.dyn-item");return t.isDomEl(s)&&(S.dyn_meta.item=s),t.endT(arguments),S.dyn_meta},dyn_add_item:function(a){t.startT(arguments);var s=S.get_dyn_meta(a),r=s.add_input.val(),o=s.wrap.data("base-key");if(o)var n={newName:o+=s.menu.find("li.dyn-item").length+1,newNameHuman:r};else if(!(n=t.new_name_checks(r,TvrLang.item)))return!1;var i=S.dom_replacements(!1,"dyn_item",e(S.templates[s.slug+"_menu_item"]),"item",n.newName,n.newNameHuman);s.menu.append(i).find("li").filter(":last").hide().fadeIn("fast",(function(){s.add_input.val(""),"mqs"==s.slug&&S.toggle_edit_item(e(this).find(".edit-item"))})),t.endT(arguments)},toggle_edit_item:function(e){t.startT(arguments);var a=S.get_dyn_meta(e).item.find(".edit-item-form");a.hasClass("show")?a.removeClass("show"):a.addClass("show"),t.endT(arguments)},delete_item:function(a){t.startT(arguments),a.closest("li").fadeOut("slow",(function(){e(this).remove()})),t.endT(arguments)},reveal_form_opts:function(e){t.startT(arguments);var a=e.attr("rel"),s=e.closest("li").siblings(".hidden."+a);s.hasClass("show")?s.removeClass("show"):s.addClass("show"),t.endT(arguments)},toggle_system_menu_options:function(e){t.startT(arguments);var a=(e=e.closest("li")).find(".tvr-input-wrap"),s=e.find(".mt-menu-text"),r=e.closest("ul");a.hasClass("show")?(s.text(s.data("ll")),r.removeClass("expanded"),a.removeClass("show")):(s.text(s.data("sl")),r.addClass("expanded"),a.addClass("show")),t.endT(arguments)},create_url_from_input_path:function(e){let s=e.val(),r=!!s&&t.extract_url_path(s),o=r?t.rtrim(S.homeUrl,"/")+r:"";return!o&&a&&(o=a.get_current_url()),o},format_nonlog_param:function(e){return parseInt(S.pref.mt_nonlog)?(e=t.strip_page_builder_and_other_params(e),e=t.append_url_param(e,"mt_nonlog"),e=t.append_url_param(e,"_wpnonce",TvrMT.data.dyn.ui_config.mt_nonlog_nonce),"draft"===t.checkObject(a,["stat","win","MTDynFrontData","post_status"])&&alert('You must publish the page, otherwise you will get "Page Not Found" when viewing it as a non-logged in user.')):e=t.strip_url_param(e,"mt_nonlog"),e},clear_test_page_input:function(){e("#testPreviewPath").val("")},change_preview_url:function(e,a,s){t.startT(arguments);var r=e.closest("li").find("input.combobox"),o=S.create_url_from_input_path(r);o&&(c.update_prog_indicator("plus",TvrLang.load_wp),S.clear_test_page_input());var i,l=n.check_builder_autoload();l&&((i=a?a.item:S.get_item_from_previous_results(t.extract_url_path(o))||{}).url=o,l=n.launchBuilderOnNewPage(i,l));l||(o=S.format_nonlog_param(o),n.maybeReleaseBuilderEditLockBeforeExit(o)),t.endT(arguments)},toggle_ai_panel:function(){S.stat.aiAssistant.hasClass("expanded")?S.hide_folders_or_settings("ai","right"):S.show_folders_or_settings("ai","right")},toggle_program_menu:function(e){S.stat.settingsMenu.hasClass("expanded")?S.hide_folders_or_settings("settings","right"):S.show_folders_or_settings("settings","right")},after_style_options_deleted:function(e){S.totalSels<1&&g.toolbar_adjusted()},menuOrder:{},refresh_sortable:function(){t.startT(arguments);for(var a=document.getElementById("tvr-menu"),s=a.getElementsByClassName("selector-sub"),r={animation:150,forceFallback:!0,onStart:function(s){MTlocal.clean_tooltips(),(S.retargetSelector||S.draftSelector.atts.id)&&S.save_draft_selector(S.retargetSelector,!0);var r=e(s.item);t.currentlySorting=r.hasClass("section-tag")?"section":"selector",e(a).addClass("sorting-in-progress"),S.get_dom_order({},r,{prevSec:"",newSec:"",orig_order:["this"],new_order:["this"],map:[]},!1),S.itemIsBeingDragged=!0},onEnd:function(s){t.currentlySorting=!1,e(a).removeClass("sorting-in-progress"),S.get_dom_order({},e(s.item),S.menuOrder,!0),S.itemIsBeingDragged=!1}},o=e.extend(!0,{},r,{group:"folders",handle:".folder-icon",onUpdate:function(a){var s=S.get_meta(e(a.item),"section"),r=s.sectionM.prev().attr("id");t.hasValue(r)?s.section.detach().insertAfter("#"+r.replace("strk","opts")):s.section.detach().prependTo("#tvr-options"),t.hasValue(S.selInFocusID)&&S.update_prev_next_sel_buttons(S.selInFocusID)}}),n=e.extend(!0,{},r,{group:"selectors",handle:".selector-sortable-icon",onMove:function(e,t){if(e.related.className.indexOf("strk-sec")>-1)return!1},onUpdate:function(e){S.mirror_move_and_log({},e)},onAdd:function(e){S.selector_received({},e)}}),i=(new Sortable(a,o),[]),l=0;l<s.length;l++)i[l]=new Sortable(s[l],n);t.endT(arguments)},get_dom_order:function(s,r,o,n,l,d){t.startT(arguments);var _=r.closest("ul"),p=r.hasClass("section-tag")?"section":"selector",f="section"===p?["root"]:["section"],g=S.get_meta(r,p);if("selector"===p){var m=_.closest(".section-tag");n?o.newSec=m.attr("id").replace("strk-",""):o.prevSec=g.sectionSlug,o.moved_item=g.selectorSlug}else o.moved_item=g.sectionSlug;if(l&&!n){var v="section"===p?S.uiData:S.uiData[g.sectionSlug];o.orig_order=Object.keys(v)}else _.find("> li").not(".sortable-ghost").each((function(t){var a=e(this),s=S.get_meta(a,p)[p+"Slug"];n?o.new_order.push(s):o.orig_order.push(s)}));if(n){if(t.startT("get_dom_order post sort"),o.syncRenameConfig&&(s=i.modify_main_js_object("rename",s,S.menuOrder.syncRenameConfig),o.syncRenameConfig=!1),s.moveUpdate=[],s.orderUpdate=[],s=i.modify_main_js_object("reorder",s,{callbackDepth:f,maxDepth:f[0],targetSection:g.sectionSlug,targetSelector:g.selectorSlug,menuOrder:o}),"selector"===p){var h=S.get_meta(m,"section");if(s=S.js_check_values(s,h),s=i.modify_main_js_object("update_section_css",s,{M:h,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),o.prevSec!==o.newSec){t.checkObject(S.uiData,[o.prevSec,"this","disabled"])!==t.checkObject(S.uiData,[o.newSec,"this","disabled"])&&(s=i.modify_main_js_object("group_to_css",s,{M:g,maxDepth:"group",recurse_key:["m_query"]}));var b=S.get_meta(e("#strk-"+o.prevSec),"section");s=S.js_check_values(s,b),s=i.modify_main_js_object("update_section_css",s,{M:b,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),a&&S.is_cur("selector",g.selectorID)&&a.select_current_selector_elements({doNotUpdateSelectorSuggestions:1})}l||(s=c.user_action(s,{items:["selector"],val:S.title(g.selectorM.find("span.selector-sortable-icon")),M:g,pathTT:!0,icon:"mtif-arrowsx4"}))}else l||(s=c.user_action(s,{items:["section"],val:S.title(g.sectionM.find("span.folder-icon")),M:g,icon:"mtif-arrowsx4"})),a.edit_style_nodes(g,"reorder"),u.reorderFolderLoading(o.new_order),u.maybeAddLogicAdjustedFlag(g.sectionSlug,s);l||c.ajax_save_settings({settings:s}),t.endT("get_dom_order post sort")}return S.menuOrder=o,t.endT(arguments),s},mirror_move_and_log:function(a,s,r){t.startT(arguments);var o=e(s.item),n=S.get_meta(o,"selector");t.hasValue(S.selInFocusID)&&S.tvr_iterate_selectors_v(n.selectorM,S.selInFocusID,{doNotBringStylesTop:1,draftSelectorFolderCreated:s.draftSelectorFolderCreated,elementAlreadySelected:s.elementAlreadySelected}),t.endT(arguments)},selector_received:function(a,s){t.startT(arguments);var r=e(s.item),o=S.get_meta(r,"selector"),n=S.is_cur("selector",o.selectorID);S.oM=o;var i=S.get_meta(r.closest(".section-tag"),"section");S.update_count(o.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),S.update_count(i.sectionM.find(".selector-count-state"),"add",1,"selector","");var l=t.resolve_unique_name(o.selectorH,i.sectionM,".selector-name","Moved",o.selectorMID),c=t.convert_to_param(l);return S.dom_replacements(o,"selector",o.selector.add(o.selectorM),o.sectionSlug,i.sectionSlug,i.sectionH,o.selectorSlug,c,l,o.selectorCode),c!==o.selectorSlug&&(S.menuOrder.syncRenameConfig={rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:o.sectionSlug,targetSelector:o.selectorSlug,new_key:c,new_label:l,new_code:o.selectorCode}),i=S.get_meta(o.selectorM,"selector"),n&&(S.update_global_vars(i),o.selector.detach().prependTo(i.section.find("ul.selector-sub"))),S.sortableLoading=!1,S.mirror_move_and_log(a,s),t.endT(arguments),i},search_filter:!1,colorCodeSearchDec:!0,search_folders:function(a,s,r,o,n){function l(a){!o&&parseInt(S.pref.expand_all_folders)&&(e("#toggle-all-folders").removeClass("on"),S.pref.expand_all_folders=0),a=a.trim();var s=t.escapeRegExp(a),l=".*("+s+").*\\n";if(t.isDefined(a)||r){S.stat.mainMenu.addClass("user-searching");var c={searchText:a,justGetMatches:o,elementAttrSearch:n,searchRegex:r||new RegExp(s,"i"),wholeLineRegex:new RegExp(l,"i"),searchMatches:{}},d=i.run_global_scans(e.extend(!0,{},c),["search_folders"]);if(o)return d.searchMatches;c.searchMatches=d.searchMatches,S.search_filter=c,S.open_close_all_folders("close"),S.open_close_all_folders("open",!0)}else S.clear_folder_search()}if(!s)return l(a);t.action_after_timeout("search_folders",S.inputTypingInterval,{item:l,args:[a]})},clear_folder_search:function(){S.search_filter=!1,S.stat.searchFoldersInput.val(""),S.stat.mainMenu.removeClass("user-searching"),S.open_close_all_folders("close")},flag_search_matches:function(e,s,r){var o,n=S.colorCodeSearchDec,i=e.settings.searchText,l=e.settings.searchRegex,c=e.settings.searchMatches,d=e.settings.justGetMatches,_=e.settings.elementAttrSearch,f=(s=e.selector,S.uiData[e.section_key]),g=f[e.selector_key],m=t.checkObject(f,["this","label"]),v=g.label.split("|"),h=v[0]||"",b=v[1]||"",y=S.get_tab_name(r),T="all-devices"!==r,x="",w={},k=t.checkObject(s,["styles","html","snippet_id","value"]),C=S.scss_enabled?s.raw_scss||"":s.compiled_css||"",M=null,j=""===C||C.match(new RegExp("^\\s*"+t.escapeRegExp(b)+"\\s*{\\s*}\\s*$")),D="",I=[],O="";if(":"===i.charAt(0))M={},i.split(":").forEach((e=>{M[e]=1})),M.affecting_selectors&&a&&(!M.including_inactive&&(u.folderNotLoading(e.section_key)||t.checkObject(f,["this","disabled"])||t.checkObject(g,["disabled"]))||(o=a.jquery_compat_sel_elements(b).length));else{TvrMT.data.dyn.ui_config.supportContent&&k&&k.forEach(((e,a)=>{if(e&&TvrMT.data.dyn.snippets.cache[e]){let s=TvrMT.data.dyn.snippets.cache[e],r=s.meta&&t.obj_length(s.meta)?JSON.stringify(p.getTotalScriptDeps(s)):"",o=_?e+s.value:e+","+s.aspect+","+s.name+","+r+","+s.value;w[e]={index:a,matchString:o,Type:s.aspect,ID:e,Packages:r,Snippet:s.value},x+=o}})),o=(_?x:C+m+h+y+x).match(l)}if(d)o&&t.updateObject(c,[e.section_key,e.selector_key,r],{match:o[0]});else if(o){if(M)M.affecting_selectors&&I.push({pg:"code",property:"css",label:b});else{if(T&&j||!b.match(l)||I.push({pg:"code",property:"css",label:n?'<span class="mt-search-code">'+t.embolden_matched_text(b,i)+"</span>":b}),s.styles)for(var E=Object.keys(s.styles),P=0;P<E.length;P++){var F=E[P],L=s.styles[F];for(var A in L)if(L.hasOwnProperty(A)&&"css"!==A){var q=t.checkObject(L,[A,"value"])||"",R=t.checkObject(L,[A,"unit"])||"",N=t.prop_to_cssf(A),$=void 0;if(Array.isArray(q))if("html"===F){let e=[],t=q.reduce(((t,a,s)=>(null!==a&&(e.push(s),t.push(a)),t)),[]);q=t.join(", "),$=e[0]}else q=q.join(" ");t.isNumeric(q)||(R="");var H=N+": "+q+R,U=t.embolden_matched_text(H,i);n&&(U=S.color_code_property_value(U)),H.match(l)&&I.push({index:$,pg:F,property:A,cssf:N,label:U,declaration:H})}}if(!I.length){var V=C.match(e.settings.wholeLineRegex);if(V){var z=V[0].trim();parseInt(S.pref.css_important)&&(z=z.replace(" !important;","")),I.push({pg:"code",property:"css",label:S.color_code_property_value(t.embolden_matched_text(z,i))})}}x&&Object.entries(w).forEach((([e,a])=>{if(a.matchString.match(l)){let e="";Object.entries(a).forEach((([a,s])=>{"matchString"!==a&&"index"!==a&&""!==s&&(e+=`<span class="mt-search-property">${a}</span><span class="mt-search-value">${t.escapeHTML(s)}</span>`)})),I.push({pg:"html",property:"snippet",index:a.index,label:'<span class="mt-search-code snippet-search-results">'+t.embolden_matched_text(e,i)+"</span>"})}}))}if(I.length||!M&&!j&&y.match(l)){for(P=0;P<I.length;P++){var W=I[P];let e=void 0!==W.index?' data-index="'+W.index+'"':"";O+='<div class="mt-search-entry" data-pg="'+("html"===W.pg&&!TvrMT.data.dyn.ui_config.supportContent||"html"!==W.pg&&!TvrMT.data.dyn.ui_config.supportGUICSS?"code":W.pg)+'" data-property="'+W.property+'" data-mq_key="'+r+'"'+e+">"+W.label+"</div>"}D+='<div class="mt-search-mq mt-search-entry" data-pg="code" data-property="css" data-mq_key="'+r+'">'+t.embolden_matched_text(y,i)+"</div>"+O}!I.length&&"all-devices"!==r&&j||t.updateObject(c,[e.section_key,e.selector_key,r],{data:I,html:D})}},color_code_property_value:function(e){var t=e.split(":");return t[0]='<span class="mt-search-property">'+t[0]+"</span>",t[1]='<span class="mt-search-value">'+t[1]+"</span>",t.join(":")},maybe_apply_search_results_to_item:function(e,a,s){if(S.search_filter){var r=t.checkObject(S.search_filter,["searchMatches",e.section_key,e.selector_key]);if(r){for(var o=Object.keys(TvrMQsCombined),n="",i=0;i<o.length;i++){var l=o[i],c=t.checkObject(r,[l,"html"]);c&&(n+=c)}a.find("> .item-row").append('<div class="search-results-area">'+n+"</div>"),S.maybe_change_item_name_highlight(a,s)}else a.addClass("search-excluded")}},maybe_change_item_name_highlight:function(e,a,s){var r=e.find(".name-text").first();s?r.html(a):S.search_filter&&a.match(S.search_filter.searchRegex)&&r.html(t.embolden_matched_text(a,S.search_filter.searchText))},search_entry_clicked:function(e,a){if(a=a||S.get_meta(e,"selector")){var s=e.data(),r=s.mq_key,n=s.pg,l=s.property,c=S.is_cur("selector",a.selectorID),d=n!==S.pref.pg_focus,_=!1,u=a.tabSlug;if(S.pref.pg_focus=n,void 0!==s.index){let e=a.selectorM.find("input.selector-multi-key-"+n),r=S.pref.lastMultiTab[n]?.index,o=i.get_selector_data(a,"all-devices").data;parseInt(r)!==parseInt(s.index)&&(t.updateObject(o,["multi_key",n,s.index]),e.val(s.index),S.pref.lastMultiTab[n].index=s.index,_=!0,S.skipTabAdjustCheck=!0)}if(c||S.tvr_iterate_selectors_v(a.selectorM),u!==r)S.mq_tab_pressed(S.stat.res.find(".mq-tab-"+r));else if((d||_)&&(S.trigger_pg_icon_click(n),_)){let e=S.get_pg_meta();if(e){const{action:t,aspect:a}=p.getFieldValues(e.groupTab,e,!1);p.updateTabData(e,{action:t,aspect:a})}}"html"!==n&&o.go_to_ui_property(n,l,s.index)}},open_close_all_settings:function(t){S.stat.settingsMenu.find(".mt-expandable-heading").each((function(){let a="open"===t?"addClass":"removeClass";e(this)[a]("expanded")}))},open_close_all_folders:function(t,a,s){S.stat.mainMenu.find(".folder-icon").each((function(){var r=e(this),o=S.get_meta(r,"section"),n=r.hasClass("on");a?!S.search_filter||S.search_filter.searchMatches[o.sectionSlug]||o.sectionH.match(S.search_filter.searchRegex)?(o.sectionM.removeClass("search-excluded"),S.maybe_change_item_name_highlight(o.sectionM,o.sectionH)):o.sectionM.addClass("search-excluded"):S.maybe_change_item_name_highlight(o.sectionM,o.sectionH,!0),(n&&"close"===t||!n&&"open"===t)&&o.sectionSlug!==s&&S.toggle_folder(r)}))},maybe_show_current_folder_item_view:function(){if(S.selInFocusID&&!S.search_filter){var e=S.get_selector_in_focus(),t=e.sectionM.find("> .sec-row .folder-icon");t.hasClass("on")||(S.toggle_folder(t),e=S.get_selector_in_focus()),S.scrollIntoView(S.folders_scrollable_area(),e.selectorM)}},scrollIntoView:function(e,a,s=0){t.scroll_to({scrollDiv:e,offset:t.getElPosRelToContainer(a,e)+s})},toggle_folder:function(e,a){t.startT(arguments);var s=S.get_meta(e,"section");s.sectionM.find("> .sec-row .folder-icon").hasClass("on")?S.close_folder(s,a):S.open_folder(s,a),t.endT(arguments)},open_folder:function(e,t){t||this.load_folder_menu_selectors(e),e.sectionM.addClass("is-open").find("> .sec-row .folder-icon").addClass("on"),e.sectionM.find("> ul.selector-sub").addClass("show")},close_folder:function(e){this.unload_folder_menu_selectors(e),e.sectionM.removeClass("is-open").find("> .sec-row .folder-icon").removeClass("on"),e.sectionM.find("> ul.selector-sub").removeClass("show")},load_folder_menu_selectors:function(e){var t=e.sectionM.find(".selector-sub"),a=S.load_selector(e,{items:["selectorM"],loadingAllMenuSelectors:1});return t.html(""),t.append(a),S.js_check_values({},S.get_meta(e.sectionM,"section")),a},unload_folder_menu_selectors:function(e){var t=e.sectionM.find(".selector-sub").children("li");S.menuSelInFocusID&&(t=t.not("#"+S.menuSelInFocusID)),t.remove()},unload_all_option_selectors:function(){t.startT(arguments),S.stat.opts.find("ul.selector-sub").find("> li:not(#"+S.selInFocusID+")").remove(),t.endT(arguments)},update_editor_refs:function(e,a,s,r,o,n){return t.startT(arguments),!1},dom_replacements:function(a,s,r,o,n,i,l,c,d,_,u,f){if(t.startT(arguments),"section"==s&&(r.find("input, textarea.property-input").each((function(a){var s=e(this);t.hasValue(s.attr("name"))&&s.attr("name",s.attr("name").replace("tvr_mcth["+o+"]","tvr_mcth["+n+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+n+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+n+"]"))})),r.find(".section-name .name-text").text(i),r.find(".section-data-label").val(i),r.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(r).each((function(){var t=e(this);t.attr("id",t.attr("id").replace(o,n))}))),"selector"==s&&(r.find(".selector-name").attr("title",t.regular_escape_quotes(_)),r.find(".selector-name .name-text").text(d),r.find(".selector-label").val(d+"|"+_),"#mt-no-element"!==_)){let e=p.attemptXPathConversion(_);r.find(".selector-xpath").val(e),"selector_section"!==o&&t.updateObject(S.uiData,[o,l,"xpath"],e)}if("group"==s&&(r.removeAttr("id"),r.attr("class",r.attr("class").replace("property-fields-all-devices","property-fields-"+u)),"all-devices"!=u&&r.find("input.property-input, textarea.property-input, input.disabled-tracker, input.chained-tracker, input.post-sel-css, input.post-sel-data, input.hidden-input-tracker").each((function(t){var a=e(this);a.attr("name",a.attr("name").replace("tvr_mcth","tvr_mcth[non_section][m_query]["+u+"]"))})).end().find("div.property-tag, div.subgroup-tag, pre.custom-css-pre").each((function(){var t=e(this);t.attr("id",t.attr("id").replace("-all-devices","-"+u))}))),"selector"!==s&&"group"!==s||(r.find("input, textarea.property-input").each((function(a){var s=e(this);t.hasValue(s.attr("name"))&&(s.attr("name",s.attr("name").replace("tvr_mcth["+o+"]["+l+"]","tvr_mcth["+n+"]["+c+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+n+"]["+c+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+n+"]["+c+"]")),f&&s.attr("name",t.replace_variable_name_attr(s.attr("name"),f)))})),r.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(r).each((function(){try{var t=e(this),a=t.attr("id");a&&t.attr("id",a.replace(o+"-"+l,n+"-"+c))}catch(e){}})),"selector"===s?S.beforeInsertSelectorDomTemplate(r):"group"===s&&S.beforeInsertGroupDomTemplate(r)),"dyn_item"==s){var g=o,m=n,v=i;r.attr("id",r.attr("id").replace(g,m)),r.find("input, textarea").each((function(){var t=e(this);t.attr("name",t.attr("name").replace("["+g+"]","["+m+"]"))})),r.find(".script-display_name, .mquery-label").val(v),r.find(".name-text").text(v)}return t.endT(arguments),r},beforeInsertSelectorDomTemplate(e){S.beforeDOMViewChange()},beforeInsertGroupDomTemplate(e){if("html"===S.pref.pg_focus){if(parseInt(S.pref.mt_rich_text)){let t=e.find("#rich-text-toggle");t.length&&t.addClass("on").attr("title",t.data("neg"))}if(parseInt(S.pref.show_snippet_adv)){let t=e.find("#toggle-snippet-adv");t.length&&(t.addClass("on").attr("title",t.data("neg")),e.find(".mt-snippet-footer").css("max-height","none"))}}},add_section:function(a,s,r){t.startT(arguments);a||(a=TvrLang.untitled_folder),a=t.resolve_unique_name(a,e("#tvr-menu"),".section-name");var o=S.dom_replacements(!1,"section",e(S.templates.sectionM).add(S.templates.section),"selector_section",t.convert_to_param(a),a);e("#tvr-options").append(o[1]);var n=e("#tvr-menu");n.append(o[0]);var i=n.find("li.section-tag").filter(":last"),d=S.get_meta(i,"section");i.hide().fadeIn("fast",(function(){var t=e("#section-count-state");S.update_count(t,"add",1,"section")}));var _=!1;S.applyLogicToFolder&&(u.setFolderLogicHiddenInputs(d,S.applyLogicToFolder),u.hasGlobalCondition(S.applyLogicToFolder.expr)||d.sectionM.addClass("item-conditional"),t.updateObject(S.pref.asset_loading,["conditional",d.sectionSlug],1),S.update_cur_item_apply_state(d,"section"),_=S.applyLogicToFolder,S.applyLogicToFolder=null);var p=l.dom_to_data({M:d,domDepth:"section",return:"mtData"});return s&&(S.draftFolders.push(d.sectionSlug),S.uiData[d.sectionSlug].this.logic=_,_&&_.expr&&u.updateDraftFolderInSession({slug:d.sectionSlug,expr:_.expr})),S.refresh_sortable(),t.scroll_to({scrollDiv:S.folders_scrollable_area(),bottom:!0}),p=c.user_action(p,{items:[a],val:a,icon:"mtif-add"}),S.close_context_menu({filter:".cm-add-folder-options"}),u.maybeAutoSortSection("dom",d,p),s||r||(u.maybeAddLogicAdjustedFlag(d.sectionSlug,p),c.ajax_save_settings({settings:p})),t.endT(arguments),a},folders_scrollable_area:function(){return S.stat.mainMenu.children(".menu-scrollable")},action_rename_section:function(e,a,s){t.startT(arguments),a=a||S.get_meta_for_context(e,"section","folder-popup"),s=s||e.closest(".edit-section-form").find(".edit-section-label-input").val();var r={};if(t.convert_to_param(s)===a.sectionSlug)r.newName=a.sectionSlug,r.newNameHuman=s;else if(!(r=t.new_name_checks(s,"folder")))return!1;return S.rename_section_updates(a,r,e)},rename_section_updates:function(t,s,r,o){var n=t.sectionM.find("input.section-data-label").val(),l=s.newName,d=s.newNameHuman,_=t.sectionSlug,u=t.sectionM.add(t.section);S.iframeEditing()&&(u=u.add(e(a.get_style_nodes(t))));var f=S.is_cur("section",_);if(S.dom_replacements(t,"section",u,_,l,d),t=S.get_meta(e("#strk-"+l),"section"),f&&S.update_global_vars(S.get_meta(t.section.find("li.in-focus"),"selector")),o)return!1;S.logicTextareaChanged||S.close_context_menu({filter:".cm-edit-folder-options"}),S.context_menu_data&&".cm-edit-folder-options"===S.context_menu_data.filter&&(S.context_menu_data.M=t),p.maybeUpdateAmenderModKeys(_,l,"section");var g=i.modify_main_js_object("rename",{},{rebuild:!0,callbackDepth:["section"],maxDepth:"section",targetDepth:"section",targetSection:_,new_key:l,new_label:d}),m="";if(n!==d&&(m+=TvrLang.previous_name+": "+n+"\n",m+=TvrLang.new_name+": "+d),S.updateFolderLoading("rename",_,{slug:t.sectionSlug}),!r)return{M:t,settings:g};g=c.user_action(g,{items:["section"],val:S.title(r),M:t,valTT:m,icon:"edit-icon tvr-icon"}),c.ajax_save_settings({settings:g})},copy_section:function(s){t.startT(arguments);var r=S.get_meta_for_context(s,"section");S.maybe_save_draft_selector_before_action(r,"section","copy"),c.log_action(r.sectionM,"copy");var o=r.sectionSlug,n=r.sectionH,l=t.resolve_unique_name(r.sectionH,e("#tvr-menu"),".section-name","Copy"),d=t.convert_to_param(l),_=!1,p=[r.sectionM[0],r.section[0]];S.iframeEditing()&&(_=a.get_style_nodes(r),p=p.concat(_));var f=S.dom_replacements(r,"section",S.proper_clone(e(p)),o,d,l);f=S.reset_copied_active_classes(f),r.sectionM.after(f[0]),r.section.after(f[1]),S.iframeEditing()&&a.insertCopiedStyleNodes(_,f);var g=i.modify_main_js_object("copy",{},{M:r,targetDepth:"section",maxDepth:"section",origSlug:o,origHuman:n,newSlug:d,newHuman:l});g=i.reorder_after_copy(g,r.sectionM,!0);var m=e("#section-count-state"),v=r.sectionM.find("span.selector-count-state").attr("rel");S.update_count(m,"add",1,"section",v),c.unlog_action(r.sectionM,"copy"),t.hasValue(S.selInFocusID)&&S.update_prev_next_sel_buttons(S.selInFocusID),S.refresh_sortable(),g=c.user_action(g,{items:["section"],val:S.title(s),M:r,valTT:l,icon:s.attr("class")}),u.maybeAddLogicAdjustedFlag(r.sectionSlug,g),c.ajax_save_settings({settings:g}),t.endT(arguments)},delete_section:function(e,a){t.startT(arguments);var s=S.get_meta_for_context(e,"section");if(c.action_in_prog(s.sectionM,"delete")||c.action_in_prog(s.sectionM,"all-sels-loading"))return!1;if(t.obj_length(S.uiData[s.sectionSlug],{exclKey:"this"})>0&&!confirm(tvrsprintf(TvrLang.delete_folder_confirm,s.sectionH)))return!1;c.log_action(s.sectionM,"delete"),s.sectionM.fadeOut("fast",(function(){S.action_delete_section(s,a,e)})),t.endT(arguments)},action_delete_section:function(s,r,o){var n=s.sectionM.find("span.selector-count-state").attr("rel");S.update_count(e("#section-count-state"),"subtract",1,"section",n);var l=t.hasValue(S.selInFocusID)&&S.is_cur("section",s.sectionSlug);if(l){var d=S.itemScan("selector","next","getID",s.sectionSlug);d||(d=S.itemScan("selector","prev","getID",s.sectionSlug))}s.section.remove(),s.sectionM.remove(),!a||a.edit_style_nodes(s,"delete");var _=i.modify_main_js_object("delete",{},{rebuild:!0,maxDepth:"section",targetDepth:"section",targetSection:s.sectionSlug});S.after_style_options_deleted("section"),S.close_context_menu({filter:".cm-edit-folder-options"}),l&&!r&&d&&S.tvr_iterate_selectors_v(!1,d,{doNotBringStylesTop:1}),d||S.update_prev_next_sel_buttons(!1),r||(_=c.user_action(_,{items:["section"],val:S.title(o),M:s,icon:o.attr("class")}),u.maybeAddLogicAdjustedFlag(s.sectionSlug,_),S.updateFolderLoading("delete",s.sectionSlug),c.ajax_save_settings({settings:_}))},updateFolderLoading:function(e,t,s){let r=!!a&&a.getMTDynFrontData().folderLoading;if(r&&void 0!==r[t])switch(e){case"delete":delete r[t];break;case"rename":r[s.slug]=r[t],delete r[t]}},toggle_folder_add_options:function(e){S.toggle_context_menu({$clicked:e,filter:".cm-add-folder-options",relatedto:"folders",offsetSpacingLeft:0,noWidthOffset:!0,after_open:function(e){e.$content.find("input.add-section-label-input").focus()},after_close:function(e){e.$content.find("input.add-section-label-input").val("")}})},toggle_folder_more_options:function(e){var a=e.data("level"),s=e.parent().hasClass("current-item-actions"),r=s?S.get_selector_in_focus():S.get_meta(e,a);r[a+"M"];"section"===a?S.toggle_context_menu({M:r,$clicked:e,filter:".cm-edit-folder-options",relatedto:"folders",isCurrentItem:s,offsetSpacingTop:0,widthEstimate:560,heightEstimate:485,before_open:function(e){(S.retargetSelector||S.draftSelector.atts.id)&&S.save_draft_selector(S.retargetSelector,!0),e.$content.find("input.edit-section-label-input").val(r.sectionH),S.ensure_correct_disabled_state(r,a,e);let t=S.uiData[r.sectionSlug]?S.uiData[r.sectionSlug].this.logic:void 0;t?u.updateLogicFields("loadSettings",e.$content,t):u.reset_logic_fields(e.$content)},after_close:function(e){e.$content.find("input.selector-css-textarea, input.selector-name-input").val(""),u.reset_logic_fields(e.$content)}}):S.toggle_context_menu({M:r,$clicked:e,filter:".cm-selector-options",relatedto:"folders",widthEstimate:400,heightEstimate:351,before_open:function(e){S.update_edit_selector_fields(r,a,e)}}),t.clearSelection(S.stat.win,S.stat.doc)},draftInProgress:function(){return S.draftSelector.atts.id||S.retargetSelector},binary_button_clicked:function(e){var a=!!parseInt(e.attr("rel")),s=e.closest(".mt-binary-buttons"),r=s.children('input[type="checkbox"]').first(),o=!s.hasClass("on"),n=a===o,i=s.data(),l=i.run;if(n&&(i.toggleFeature&&S.toggle_feature(s),o?(s.addClass("on"),r.prop("checked",!0)):(s.removeClass("on"),r.prop("checked",!1))),l&&(n||s.data("always-run"))){let a=l.split("."),r=t.checkObject(TvrMT,a);if(r){"autoFolderOptions"===a[a.length-1]?r(e,s.hasClass("on")?"page":"global",n):r(e,o)}}},edit_selector_fields_showing:function(){return S.context_menu_data&&".cm-selector-options"===S.context_menu_data.filter},update_edit_selector_fields:function(e,t,a){a.$content.find("input.selector-name-input").val(e.selectorH),a.$content.find("input.selector-css-textarea").val(e.selectorCode),S.ensure_correct_disabled_state(e,t,a),S.generate_selector_variations(a)},ensure_correct_disabled_state:function(e,a,s){var r=s.$content.find(".manage-"+a+"-icons").find(".disabled-toggle"),o=r.prev(".disabled-tracker"),n=S.is_dis(e[a+"M"]);r.removeClass("active"),t.isDomEl(o)&&o.remove(),n&&S.input_icon_toggle(r,!1,!0)},toggle_editor_options:function(e){S.toggle_context_menu({$clicked:e,filter:".cm-editor-options",offsetSpacingLeft:0,noWidthOffset:!0})},toggle_responsive_tab_options:function(e){S.toggle_context_menu({$clicked:e,filter:".cm-responsive-tab-options",offsetSpacingLeft:(e.parent().outerWidth()+2-e.outerWidth())/2*-1,offsetSpacingTop:30,noWidthOffset:!0,before_open:function(t){var a=e.closest(".mt-tab"),s=a.attr("rel"),r=TvrMQsCombined[s];t.$content.find(".edit-responsive-tab-label-input").val(r.label),t.$content.find(".edit-responsive-tab-query-input").val(r.query),"all-devices"===s?t.$content.addClass("all-devices-tab-actions"):t.$content.removeClass("all-devices-tab-actions");var o=t.$content.find(".disabled-toggle");a.hasClass("item-disabled")?o.addClass("active"):o.removeClass("active"),t.mq_key=s,t.Tab=r,t.M=S.get_selector_in_focus()}})},update_single_responsive_tab:function(t){var a=S.context_menu_data,s=a.$content.find(".edit-responsive-tab-label-input").val(),r=a.$content.find(".edit-responsive-tab-query-input").val(),o=e("#mqs-"+a.mq_key);o.find(".mquery-label").val(s),o.find(".mquery-query").val(r),c.save_media_queries()},selector_checks_values:function(e,a,s,r){t.startT(arguments);var o=S.strip_beyoned_brace(e,"name"),n=TvrLang.untitled,i={};return""===o&&(o=n),t.isNumeric(o)?(alert("Plain numbers are not permitted as names. Please use some letters too."),!1):(t.convert_to_param(o)===s?(i.newName=s,i.newNameHuman=o):(i.newNameHuman=S.ensure_unique_name(o,!1,"create-new",!1,r),i.newName=t.convert_to_param(i.newNameHuman)),a?(i.code=a,t.endT(arguments),i):(alert(TvrLang.enter_css),!1))},show_hide_sel_custom:function(e,a){t.startT(arguments),S.analyse_sel_code(e).custom_styles?a.addClass("custom-styles"):a.removeClass("custom-styles"),t.endT(arguments)},analyse_sel_code:function(e){t.startT(arguments);var a=[];if(e.indexOf("{")>=0){a.custom_styles=!0;var s=e.split("{");a.code=s[0]}else a.custom_styles=!1,a.code=e;return t.endT(arguments),a},add_selector:function(a,s,r,n){t.startT(arguments),n=n||{},a=a||S.get_meta_for_context(s,"section","folder-popup");var d=s.closest(".mt-folder-form"),_=S.selector_checks_values(d.find(".selector-name-input").val(),S.strip_beyoned_brace(d.find(".selector-css-textarea").val()),!1,a.sectionSlug);if(!_)return!1;a.sectionM.hasClass("is-open")||S.open_folder(a);var p=_.newName,f=S.totalSels,m=S.dom_replacements(a,"selector",e(S.templates.selectorM).add(S.templates.selector),"selector_section",a.sectionSlug,a.sectionM.find(".name-text").text(),"selector_css",p,_.newNameHuman,_.code),v=e(m[1]),h=S.pref.pg_focus;i.maybe_add_group_template(v,a.sectionSlug,_.newName,_.newNameHuman,_.code,a.tabSlug,h),g.editor_and_gui()&&"code"!==h&&i.maybe_add_group_template(v,a.sectionSlug,_.newName,_.newNameHuman,_.code,a.tabSlug,"code"),S.checkItemTrialDisabled(f,v),a.sectionM.find(".selector-sub").append(m[0]),a.section.find(".selector-sub").append(v),S.update_count(a.sectionM.find(".selector-count-state"),"add",1,"selector",""),a=S.get_meta(a.section.find(".selector-tag").last(),"selector");var b=l.dom_to_data({M:a,domDepth:"selector",keepAsDraft:r,clean:{selector:[["styles"],[h]]},cleanMaxDepth:"selector",skipSassCompile:!0,return:"mtData"});return r&&(S.draftSelector.atts=S.selector_key_atts(a),i.updateObjectAndSavePackage(b.savePackage,[{action:"append",trail:[a.sectionSlug,p],key:"isDraft",data:1}])),b=i.run_global_scans(b,["update_indexes"]),i.updateObjectAndSavePackage(b.savePackage,{action:"array_merge_recursive_distinct",trail:[a.sectionSlug,p],data:{jsu:S.jsuVersion,abs_index:f}}),n.action="add_draft_selector",n.elementAlreadySelected=1,S.tvr_iterate_selectors_v(a.selectorM,!1,n),S.refresh_sortable(),n.switchSelVariation||S.close_context_menu({filter:".cm-edit-folder-options"}),o.maybe_resume_editor_focus(),c.user_action(r?S.draft_user_action.new:b,{items:["selector"],val:S.title(s),M:a,pathTT:!0,icon:"mtif-add"}),u.maybeAutoSortSelector("dom",a,b),r?S.scrollIntoView(S.folders_scrollable_area(),a.selectorM):c.ajax_save_settings({settings:b}),t.endT(arguments),!0},load_selector:function(a,s){t.startT(arguments);var r=[];if(s.items){var o=!1,n=s.pg_focus?s.pg_focus:S.pref.pg_focus,c=g.editor_and_gui()&&"code"!==n;if(s.replaceExisting){var d=this.get_code_meta(a);if(t.isDomEl(d.$property_fields)){if("code"===n)return a.selector.find(".group-tag").not(d.$group).remove(),a.selector;o=d.$property_fields.detach()}}for(var _=0;_<s.items.length;_++){var u=s.items[_],p="selectorM"===u?"selector":"property",f="#"+("selectorM"===u?"strk":"opts")+"-"+a.sectionSlug,m=f+"-"+a.selectorSlug,v=e(m);if(!v.length||s.replaceExisting){a.groupSlug=n;var h={M:a,load:"selector",templateKey:u,maxDepth:p,callbackDepth:["selector","group","property"]},b=s.mq_key?s.mq_key:S.get_mq_focus();if("selector"===u?"all-devices"===b?(h.recurse_key=["important"],h.mq_key=b):(h.onlyRecurse=!0,h.mq_key=b):"selectorM"===u&&(h.incRecurse=!1),"selectorM"===u)v=l.data_to_template(a,h);else if("selector"===u){S.stat.styleComponents.html("");var y=S.totalSels,T=i.get_selector_data(a,b).data;T?(v=l.data_to_template(a,h),void 0!==T.abs_index&&(y=T.abs_index)):v=S.dom_replacements(!1,"selector",e(S.templates.selector),"selector_section",a.sectionSlug,!1,"selector_css",a.selectorSlug,a.selectorH,a.selectorCode);var x=v.find(".group-tag-"+n),w=x.find("div.property-fields-"+b);if(!w.length&&(i.maybe_add_group_template(v,a.sectionSlug,a.selectorSlug,a.selectorH,a.selectorCode,b,n),w=x.find("div.property-fields-"+b),"flexbox"===n||"grid"===n)){var k=t.get_js_object_data([a.sectionSlug,a.selectorSlug],"all-devices"),C="flexbox"===n?"flexitem":"griditem";if(t.checkObject(k.data,["pg_"+C])){var M="flexbox"===n?"flexcontainer":"generalgrid";i.flip_flex_or_grid_item_switch(w,w.find(".subgroup-control-"+M),k.levels,C),w.add(S.stat.grid).addClass("show-single-griditem"),"grid"===n&&(S.pref.grid_focus="griditems")}}if("grid"===n){var j=t.get_js_object_data([a.sectionSlug,a.selectorSlug],"all-devices").data,D=S.get_nth_focus(j);x.find(".tab-control-griditems:not(.nth-item-radios):not(.sub-label)").find("input.property-input").each((function(){var a=e(this);a.attr("name",t.replace_variable_name_attr(a.attr("name"),D))})),D&&x.find("span.grid-item-num").text(": "+D)}c&&S.addOrAttachCodeTextarea(v,a,b,o),g.sidebar_showing()&&x.addClass("show"),v.addClass("in-focus"),S.checkItemTrialDisabled(y,v)}s.replaceExisting?e("#"+s.replaceExisting).replaceWith(v):e(f).find(".selector-sub").append(v)}r[_]=v}}return t.endT(arguments),r.length>1?r:r[0]},loadOrReloadEditor:function(){if(!S.pref.show_code_editor&&("code"===S.pref.pg_focus||g.editor_and_gui())&&!S.editor_to_gui_running){var e=S.get_selector_in_focus();if(e){var a=e.selector,s=e.tabSlug,r=S.detachCodeTextareaIfLoaded(e);S.addOrAttachCodeTextarea(a,e,s,r),o.update_adaptable_editor({M:e,directContent:l.resolve_inline_editor_content(e),mode:parseInt(S.pref.allow_scss)?"scss":"css"}),t.action_after_timeout("mt_panel_change",70,{item:g.modify_active_editors,args:[{resize:!0,updateHeight:g.horizontal_only()}]})}}},detachCodeTextareaIfLoaded:function(e){var a=this.get_code_meta(e);return!!t.isDomEl(a.$property_fields)&&a.$property_fields.detach()},addOrAttachCodeTextarea:function(e,t,a,s){s?e.find(".group-tag-code").append(s):i.maybe_add_group_template(e,t.sectionSlug,t.selectorSlug,t.selectorH,t.selectorCode,a,"code")},get_nth_focus:function(e){if(!e){var a=S.getM();e=S.uiData[a.sectionSlug][a.selectorSlug]}var s=t.checkObject(e,["nth_item"]);return!1===s?1:parseInt(s)},getM:function(){return S.get_meta(e("#"+S.selInFocusID),"selector")},strip_beyoned_brace:function(e){return void 0===e?"":(e=e.split("{"))[0]?(e=e[0]).trim():""},getOrCreateFolder:function(a,s){S.totalSels<1&&""===a&&(a=S.default_to_folder());var r=t.convert_to_param(a);if(!t.isDomEl(e("#strk-"+r))){var o=S.add_section(a,s);if(!o)return!1;r=t.convert_to_param(o)}return S.get_meta(e("#strk-"+r),"section")},action_modify_selector:function(s,r,n,d,_,u,f){t.startT(arguments),S.jsDataFunc="action_modify_selector",s=s||S.get_meta_for_context(r,"selector","folder-popup");var g=r.closest(".mt-folder-form"),m=(n=n||{}).switchSelVariation,v=S.selector_checks_values(g.find(".selector-name-input").val(),S.strip_beyoned_brace(g.find(".selector-css-textarea").val()),s.selectorSlug,d?t.convert_to_param(d):s.sectionSlug);if(!v)return t.endT(arguments),S.jsDataFunc=!1,!1;var h=s.selectorM.find(".selector-label").val().split("|"),b=h[0],y=h[1],T=s.selectorSlug,x=y!==v.code,w=v.newName,k=v.newNameHuman,C=s.sectionSlug,M=s.selectorM.add(s.selector);S.dom_replacements(s,"selector",M,C,C,s.sectionH,T,w,k,v.code),M.find("input.color.bound").removeClass("bound").css("display","").next(".sp-replacer").remove(),S.stat.styleComponents.find(".sp-container").remove(),u&&S.pref.pg_focus,p.maybeUpdateAmenderModKeys(C+"-"+T,C+"-"+w,"selector",v.code);var j={keepAsDraft:u,skipSave:f,switchSelVariation:m};n=i.modify_main_js_object("rename",j,{rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:C,targetSelector:T,new_key:w,new_label:k,new_code:v.code,orig_code:y});S.is_cur("selector",s.selectorID)&&S.update_global_vars(S.get_meta(s.section.find("li.in-focus"),"selector"),n),S.iframeEditing()&&!S.doNotReselectRevertedRetargetSel&&a.reposition_overlays({con:"reg"}),s=S.get_meta(s.selectorM,"selector"),n=i.modify_main_js_object("group_to_css",n,{M:s,maxDepth:"group",recurse_key:["m_query"],triggeredFromEditor:_,selCodeChanged:!!x&&{oldCode:y,newCode:v.code},skipSave:f}),_||o.update_adaptable_editor({M:s,directContent:l.resolve_inline_editor_content(s),contentShouldChange:!0}),S.retargetSelector&&!S.retargetSelector.initialModifySavePackage?S.retargetSelector.initialModifySavePackage=e.extend(!0,[],n.savePackage):S.retargetSelector.lastModifySavePackage=e.extend(!0,[],n.savePackage);var D=n.savePackage.length;if(d){t.startT("action_modify_selector new folder");var I=S.getOrCreateFolder(d,u);if(!I)return t.endT(arguments),!1;I.sectionM.find("> .sec-row .folder-icon").hasClass("on")||S.open_folder(I),s.sectionM.find("> .sec-row .folder-icon").hasClass("on")||S.open_folder(s),t.startT("action_modify_selector new folder - dom order"),s=S.get_meta(e("#"+s.selectorMID),"selector"),n=S.get_dom_order(n,s.selectorM,{prevSec:"",newSec:"",orig_order:["this"],new_order:["this"],map:[]},!1,!0),s.selectorM.detach().appendTo(I.sectionM.find("ul.selector-sub")),s=S.selector_received({},{item:s.selectorM,draftSelectorFolderCreated:1,doNotUpdateSelectorSuggestions:1}),n=S.get_dom_order(n,s.selectorM,S.menuOrder,!0,!0),t.endT("action_modify_selector new folder - dom order"),S.retargetSelector&&(S.retargetSelector.initialFolderMoveSavePackage?S.retargetSelector.lastFolderMoveSavePackage=n.savePackage.slice(D):S.retargetSelector.initialFolderMoveSavePackage=n.savePackage.slice(D)),t.endT("action_modify_selector new folder")}m||S.close_context_menu({filter:".cm-selector-options"});var O="",E=TvrLang.selector_modified,P="mtif-edit";S.retargetSelector&&u&&(b=S.retargetSelector.selectorH,y=S.retargetSelector.selectorCode,T=S.retargetSelector.selectorSlug),b!==k&&(O+=TvrLang.previous_name+": "+b+"\n",O+=TvrLang.new_name+": "+k),y!==v.code&&(O+=O?"\n":"",O+=TvrLang.previous_code+": "+y+"\n",O+=TvrLang.new_code+": "+v.code);var F=n;return u&&(S.retargetSelector?(t.checkObject(S.uiData,[s.sectionSlug,s.selectorSlug,"isDraftRetarget"])||i.updateObjectAndSavePackage(n.savePackage,[{action:"append",trail:[s.sectionSlug,s.selectorSlug],key:"isDraftRetarget",data:S.retargetSelector}]),F=S.draft_user_action.retarget):(S.draftSelector.atts=S.selector_key_atts(s),O=TvrLang.selector_created+": "+k,P="mtif-add",E=TvrLang.selector_created,F=S.draft_user_action.new)),S.dontLogSelectorChange||c.user_action(u?F:n,{items:["selector"],val:E,M:s,valTT:O,pathTT:!0,icon:P}),u||f||c.ajax_save_settings({settings:n,timerName:"modify_selector_"+C+"_"+T}),t.endT(arguments),S.jsDataFunc=!1,!0},proper_clone:function(e){t.startT(arguments);var a=e.clone();return a.find("div.sp-replacer, div.sp-container").remove(),a.find("input.color.bound").removeClass("bound"),S.colorpicker_bind(a),t.endT(arguments),a},reset_copied_active_classes:function(t){return t.each((function(){var t=e(this);t.removeAttr("copy-in-prog").removeClass("in-focus").find("li.in-focus").removeClass("in-focus"),t.find(".toggle-folder-more-options").removeClass("on")})),t},maybe_save_draft_selector_before_action:function(e,t,a){if(S.retargetSelector||S.draftSelector.atts.id){var s=S.retargetSelector||S.draftSelector.atts;("selector"===t&&e.selectorID===s.id||"section"===t&&e.sectionSlug===s.sectionSlug)&&S.save_draft_selector(S.retargetSelector,!0)}},copy_selector:function(a){var s=S.get_meta_for_context(a,"selector"),r=S.load_selector(s,{items:["selector"]});s=S.get_meta(r,"selector"),S.maybe_save_draft_selector_before_action(s,"selector","copy");var o=s.selectorSlug,n=s.selectorH,l=t.resolve_unique_name(s.selectorH,s.sectionM,".selector-name","Copy"),d=t.convert_to_param(l),_=S.dom_replacements(s,"selector",S.proper_clone(e([s.selectorM[0],s.selector[0]])),s.sectionSlug,s.sectionSlug,n,o,d,l,s.selectorCode);_=S.reset_copied_active_classes(_),s.selectorM.after(_[0]),s.selector.after(_[1]);var u=i.modify_main_js_object("copy",{},{M:s,targetDepth:"selector",maxDepth:"selector",origSlug:o,origHuman:n,newSlug:d,newHuman:l});u=i.reorder_after_copy(u,s.selectorM,!0),u=i.modify_main_js_object("update_section_css",u,{M:s,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),S.update_count(s.sectionM.find(".selector-count-state"),"add",1,"selector",""),t.hasValue(S.selInFocusID)&&S.update_prev_next_sel_buttons(S.selInFocusID);var p="#strk-"+s.sectionSlug+"-"+d;S.tvr_iterate_selectors_v(e(p),p,{action:"copy",doNotBringStylesTop:1}),u=c.user_action(u,{items:["selector"],val:S.title(a),M:s,pathTT:!0,valTT:l,icon:a.attr("class")}),c.ajax_save_settings({settings:u})},delete_selector:function(e,a){t.startT(arguments);var s=S.get_meta_for_context(e,"selector");if(c.action_in_prog(s.selectorM,"delete")||c.action_in_prog(s.selectorM,"data-load"))return!1;c.log_action(s.selectorM,"delete"),S.close_context_menu({filter:".cm-selector-options"}),s.selectorM.fadeOut("fast",(function(){S.action_delete_selector(s,a,e)})),t.endT(arguments)},action_delete_selector:function(e,a,s){var r,n=t.hasValue(S.selInFocusID)&&S.is_cur("selector",e.selectorID);S.update_count(e.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),n&&((r=S.itemScan("selector","prev","getID",e.sectionSlug,e.selectorSlug,{incCurrentSection:!0}))||(r=S.itemScan("selector","next","getID",e.sectionSlug,e.selectorSlug,{incCurrentSection:!0}))),e.selector.remove(),e.selectorM.remove();
//!MTF || MTF.edit_style_nodes(M, 'delete');
var l=i.modify_main_js_object("delete",{},{rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:e.sectionSlug,targetSelector:e.selectorSlug});l=i.modify_main_js_object("update_section_css",l,{M:e,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),S.after_style_options_deleted("selector"),l=S.js_check_values(l,e),n&&r&&!a&&S.tvr_iterate_selectors_v(!1,r,{doNotBringStylesTop:1}),r||S.update_prev_next_sel_buttons(!1),o.ace_sync_details={},a||(l=c.user_action(l,{items:["selector"],val:S.title(s),M:e,pathTT:!0,icon:s.attr("class")}),c.ajax_save_settings({settings:l}))},remove_property_group:function(e,a){t.startT(arguments);var s=e.group.find("div.property-fields-"+a);return s?(s.remove(),t.endT(arguments),!0):(t.endT(arguments),!1)},update_accordion:function(e){var s=e.parent(),r=s.closest(".accordion-wrapper").find(".accordion-heading").not(e),o=s.hasClass("property-menu");r.removeClass("expanded"),o&&(S.pgInFocusWiz=s.attr("id").replace("comp-",""),t.isDomEl(a.triggerEl)&&a.getAndUpdateCompStyles(!0,!0,void 0,"obj"))},toggle_expandable_panel:function(e){var a="open",s=e.attr("rel"),r=S.pref.layout.right.expanded_settings;e.hasClass("accordion-heading")&&S.update_accordion(e),e.hasClass("expanded")?(e.removeClass("expanded"),a="close"):e.addClass("expanded");var o=t.in_array(s,r);"open"===a?!1===o&&r.push(s):r.splice(o,1),g.save_layout_preferences()},trigger_pg_icon_click:function(e){e=e||S.pref.pg_focus,S.dontSavePgFocus=!0,S.pg_icon_pressed(S.stat.css_icons.find("ul.styling-option-icons").find(".pg-icon-wrap-"+e)),S.dontSavePgFocus=!1},beforeDOMViewChange(){p.destroyStaleSnippetEditor(),p.tinymce.unbind(),S.cleanTimers()},cleanTimers(){t.cancel_timers(["html_mod_updated","refreshCompAfterDomChange","load_snippet","tinymce_timer_listen","reset_slider_to_computed","tab_switch_deferred","screen_width_adjusted","tinymce_timer_comp_refresh"])},pg_icon_pressed:function(s,r,o){t.startT(arguments);var n=e("#"+S.selInFocusID);if(!t.isDomEl(n))return!1;s=s.closest(".pg-icon-wrap");var i=S.get_mq_focus(),l=s.attr("rel"),d=S.get_meta(n,"selector");if("microthemer-addon"===l)return p.showInstallPopup(".microthemer-addon-content","Install Microthemer addon (free)"),!1;if("html"===l&&!TvrMT.data.dyn.ui_config.supportContent)return p.showInstallPopup(".amender-addon","Install Amender addon (beta)"),!1;S.pref.pg_focus=l;var _=(d=S.ensure_selector_and_pg_loaded(d,r,i,l)).selector.find(".styling-options"),u=S.stat.css_icons.find(".styling-option-icons"),f=l;S.update_tab(_,".group-tag",u,f,".pg-icon-wrap",".pg-focus"),"html"!==l&&"grid"!==l&&"transform"!==l||S.js_check_values({},d),S.after_tab_switch(d,o),g.editor_and_gui()&&g.maybe_adjust_side_options(),t.action_after_timeout("pg_expensive",3,{item:function(e){S.iframeEditing()&&a.get_computed_styles({data:S.curSelCSS,con:"str",M:e}),S.refresh_comp_css()},args:[d]}),S.dontSavePgFocus||c.simple_ajax_request({type:"GET",url:S.ajaxUrl+"&pg_focus="+l}),t.endT(arguments)},ensure_selector_and_pg_loaded:function(e,t,a,s){t||S.load_selector(e,{items:["selector"],replaceExisting:e.selectorID,mq_key:a}).addClass("in-focus");return S.get_meta(S.get_pg_focus_obj(s),"group")},clear_data_level:function(a,s){t.startT(arguments);var r,n=a.attr("data-input-level"),l="pgtab"===n,d=l?"group":n;if(!s){if("tab"===n){let a=e("#"+S.selInFocusID);t.isDomEl(a,!0)&&(s=S.get_meta(a,"selector"))}else s=S.get_meta_for_context(a,d);if(!s)return}var _={M:s,clear:{},clean:{}},u=["styles","pie","pg_chained","pg_flexitem","pg_griditem","ast"];s.selectorSlug;switch(n){case"section":if(r=s.section.find("div.property-tag"),_.clear.section=[!1,u],t.obj_length(S.uiData[s.sectionSlug],{exclKey:"this"})>0)if(!confirm(tvrsprintf(TvrLang.clear_folder_confirm,s.sectionH)))return!1;break;case"selector":S.maybe_save_draft_selector_before_action(s,"selector","clear"),r=s.selector.find("div.property-tag"),_.clear.selector=[u];break;case"tab":var p=s.tabSlug;r=s.selector.find("div.property-fields-"+p).find("div.property-tag"),_.mq_key=p,_.onlyRecurse="all-devices"!==p,_.clear.selector=[u];break;case"group":case"pgtab":case"subgroup":if(_.mq_key=s.tabSlug,"all-devices"===_.mq_key?_.recurse_key=["important"]:_.onlyRecurse=!0,_.clear.selector=[["styles"],[s.groupSlug]],"group"===n||"flexbox"===s.groupSlug)r=S.get_group(s).find("div.property-tag");else{var f=!!l&&a.data("tab-group"),m=l?Object.keys(TvrMT.data.prog.pg_tab_props[s.groupSlug][f]):TvrMT.data.prog.subGroupKeys[s.subgroupSlug];r=S.get_subgroup_or_tabgroup(s,!1,f),_.clear.selector.push(m),S.maybe_add_nth_index_filter(l,f,s,a,_.clear.selector)}"pgtab"===n&&(n="group")}S.clear_fields(r,a,n,s,_),_=i.modify_main_js_object("clear",_,{maxDepth:"selector",dontUpdateSavePackage:!0}),_=i.modify_main_js_object("group_to_css",_,{maxDepth:"group",recurse_key:["m_query"]}),_=i.modify_main_js_object("clean",_,{maxDepth:"selector",clean:_.clear}),_=S.js_check_values(_,s),g.editor_and_gui()&&o.gui_to_editor(!1,s),_=c.user_action(_,{items:[n],val:S.title(a),M:s,pathTT:!0,icon:a.attr("class")}),c.ajax_save_settings({settings:_}),t.endT(arguments)},clear_fields:function(a,s,r,n,i){t.startT(arguments);let l="";a.each((function(){var a=e(this),s=a.prev(".subgroup-tag"),r=a.find("input.property-input, input.mt-supplementary-picker, textarea.property-input"),i=a.find("span.important-toggle"),c=a.hasClass("has-variable-line");if(r.hasClass("mt-snippet-id")&&(l=r.val()),r.val(""),r.hasClass("snippet-textarea")&&(p.updateSnippetEditor({code:"",mode:p.getModeFromAspect(p.getAspect(r.next("pre")))}),p.uiFieldAdjusted(S.get_meta(r,"property"),r)),c&&a.find(".tvr-input-wrap:not(:first-child)").remove(),r.hasClass("color")&&S.clear_spectrum_inputs(S.get_meta(a,"property"),!1),r.hasClass("mt-event-input")&&S.adjust_event_fields(r),"html"!==S.pref.pg_focus&&r.hasClass("tvr-editor-hidden")&&S.is_cur("selector",n.selectorID)){var d=S.stat.adaptableEditor,_=o.eds[d.attr("id")];d.hasClass("ace_editor")&&_&&o.set_editor_content(d,_,{M:n})}if(S.post_edit(r),i.hasClass("active")&&S.input_icon_toggle(i,!0,!0),t.isDomEl(s)){var u=s.find(".chained-toggle");u.hasClass("active")&&S.input_icon_toggle(u,!0,!0)}})),t.endT(arguments)},getReportingStatus:function(e){let t=TvrMT.data.dyn.ui_config.reporting.max,a=S.pref.reporting,s=a.permission,r=s.file,o=s.data,n=s.contact,i=!e&&!r&&!o,l=!e&&parseInt(a.file.sends_today)>=parseInt(t.fileSends),c=!e&&parseInt(a.data.sends_today)>=parseInt(t.dataSends);return{max:t,filePermission:r,dataPermission:o,contactPermission:n,disallowed:i,fileQuotaReached:l?1:0,dataQuotaReached:c?1:0,allQuotaReached:l&&c?1:0,reporting:a}},strip_domain_names:function(e){return e?e.replace(/(https?:)?\/\/[^\/]+/g,""):""},toggle_preview_error_report:function(){let t=e("#toggle-preview-report-data"),a=e("#data-send-preview"),s="show-data-preview";t.hasClass("on")?(a.removeClass(s),t.removeClass("on")):(a.addClass(s),t.addClass("on"),S.update_error_report_preview())},update_error_report_preview:function(){if(S.stat.tvr.hasClass("error_reporting_disabled"))return e("#data-send-preview").find("pre").text("No data will be sent."),!1;S.maybe_send_error_report(!0,e("#data-send-preview").find(".report-data-dump"),{URL:"http://localhost:8080/microthemer/wordpress/wp-content/plugins/microthemer/js/page/frontend.js?v=7.2.3.8&ver=6.2.2",line:635,col:7,file:"frontend.js",source:"Site frontend",error:"Uncaught ReferenceError: cons is not defined",error_key:"frontend.js|635|7|Uncaught ReferenceError: cons is not defined",stack:"ReferenceError: cons is not defined\n    at Object.init_front (/microthemer/wordpress/wp-content/plugins/microthemer/js/page/frontend.js?v=7.2.3.8&ver=6.2.2:635:7)\n    at mt_frontend_setup_vars_and_init (/microthemer/wordpress/wp-content/plugins/microthemer/js/page/frontend.js?v=7.2.3.8&ver=6.2.2:7123:10)"},!0)},maybe_send_error_report:function(t,a,s,r,o){if(t){if(S.stat.tvr.hasClass("error_reporting_disabled"))return alert("Please enable one or more error reporting options to give us permission to send data"),!1;a.removeClass("mt-error-response mt-success-response").addClass("active")}let n=S.getReportingStatus(t);if(n.disallowed||!o&&n.allQuotaReached)return!1;let l=r||o?[s]:S.reportedJSErrors.length?S.reportedJSErrors:S.prevJSerrors.length?S.prevJSerrors:S.JSerrors,d=null,_=null,u=s?s.URL.match(/wp-content\/(plugins|theme)\/([^/]+)/):null;u&&(_=u[1],d=u[2]);let p=l.length?l[0]:null,g=p?p.error:null,m=p?p.stack:null,v=p?p.error_key:null;if(!t&&!o&&p&&!p.URL)return!1;let h=window.navigator.userAgent,b=h.match(/(Windows|Android|Linux|iPhone|iPad|iPod|Mac|UNIX|Googlebot|MSNBot)/),y=h.match(new RegExp(S.browser+"\\/([\\d.]+)","i")),T=y?y[1]:null,x=b?b[1]:null,w={manual:t?1:0,domain:location.host,context:{browser:S.browser,browserVersion:T,op:x,userAgent:h},error_message:g,error_stack:m,error_key:v,vendor:d,vendor_type:_,preview:r?1:0};if(o||r||n.fileQuotaReached||++n.reporting.file.sends_today,!o&&n.dataPermission&&!n.dataQuotaReached&&(t||TvrMT.data.dyn.ui_config.errorsRequiringData[v])&&(!s||S.isMTerror(s.URL))){let e=["options_live","preferences"],a=0,s=n.max[t?"manual":"auto"].bytes;for(let t=0;t<e.length;t++){let r=e[t],o="options_live"===r?c.serialiseJsObject(S.uiData):c.serialiseJsObject(S.download_preferences(!0,!0));if(a+=o.length,s&&a>s)break;w[r]=o}o||r||n.dataQuotaReached||++n.reporting.data.sends_today}if(o){let e=S.get_selector_in_focus();w.isAIFeedback=1,w.options_live=c.serialiseJsObject({vote:o,conversation:f.chatMessages,previousPayload:f.previousPayload,currentSelector:e?i.get_selector_data(e,e.tabSlug).data:null})}else w.status=n,w.reporting=n.reporting;c.simple_ajax_request({url:S.ajaxUrl+"&send_error_report=1",type:"POST",dataType:"json",sendData:w,cbFunction:function(t,a,s){if(a){let a=t.success?"mt-success-response":"mt-error-response";s.removeClass("active").addClass(a),r&&e("#data-send-preview").find("pre").text(t.response)}},cbfArgs:[t,a]}),r||o||(S.reportedJSErrors=[])},external_video_clicked:function(e,t){let a,s=e.closest(".mt-video-thumbs"),r=e.closest(".external-video-thumb"),o=r.data("slug"),n=!0;if(S.pref.external_videos.last_viewed||(S.pref.external_videos.last_viewed={}),S.pref.external_videos.watched||(S.pref.external_videos.watched={}),e.hasClass("external-video-watched-toggle")){a="mt-watched-video";let s=!r.hasClass(a),i=s?e.data("neg"):e.data("pos");s?(r.addClass(a),S.pref.external_videos.watched[o]=1):(t.preventDefault(),r.removeClass(a),delete S.pref.external_videos.watched[o],n=!1),S.refresh_tt(e,i)}n&&(a="mt-last-viewed-video",s.find("a").removeClass(a),r.addClass(a),S.pref.external_videos.last_viewed=r.data("slug")),c.save_multiple_preferences({external_videos:S.pref.external_videos})},largeExportable:{my_props:1,layout:1},download_preferences:function(e,a){let s=TvrMT.data.prog.exportable_preferences,r={};for(let e=0;e<s.length;e++){let t=s[e];a&&S.largeExportable[t]||(r[t]=S.pref[t])}if(e)return r;t.downloadObjectAsJson("microthemer-preferences",r)},update_tab:function(e,a,s,r,o,n,i){t.startT(arguments);var l=s.find(o+"-"+r);(s.find(o).removeClass("active").end().find(n).val(r),l.addClass("active"),i)||(e.find(a+".show").removeClass("show"),e.find(a+"-"+r).addClass("show"),".mq-tab"===o&&e.addClass("show"),".pg-icon-wrap"===o&&e.find(a+"-"+r).find(".property-fields").removeClass("show").end().find(".property-fields-"+S.get_mq_focus()).addClass("show"));t.endT(arguments)},mq_tab_pressed:function(e,a,s,r){t.startT(arguments),S.rulerManuallyAdjusted=!1;var o,i=!0,l="",d=e.attr("rel"),_=S.stat.res.find(".query-tabs");let u=n.get("gutenberg").prevTabNotSynced;if(!r&&n.check_synced_page_builder_responsive_views(d)&&!u)return!1;S.pref.mq_device_focus=d,c.simple_ajax_request({type:"GET",url:S.ajaxUrl+"&mq_device_focus="+(TvrMT.integrate.gutenberg?"all-devices":d)});var p=t.hasValue(S.selInFocusID);if(p){var f=S.get_pg_focus_obj(),g=S.get_meta(f,"group");g=S.ensure_selector_and_pg_loaded(g,a,d,S.pref.pg_focus),i=!1,l=".property-fields",o=S.get_pg_focus_obj()}S.update_tab(o,l,_,d,".mq-tab",".device-focus",i),p&&(S.js_check_values({},g),S.after_tab_switch(g)),t.action_after_timeout("mq_expensive",3,{item:function(e){S.reset_preview_width_for_current_tab(e,!1,s),S.get_local_window_function("reset_mob_previews")()},args:[d]}),t.endT(arguments)},resume_cur_slider_value:function(){},reset_preview_width_for_current_tab:function(e,t,a){e=e||S.get_mq_focus(),S.get_local_window_function("update_iframe_slider")(e,S.mqs[e].min,S.mqs[e].max,t,a)},after_tab_switch:function(e,a){if(t.startT(arguments),a=a||{},"css"!==e&&!S.pref.show_code_editor){var s="styles";"code"===e.groupSlug?(S.stat.tvr.addClass("onlyInlineEditor"),S.onlyInlineEditor=1,s="editor"):(S.stat.tvr.removeClass("onlyInlineEditor"),S.onlyInlineEditor=0),"editor"===s&&!S.pref.dock_editor_left||"styles"===s&&!S.pref.dock_styles_left||a.doNotBringStylesTop||g.update_sidebar_z_indexes(s,"left"),g.adjust_preview_margin_and_save_config({skipPGPress:1,side:"left",skipSave:1});var r=S.iframeEditing()?S.stat.tvr.add(S.stat.fHTML):S.stat.tvr;if("transform"===e.groupSlug&&S.default_to_tab("transform"),"grid"===e.groupSlug){r.addClass("showGridControls"),S.default_to_tab("grid");var n="show-single-griditem";e.group.find(".property-grid").hasClass(n)?S.stat.grid.addClass(n):S.stat.grid.removeClass(n)}else r.removeClass("showGridControls");"code"!==e.groupSlug&&!g.editor_and_gui()||S.editor_to_gui_running||o.update_adaptable_editor({M:e,directContent:l.resolve_inline_editor_content(e),mode:parseInt(S.pref.allow_scss)?"scss":"css"}),"html"===e.groupSlug&&S.updateMultiTabs(e),t.action_after_timeout("tab_switch_deferred",3,{item:function(e){S.maybe_scroll_image_fields(e),S.adjust_scroll_buttons(e,"style")},args:[e]})}if("css"===e){var i=a.$curObj.data("code-type");o.update_adaptable_editor({M:e,directContent:a.$curObj.find("textarea").val(),mode:parseInt(S.pref.allow_scss)&&"css"===i?"scss":i});var c=S.stat.code.find(".save-javascript-button");"css"===i?(S.existingSelRadioUsed||o.resume_editor_cursor_pos_and_select(),c.removeClass("show")):c.addClass("show")}t.endT(arguments)},calculateMaxTabLength(e){if(e.maxLength=e.currentTab+1,e.maxLength<e.minLength&&(e.maxLength=e.minLength),e.groupData)for(const[t,{value:a}]of Object.entries(e.groupData))Array.isArray(a)&&(a[e.currentTab]&&(e.currentTabSet=!0),a.length>e.maxLength&&(e.maxLength=a.length,e.longestKey=t))},maybeAdjustTabIndex(e,t,a){for(let t=0;t<e.maxLength;++t){let s=S.getMultiTabInfo(t,a,e.groupData,!1).attsData;s.action===S.defaultTabValues.html.defaults.action&&s.aspect===S.defaultTabValues.html.defaults.aspect&&e.empty.push(t),s.action===S.pref.lastMultiTab.html.action&&s.aspect===S.pref.lastMultiTab.html.aspect&&(t===e.currentTab&&e.currentTabSet?e.found.unshift(t):e.found.push(t))}e.found.length?e.currentTab=e.found[0]:e.empty.length?e.currentTab=e.empty[0]:e.currentTab=e.maxLength,S.pref.lastMultiTab.html.index=e.currentTab,e.currentTab!==t&&(S.calculateMaxTabLength(e),S.saveMultiTab())},saveMultiTab(){c.save_multiple_preferences({lastMultiTab:S.pref.lastMultiTab},!1,"revisions")},resolveMultiTab(e,t,a,s,r){let o=S.getGroupIndex(e,t,a),n={currentTab:o,currentTabSet:!1,groupData:s,longestKey:0,minLength:S.defaultTabValues[a].values.length,found:[],empty:[]};return S.calculateMaxTabLength(n),r||S.skipTabAdjustCheck?S.skipTabAdjustCheck=!1:S.maybeAdjustTabIndex(n,o,a),n},updateMultiTabs:function(e){let a=t.get_js_object_data([e.sectionSlug,e.selectorSlug,"styles",e.groupSlug],e.tabSlug).data,s=S.resolveMultiTab(e.sectionSlug,e.selectorSlug,e.groupSlug,a,!0);e.groupTab.find(".multi-tab").remove();let r="",o=e.groupTab.find(".add-multi-tab");for(let t=0;t<s.maxLength;++t)r+=S.getMultiTabInfo(t,e.groupSlug,a).html;if(o.before(r),S.update_tab(null,null,e.groupTab.find(".multi-tabs"),s.currentTab,".multi-tab",".multi-focus",!0),"html"===e.groupSlug){let t=s.currentTab;e.selector.attr("mt-group-index",t),p.maybeAdjustFieldDisplay(e,p.presetTabData(t),!0),p.inspectAmendsView&&(e.groupTab.find(".amender-inspect-button").removeClass("active"),e.groupTab.find('.amender-inspect-button[data-view="'+p.inspectAmendsView+'"]').addClass("active"))}},defaultTabValues:{html:{keys:["action","aspect"],defaults:{action:"none",aspect:"html"},values:[{action:"replace",aspect:"text"},{action:"add",aspect:"text"},{action:"remove",aspect:"html"},{action:"add",aspect:"class"},{action:"add",aspect:"css"},{action:"run",aspect:"jsFunction"}]}},getMultiTabInfo:function(e,a,s,r=!0){let o=S.getLastMultiTab(a),n=S.defaultTabValues[a].values[e],i=S.defaultTabValues[a].keys,l="",c={},d=S.multi_tab_has_values(s,e)?" hasValues":"";return i.forEach((i=>{let d=t.checkObject(s,[i,"value",e]);!1!==d&&null!==d||(d=r&&parseInt(o.index)===e?o[i]:t.checkObject(n,[i])||S.defaultTabValues[a].defaults[i]),l+=` data-${i}="${d}"`,c[i]=d})),{html:`<span class="multi-tab mt-tab multi-tab-${e}${d}" rel="${e}"><span class="mt-tab-txt"${l}></span></span>`,index:e,attsData:c}},toggleGroupMenu:function(e){let t=S.get_meta(e,"group");S.toggle_context_menu({M:t,$clicked:e,filter:"#cm-group-"+t.groupSlug,before_open:function(e){}})},addMultiTab:function(e){let t=e.siblings().length,a=S.get_meta(e,"group");e.before(S.getMultiTabInfo(t,a.groupSlug,{},!1).html),S.skipTabAdjustCheck=!0,S.multi_tab_pressed(e.siblings(".multi-tab-"+t))},multi_tab_pressed:function(e){let a=parseInt(e.attr("rel")),s=S.get_meta(e,"group"),r=e.find(".mt-tab-txt").data(),o=i.get_selector_data(s,s.tabSlug).data;s.selectorM.find("input.selector-multi-key-"+s.groupSlug).val(a),t.updateObject(o,["multi_key",s.groupSlug],a),S.pref.lastMultiTab[s.groupSlug]={index:parseInt(a),action:r.action,aspect:r.aspect},S.saveMultiTab(),S.maybe_default_to_pg({},!1);let n=l.dom_to_data({M:s,domDepth:"selector",return:"mtData"},s.selectorM);c.silent_save(!1,n.savePackage)},open_property_dropdown:function(a,s,r){var o=e("#"+S.selInFocusID);if(s=s||a.group,!(r=r||t.checkObject(a,["fieldData",0,"prop"]))||!t.isDomEl(o))return!1;var n=o.find("div.field-"+s+"-"+r),i=n.hasClass("is-picker")?".property-input, .sp-preview-inner":".combo-arrow";n.find(i).trigger("click")},get_code_meta:function(e){var t=e.selector.find(".group-tag-code"),a=!!t&&t.find("div.property-fields-"+e.tabSlug);return{$group:t,$property_fields:a,$editor:S.stat.adaptableEditor,editor:o.eds["adaptable-editor"]}},js_in_focus:function(){return!(!S.stat.tvr.hasClass("show_code_editor")||"js"!=S.get_css_focus())},default_to_tab:function(a){if(t.startT(arguments),"mq"===a)S.mq_tab_pressed(S.stat.res.find(".mq-tab-"+S.get_mq_focus()));else if("css"===a)S.css_tab_pressed(S.stat.code.find(".css-tab-"+S.get_css_focus()));else if("view-code"===a){var s=S.stat.view.find(".dialog-tab");if(s.length){var r=s.filter(".dialog-tab-"+S.get_initial_code_view_tab());r.length||(r=s.first()),S.dialog_tab_pressed(r)}}else"wizard"===a?S.adv_tab_pressed(e("#adv-tabs").find(".adv-tab-"+S.get_wizard_focus())):"grid"!==a&&"transform"!==a||S.pg_tab_pressed(_.get_pg_fields(a).find("."+a+"-tab-"+S["get_"+a+"_focus"]()),a);t.endT(arguments)},get_mq_focus:function(){var e=S.pref.mq_device_focus;return t.hasValue(e)&&t.hasValue(S.mqs[e])||(e="all-devices"),e},get_wizard_focus:function(e){if(e&&!parseInt(S.pref.wizard_expanded)&&!S.pref.dock_wizard_right)return!1;var t=S.pref.adv_wizard_tab;return t&&"html-inspector"!==t&&"refine-targeting"!==t||(t="css-computed"),t},get_css_focus:function(){var e=S.pref.css_focus;return e||(e="all-browsers"),e},get_grid_focus:function(){var e=S.pref.grid_focus;return e||"gridtemplate"},get_transform_focus:function(){var e=S.pref.transform_focus;return e||"transform"},get_dialog_tab_focus:function(e){var t=(e=e||S.get_dialog_focus()).find("input.dialog-focus").val();return t||(t=0),parseInt(t)},get_dialog_focus:function(){return S.stat.dialogs.find("div.tvr-dialog.show")},get_tab_name:function(t){return e("#responsive-bar").find(".mq-tab-"+t).find(".mq-tab-txt").text()},get_pg_focus_obj:function(a){a=a||S.pref.pg_focus;var s=e("#"+S.selInFocusID+"-"+a);return!!t.isDomEl(s)&&s},get_group:function(e,a){var s=e.group.find("div.property-fields-"+e.tabSlug);return a&&(s=s.find("input.property-input")),!!t.isDomEl(s)&&s},get_pg_fields_obj:function(e,a){t.startT(arguments);var s=e.find("div.property-fields-"+a);return t.endT(arguments),!!t.isDomEl(s)&&s},get_subgroup_or_tabgroup:function(e,a,s){var r=S.get_group(e);if(!t.isDomEl(r))return!1;var o=s?"div.tab-control-"+s:"div.subgroup-"+e.subgroupSlug,n=r.find(o);return!!t.isDomEl(n)&&(a&&(n=n.find("input.property-input")),!!t.isDomEl(n)&&n)},maybe_remove_group:function(e,a){if(t.startT(arguments),e){var s=S.get_meta(e,"group");if(!S.pg_check_values(s.group,a,!1)&&!S.input_toggles_enabled(s.group,"group",a))return t.endT(arguments),S.remove_property_group(s,a)}return t.endT(arguments),!1},input_toggles_enabled:function(e,t,a){"group"==t&&(e=e.find("div.property-fields-"+a));var s=!1;return e.find("input.input-toggle-tracker").each((function(e){return s=!0,!1})),s},selector_check_disabled:function(a){var s=a.selectorM.find(".disabled-responsive-tabs"),r=e("#responsive-bar").find(".query-tabs");for(var o in TvrMQsCombined)if(TvrMQsCombined.hasOwnProperty(o)){var n=r.find("span.mq-tab-"+o);t.isDomEl(s.find("input.disabled-tracker-"+o))?n.addClass("item-disabled"):n.removeClass("item-disabled")}},pg_check_values:function(a,s,r,o){var n=S.get_meta(a,"group"),i=!1;S.get_mq_focus();return o=o||"#nothing",n.group.find("div.property-fields-"+s).find("input.property-input, textarea.property-input").not(o).each((function(a){if(t.isDefined(e(this).val()))return i=!0,!1})),i},js_check_values:function(e,a,s,r,o){if(i.deferActions.check_values&&i.deferActions.update_dots)return e;t.startT(arguments);var n={incRecurse:!0,onlyRecurse:!1,mq_key:!1,M:S.get_meta(a.section?a.section:a,"section"),maxDepth:"group"};e.has_values={},e=i.modify_main_js_object("check_values",e,n),n.incRecurse=!1;var l=(e=i.modify_main_js_object("update_dots",e,n)).has_values,d=S.pref.pg_focus;if(l.current_sel_checked){if(S.update_tab_dots(l),S.update_group_dots(l),"html"===d&&S.update_multi_tab_dots(l,d),"grid"===d){var u={itemsWithValues:l.itemsWithValues};S.grid.isAllItems&&_.update_grid_and_radio_item_formatting("itemdots",u),S.update_pgtab_dots(l)}"transform"===d&&S.update_pgtab_dots(l)}return r&&c.silent_save(!1,e.savePackage),t.endT(arguments),e},update_tab_dots:function(e){for(var t in TvrMQsCombined)if(TvrMQsCombined.hasOwnProperty(t)){var a=S.item_has_styles(e,"tab",t);S.update_style_signal(S.stat.res.find(".mq-tab-"+t),a)}},update_pgtab_dots:function(a){var s=S.get_pg_meta(),r=i.get_selector_data(s,s.tabSlug).data,o=t.isDefined(r.nth_item)?r.nth_item:1;if(s){var n=s.groupSlug,l={},c=t.checkObject(a,["propsWithValues",n]);if(c)for(var d=Object.keys(c),_=0;_<d.length;_++){var u=d[_],p=S.get_property_tab_control(u);if(p)("griditems"===p?t.checkObject(c,[u,"value",o]):1)&&(l[p]=1)}s.group.find("span.mt-tab").each((function(){var t=e(this),a=t.attr("rel"),s=l[a];S.update_style_signal(t,s)}))}},multi_tab_has_values:function(e,t){if(!e)return!1;let a=!1;return Object.entries(e).forEach((([e,s])=>{(s.value||[])[t]&&(a=!0)})),a},update_multi_tab_dots:function(a,s){var r=t.checkObject(a,["propsWithValues",s]),o=S.get_pg_meta();o&&o.groupTab.find(".multi-tabs").find("span.mt-tab").each((function(t){var a=e(this),s=S.multi_tab_has_values(r,t);S.update_style_signal(a,s)}))},update_group_dots:function(t,a){S.stat.css_icons.find(".pg-icon").each((function(){var a=e(this),s=a.attr("rel"),r=S.item_has_styles(t,"group",s);S.update_style_signal(a.parent(),r)}))},item_has_styles:function(e,a,s){return t.checkObject(e,[a,s])?1:""},update_style_signal:function(e,t){e&&(t?e.addClass("hasValues"):e.removeClass("hasValues"))},css_tab_pressed:function(e){t.startT(arguments);var a=S.get_css_focus(),s=e.attr("rel"),r=(s!=a&&S.stat.code.find("div.mt-full-code-"+a),S.stat.code),o=r.find(".css-code-tabs");S.update_tab(r,".mt-full-code",o,s,".css-tab",".css-focus"),S.pref.css_focus=s;var n=S.stat.code.find("div.mt-full-code-"+s);S.after_tab_switch("css",{$curObj:n}),c.simple_ajax_request({type:"GET",url:S.ajaxUrl+"&css_focus="+s}),g.toolbar_adjusted(),t.endT(arguments)},pg_tab_pressed:function(e,t,s){var r=e.closest(".property-"+t),o=r.find(".query-tabs"),n=e.attr("rel"),i="."+t+"-tab",l="."+t+"-tab-focus";S.update_tab(r,".tab-control",o,n,i,l),S.pref[t+"_focus"]=n,S.stat.tvr.attr("data-"+t+"-pgtab",n),c.simple_ajax_request({type:"GET",url:S.ajaxUrl+"&"+t+"_focus="+n}),S.refresh_comp_css(),"grid"===t&&(S.adjust_grid_line_scroll_buttons(S.get_meta(r,"group")),S.iframeEditing()&&a.maybe_run_grid_control_update(s))},adv_tab_pressed:function(e){t.startT(arguments);var a=S.stat.inspectionPanes,s=a.find(".query-tabs"),r=e.attr("rel");S.update_tab(a,".adv-area",s,r,".adv-tab",".adv-wizard-focus"),S.pref.adv_wizard_tab=r,S.maybeUpdateInspectorPanels({updateComputed:1,updateStyles:1}),c.simple_ajax_request({type:"GET",url:S.ajaxUrl+"&adv_wizard_tab="+r}),t.endT(arguments)},settings_tab_pressed:function(e){},maybeUpdateInspectorPanels:function(e){if(t.startT(arguments),!parseInt(S.pref.wizard_expanded)||!S.iframeEditing(!0))return S.updateCompAsync(!1,!1,void 0,"obj"),t.endT(arguments),!1;e=e||{};var a=S.get_wizard_focus(!0);e.updateComputed&&S.updateCompAsync(!0,!0,void 0,"obj"),e.updateHTML&&(S.domChanged.updateHTMLPane||e.updateVisEditor?(e.updateVisEditor=1,S.update_wizard_html(e),S.domChanged.updateHTMLPane=!1):S.update_wizard_html_scroll(e)),"css-inspector"===a&&e.updateStyles&&t.action_after_timeout("update_styles_pane",70,{item:function(){l.update_stylesheet_rules()},args:[]}),t.endT(arguments)},updateCompAsync:function(e,s,r,n){t.action_after_timeout("update_comp_async",3,{item:function(){S.iframeEditing()&&(a.getAndUpdateCompStyles(e,s,r,n),S.get_wizard_focus(!0)&&o.update_pseudo_els({action:"comp-styles-update",goToLine:S.curSelCSS}))},args:[]})},dialog_tab_pressed:function(e){var t=e.closest(".dialog-main"),a=t.find(".dialog-tabs"),s=e.attr("rel"),r=S.get_dialog_focus(a);if(S.update_tab(t,".dialog-tab-field",a,s,".dialog-tab",".dialog-focus"),"display-css-code-dialog"===r.attr("id")){var o=S.generatedCodeTabs.items[s],n=o.url;if(n)c.simple_ajax_request({url:n,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:S.update_generated_code_editor,cbfArgs:[s,o]});else{var i=!!S.scss_error&&S.scss_error.fullString,l=i||S.previousSCSSCompile;S.update_generated_code_editor(l,s,o)}}},dialog_section_tab_pressed:function(e){var t=e.closest(".mt-dialog-section"),a=t.find(".dialog-section-tabs"),s=e.attr("rel");S.update_tab(t,".dialog-section-tab-field",a,s,".dialog-section-tab",".dummy-for-now")},combobox_clicked:function(e,a){if(t.startT(arguments),e.hasClass("sug-sel"))t.isDomEl(e.closest(".code-suggestion.in-focus"))||S.sug_css_clicked(e);else{var s=e.attr("rel");(e.hasClass("has-arrows")||e.hasClass("cssfilter-combo"))&&S.combo_arrow_clicked(!1,e),e.hasClass("cssfilter-combo")&&"custom_prefix"!==s&&S.feature_on(e)}t.endT(arguments)},combo_arrow_clicked:function(e,a){t.startT(arguments);var s="input"===(a=a||(e.hasClass("cur-item-dropdown")?e.prev("input"):e.siblings("input"))).prop("tagName").toLowerCase()?a:a.find("input");s.data("wasOpen")?S.close_combo_menu(s):S.open_combo_menu(s),s.hasClass("sug-sel")&&S.sug_css_clicked(s),t.endT(arguments)},open_combo_menu:function(e){e.MTautocomplete(),e.is(":focus")||e.trigger("focus"),e.MTautocomplete("search",""),S.combobox_focused(e)},close_combo_menu:function(e){e.MTautocomplete().MTautocomplete("close")},combobox_focused:function(t){t.hasClass("custom_css_unit")&&e("#css_unit_set").val("")},input_clear_icon_clicked:function(t,a){a=a||"";var s=t.siblings("input"+a),r=!1;if(s.val("").focus(),s.hasClass("search-folders-input")&&S.clear_folder_search(),s.hasClass("property-input")&&(r=S.get_meta(s,"property")),s.hasClass("sp-input-var")&&(r=S.get_related_meta("picker",t.closest(".sp-container")).M),r){var o=r.property;if(o.hasClass("has-variable-line"))if(s.hasClass("vl-name-input"))S.toggle_optional_input(t.siblings(".toggle-optional-input"));else{var n=!1;s.closest(".tvr-input-wrap").find(".property-input").each((function(){if(""!==e(this).val().trim())return n=!0,!1})),n||S.delete_variable_field(o,s,r,!0)}S.maybe_toggle_google_fonts_field(s,""),S.run_input_updated(s)}},format_combo_cat_toggle_atts:function(e){return' class="mt-ui-toggle uit-par mt-combo-toggle toggle-sampled-items toggle-'+e+'" data-action="toggle-sampled" data-dyn-tt-root="'+e+'"data-aspect="'+e+'"'},wheelDropdown:{cssf:"",source:[],index:-1},valueChangeDropdown:function(e,a,s){var r=S.wheelDropdown.source.length-1,o=a?S.wheelDropdown.index+1:S.wheelDropdown.index-1;o<0?o=r:o>r&&(o=0);var n=S.wheelDropdown.source[o];n===Object(n)&&(n=t.isDefined(n.value)?n.value:n.label),e.val(n),S.maybe_sync_fields(e),S.wheelDropdown.index=o},cycleDrowndownValues:function(e,a,s){var r=t.prop_to_cssf(e.attr("rel")),o=e.val(),n=S.wheelDropdown.cssf!==r||!t.isDefined(o);if(n){var i=S.resolve_combobox_source(e),l=i[1]===Object(i[1])&&"value";S.wheelDropdown.source=i,S.wheelDropdown.cssf=r;var d=S.single_comp_value(r),_=t.isDefined(o)?t.in_array(o,i,!1,l):!1!==t.in_array(d,i,!1,l)?t.in_array(d,i,!1,l):t.in_array(d,i,!1,"label");S.wheelDropdown.index=!1!==_?parseInt(_):-1}S.valueChangeDropdown(e,a.deltaY>0,s),n&&S.adjust_comp_span(e,"after"),c.ajax_save_settings({$property:e})},lastAutocompleteResponse:[],resolve_combobox_source:function(e,s,r,o){t.startT(arguments);var n=e.attr("rel"),i=e.hasClass("sug-sel")?a.dom.sels.combo[n]:TvrMT.data.prog.combo[n];if("custom_paths"===n||"conditional_logic"===n)return S.conditionLogicSiteSearch="conditional_logic"===n,S.get_site_pages;if("npm_dependencies"===n)return p.npm.searchForCombo;if("current_npm_dependencies"===n)return Object.keys(S.pref.npm_dependencies);if("custom_prefix"===n)return S.get_custom_prefix_combo_data;if("load_snippet"===n)return p.getRelevantSnippets(e);if("shape_outside"===n)i=[].concat(TvrMT.data.prog.combo.clip_path);else{if("all_sel_suggestions"===n)return S.filter_code_suggestions;if("css_length_units"===n)return m.filter_css_units(i,e.data("prop"));if("cur_folders"===n)return S.get_folders();if("alt_label_suggestions"===n)return S.get_label_suggestions();if("aspect"===n)return TvrMT.data.prog.combo.aspect.concat(TvrMT.data.prog.combo.attribute)}if(i||(i=[]),e.hasClass("property-input")||e.hasClass("sp-input-var")){var c=S.gatheredCSS.root_cat_keys[n],d=t.prop_to_cssf(n),_=TvrMT.data.prog.lh[d],u=!!_&&S.get_default_unit(_.group,_.prop),f=S.support_sampling(n,e),g=[],v=[],h=[];if(c){var b="color_extra"===c?"color":c,y="color_extra"===c,T=S.pref.my_props.sug_values,x=l.sort_number_unit_strings(t.uniqueArray(T[b].recent.concat(T[b].saved)),!1,n,!1,c,!1,y),w=T[c].copiedSrc;if(("grid_positions"===c||"grid_area"===c)&&t.checkObject(S.grid,["templateAreas"])){var k="grid_positions"===c?"implicit_names":"grid_areas";x=x.concat(S.grid.templateAreas[k])}var C=l.sort_number_unit_strings(t.uniqueArray(x.concat(w)),!1,n);if(i.length&&t.comboHasInitialCats(i)?g=S.format_combo_suggestions(c,"suggestions",x):i=S.format_combo_suggestions(c,"suggestions",C),f){l.get_scss_variables("keys");if(parseInt(S.pref.show_sampled_values)&&(v=S.format_combo_suggestions(c,"sampled")),S.pref.my_props.sug_variables&&parseInt(S.pref.show_sampled_variables)){var M=l.sort_number_unit_strings(Object.keys(S.pref.my_props.sug_variables),!1,n,!0,c,u);h=S.format_combo_suggestions(c,"sampled_variables",M)}}}var j=[];"font_family"===n?j.push(TvrLang.google_font):"list_style_image"!==n&&"background_image"!==n&&"url"!==n&&"mask_image"!==n||j.push("none"),(i=j.concat(g,i,h,v)).length||i.push("")}return o=t.isDefined(o)?"curVal"===o?e.val():o:"",s&&e.MTautocomplete().MTautocomplete("option","source",i),r&&(e.MTautocomplete("search",o),S.maybe_combo_menu_width_change(e)),t.endT(arguments),i},maybe_combo_menu_width_change:function(a){if(a.hasClass("mt-slider")){var s=MTlocal.get_custom_autocomplete(a),r=e(s.menu.element);t.action_after_timeout("new_menu_width",100,{item:function(e){m.hide_slider_set(),m.show_slider_set(a,!0)},args:[r]})}},format_combo_cat_label:function(e,t){return TvrLang[e]},format_combo_suggestions:function(t,a,s){var r=[],o=s||S.pref.my_props.sug_values[t][a],n=S.format_combo_cat_label(a,t);if(o&&o.length)for(var i=0;i<o.length;i++)if(o[i]){var l=o[i],c=l===Object(l),d=c?l.val:l,_=c?e.extend(!0,{},l):{},u={label:d,category:n};e.extend(!0,_,u),r.push(_)}return r},add_variable_field:function(e,t){var a=e.closest(".property-tag"),s=a.find(".tvr-input-wrap").last(),r=s.find(".vl-post-line-name").find(".property-input").val(),o=s.clone(),n=o.find(".property-input");s.find(".vl-post-line-name").removeClass("show-optional-input").find(".property-input").val(""),o.find(".vl-item").removeClass("show-optional-input"),t.shiftKey||n.val(""),r&&o.find(".vl-pre-line-name").find(".property-input").val(r),o.find(".comp-style").html(""),s.after(o),o.find(".vl-main-input").find(".property-input").focus(),S.adjust_grid_line_scroll_buttons(S.get_meta(a,"group")),t.shiftKey&&c.ajax_save_settings({$property:n})},toggle_optional_input:function(e){var t=e.parent();t.hasClass("show-optional-input")?t.removeClass("show-optional-input"):(t.addClass("show-optional-input"),t.find(".property-input").focus())},delete_variable_field:function(t,a,s,r){t.find(".tvr-input-wrap").length>1&&a.closest(".tvr-input-wrap").animate({opacity:0},200,(function(){e(this).remove(),r&&S.adjust_grid_line_scroll_buttons(s)}))},get_combo_menu_from_input:function(t){return e(MTlocal.get_custom_autocomplete(t).menu.element)},combobox_item_selected:function(s,r,o,n){t.startT(arguments);var d=o.closest(".property-tag"),f=o.attr("rel"),g=r.item.value;if(o.hasClass("grid-area-add"))return!1;if(o.hasClass("search-folders-input"))S.search_folders(g);else if(o.hasClass("mt-load-snippet"))p.snippetTemplateSelected(s,r,o,n);else if(o.hasClass("mod-aspect"))p.switchEditorMode(g);else if("conditional_logic"===f){var m=e("#addLogic"),v=e("#logic-to-add"),h=m.find("input.mt_exclude:checked").length,b=r.item.logic;g=h?r.item.exclude_logic?r.item.exclude_logic:"!"+b:b;r.item.value=r.item.label,v.val(g)}else r.item.label!==g&&t.in_array(f,["mask_image","background_image","clip_path","shape_outside"])&&(g.match(new RegExp(l.reg.abs_or_rel_file()))&&(g='url("'+t.root_rel_if_local(S.microUrl+"stock/"+g,!0)+'")'),S.last_field_val_converted={origVal:e.extend(!0,{},r.item),adjustedStringVal:g},r.item.value=g);if(o.val(g),o.hasClass("snippet-dep-adjust")&&p.npm.updateSnippetDependency(o),S.maybe_run_code_or_synced_label_field_edited(o,r),o.hasClass("sp-input-var"))return S.run_input_updated(o),!1;if(o.hasClass("bg-image-select")&&setTimeout((function(e){t.scroll_input_end(e)}),30,o),o.hasClass("sug-sel")&&o.closest(".code-suggestion").find(".num-els-icon-wrap").html(S.num_els_icon(a.jquery_compat_sel_elements(g).length)),o.hasClass("sec-hierarchy-input")&&(S.folderNameCustomized=!0),o.hasClass("property-input")){if(d.hasClass("has-variable-line"))if(""===g);else{var y=_.parseGridTracks(g).lines;if(y&&y.length>1){f=o.attr("rel");var T=S.get_meta(o,"property"),x=o.closest(".mt-vl-inner");x.find(".tvr-input-wrap").remove();var w=S.dom_replacements(!1,"group",e(TvrMT.data.templates.input_wraps[f]),"selector_section",T.sectionSlug,!1,"selector_css",T.selectorSlug,T.selectorH,T.selectorCode,T.tabSlug);x.prepend(w),i.map_property_values_to_field({},t.get_js_object_data([T.sectionSlug,T.selectorSlug,"styles","grid"],S.get_mq_focus()).data,f,d,g.split(" "));var k=x.find(".tvr-input-wrap").first();o=f.indexOf("template")>-1?k.find(".vl-main-input").find(".property-input"):k.find(".property-input")}}S.adjust_comp_span(o,"after");T=S.get_meta(o,"property");S.maybe_toggle_google_fonts_field(o,g)||S.maybe_sync_fields(o),S.update_input_width_and_scroll(o),c.ajax_save_settings({$property:o,comboAction:n})}if("css_unit_set"===o.attr("id")){var C=o.val();o.closest("ul").find("input.custom_css_unit").val(C)}"select"===n&&"custom_paths"===o.attr("rel")&&(o.MTautocomplete("close"),"testPreviewPath"===o.attr("id")?S.logicTextareaChanged?u.save_folder_logic(o,!0):u.test_logic_on_page(S.context_menu_data.M):S.change_preview_url(o.siblings(".change-preview-url"),r)),"viewed_import_stylesheets"===o.attr("rel")&&(o.MTautocomplete("close"),l.update_import_css_preview(!1,{c:o.closest(".stylesheet-to-import").find(".view-import-stylesheet")},"loadNew")),o.hasClass("sug-sel")&&S.sug_sel_updated({val:o.val(),$editedField:o,comboSelected:1,ui:r}),o.hasClass("cssfilter-combo")&&S.pseudo_updated(o,{input:1}),t.endT(arguments)},maybe_toggle_google_fonts_field:function(e,t){if(e.hasClass("tvr-font-select")){var a=e.closest(".field-wrap").siblings(".tvr-font-custom");return S.gFontTarget=a.find(".property-input"),t==TvrLang.google_font?S.show_google_fonts_field(a):S.hide_google_fonts_field(e,a),!0}return!1},hide_property_fields:function(t){t.each((function(){var t=e(this),a=t.find(".property-input");a.val(""),S.adjust_comp_span(a,"after"),t.removeClass("show-event-fields")}))},sug_css_clicked:function(e){t.startT(arguments);var a=e.closest(".mt-selector-suggestion");if(!a.hasClass("in-focus")){var s=e.hasClass("existsel-radio"),r=a.data(),o="hand_coded_css"===r.type,n=!s,i=!!n&&a.find("input.sug-sel"),l=n?i.val():r.code,c=!!s&&r.id,d=S.existingSelSelected!==s;S.existingSelSelected=s,S.sug_sel_updated({switchedNewExisting:d,isCodeViewSel:o,isExisting:s,isNewSug:n,$editedField:i,$item:a,radioSelection:1,val:l,selID:c,scroll:1})}t.endT(arguments)},toggle_preview_page_menu:function(e){var a=S.stat.settingsMenu,s=S.stat.changeUrlInputWrap.find("input"),r=S.stat.settingsMenu.children(".mt-preview_page-heading");r.hasClass("expanded")||S.toggle_expandable_panel(r),a.hasClass("on")?(S.close_combo_menu(s),S.hide_folders_or_settings("settings","right")):(S.show_folders_or_settings("settings","right"),t.action_after_repaint({item:function(){S.open_combo_menu(s)}},270,window))},get_toggle_data:function(a,s){t.startT(arguments),a?a=a.closest(".uit-par"):"hide_interface"===s?a=e("#toggle-mt-interface"):"hover_inspect"===s?a=e("#hover-inspect-toggle"):"show_code_editor"===s?a=e("#toggle-full-code-editor"):"show_text_labels"===s?a=e("#mymtonoffswitch-show_text_labels").closest(".mt-ui-toggle"):"dock_editor_left"===s?a=e("#mymtonoffswitch-dock_editor_left").closest(".mt-ui-toggle"):"dock_styles_left"===s?a=e("#mymtonoffswitch-dock_styles_left").closest(".mt-ui-toggle"):"detach_preview"===s?a=e("#mymtonoffswitch-detach_preview").closest(".mt-ui-toggle"):"show_sampled_variables"===s||"show_sampled_values"===s?a=e("#"+s):"create_additional_selector"===s&&(a=S.stat.suggestionsAdvanced.find(".additional-selector-toggle"));var r=!1,o=!1,n=!1;"show_code_editor"==(s=s||a.data("aspect"))?(o=a,a=e("#toggle-full-code-editor"),r=e("#code-editor-alias")):"show_extra_actions"==s?(o=a,a=e("#show_extra_actions")):"show_sampled_variables"===s||"show_sampled_values"===s?(o=a,a=e("#"+s)):"hover_inspect"==s?(o=a,a=e("#hover-inspect-toggle")):"selname_code_synced"==s?(o=a,a=e("#selname_code_synced")):"mt_highlight"===s?(o=a,a=e("#toggle-highlighting")):"code_manual_resize"==s?(o=a,a=e("#code_manual_resize")):"pseudo_classes"==s||"pseudo_elements"==s||"page_specific"==s?(n=S.stat.cssModifiers,o=a,r=S.get_css_filter_alias(a,s)):"create_additional_selector"===s&&(o=a,a=S.stat.suggestionsAdvanced.find(".additional-selector-toggle"));var i,l=a.hasClass("on")?0:1,c=a.data();return c&&"custom-prefix"===c.pref_sub_key&&(i=a.closest(".css-filter-item").find(".cssfilter-combo").val()),t.endT(arguments),{clicked:a,aspect:s,turnOn:l,extraValue:i,alreadyOn:!l,$alias:r,$aliasTrigEl:o,$filter_scope:n}},feature_on:function(e,a,s){t.startT(arguments),s=s||{};var r=S.get_toggle_data(e,a);s.offFirst&&(S.feature_off(e,a,s.offFirst),r=S.get_toggle_data(e,a)),r.alreadyOn||S.toggle_feature(e,a,s),t.endT(arguments)},feature_off:function(e,a,s){t.startT(arguments),s=s||{},S.get_toggle_data(e,a).alreadyOn&&S.toggle_feature(e,a,s),s.onAgain&&S.feature_on(e,a,s.onAgain),t.endT(arguments)},toggle_inline_gui:function(){var e=o.eds["adaptable-editor"];e.isFocused()?(e.blur(),o.go_to_ui_property()):g.editor_and_gui()?(S.picker_method("hide"),e.focus()):S.trigger_pg_icon_click("code")},undo_toggle_state:function(e,t,a,s,r){r.uiCorrection||("on"===e?(a.removeClass("on"),s.removeClass(t)):(a.addClass("on"),s.addClass(t)))},toggle_feature:function(e,r,i){t.startT(arguments);var l=S.get_toggle_data(e,r);e=l.clicked,r=l.aspect,i=i||{};var d=l.turnOn,_=!!l.$filter_scope&&l.$filter_scope,u="",f=e.data("pref_sub_key");if("hide_interface"===r&&S.pref.detach_preview)return!1;i.pref_sub_key=f||!1,i.tmp&&(S.tmp[r]=d?"turnedOn":"turnedOff"),i.fHTML=t.isDefined(i.fHTML)?i.fHTML:e.data("fhtml"),i.noSave=t.isDefined(i.noSave)?i.noSave:parseInt(e.data("no-save"));var m=i.fHTML&&S.stat.fHTML?S.stat.tvr.add(S.stat.fHTML):S.stat.tvr,v=(i.extraClass&&i.extraClass,l.$alias?e.add(l.$alias):e),h=!1;if(d){if(m.addClass(r),g.detached_window_available()&&s.add_html_class(r),v.addClass("on"),"show_time_concurrently"==r&&(i.noSave=1,t.log_concurrent=1),_||(h=e.data("neg")),"show_rulers"==r)S.get_local_window_function("show_rulers")();else if("dock_folders_left"===r||"dock_styles_left"===r||"dock_editor_left"===r||"detach_preview"===r||"dock_wizard_right"===r||"dock_settings_right"===r||"dock_ai_right"===r){var b="dock_ai_right"===r||"dock_settings_right"===r?"right":"left";g.toggle_layout_view(r,d,b,i)}else if("show_suggestions_menu"===r)S.show_suggestions_menu(a.stat.frontendControls.find(".show-suggestions-icon"));else if("enable_beaver_builder"===r)S.iframeEditing()&&!i.uiCorrection&&n.activate_builder("FLBuilder"),S.stat.tvr.addClass("FLBuilder_is_on");else if("activate_elementor"!=r||i.uiCorrection){if("activate_oxygen"!==r||i.uiCorrection){if("activate_gutenberg"!==r||i.uiCorrection){if("enable_modification"===r)return p.enableToggleUsed(e,d),!1;if("mt_rich_text"===r)p.tinymce.available()||(S.pref.mt_rich_text=1,p.tinymce.bind(),p.tinymce.maybeUpdateCompToolbarOffset(),S.refresh_comp_css());else if("show_snippet_adv"===r)S.expandMaxHeight(v.prev()[0]);else if("selname_code_synced"==r)S.selname_code_synced(l.$aliasTrigEl,d);else if("code_manual_resize"==r){if(g.horizontal_only())S.stat.inlineEditor.css("height",S.pref.layout.editor_height.size),o.get_focus_editor().resize(),g.toolbar_adjusted();S.close_context_menu({filter:".cm-editor-options"})}else"show_code_editor"==r?(S.cancel_draft_selector_edit(!0,{elementAlreadySelected:1}),S.pref[r]=d,g.adjust_preview_margin_and_save_config({side:"left",skipSave:1}),S.default_to_tab("css"),i.doNotAutoSelect||o.resume_editor_cursor_pos_and_select()):"mt_dark_mode"===r?o.updateAllEditorsTheme("dark"):"sync_browser_tabs"===r?(window.MTBroadCast.toggleSyncBrowserTabs(d),c.update_full_logs({short:"Reload other tabs!",long:"<p>Browser tab syncing has been enabled, but please reload any already open tabs to ensure this change propagates.</p>",type:"info"})):"auto_save_mode"===r?S.keyboard_save_action(null,"manual"):"auto_publish_mode"===r?S.pref.num_unpublished_saves>0&&c.publish_settings():"pseudo_base_styles"===r?S.adjust_pseudo_base_styles(d,!0):"hover_inspect"==r?S.iframeEditing()&&a.bind_wizard_hover():"fullscreen"==r?t.enable_full_screen():"wizard_expanded"==r?(S.pref[r]=d,this.wizard_expanded()):"hide_interface"==r?(g.toolbar_adjusted(),S.feature_off(!1,"hover_inspect",{tmp:1,noSave:1})):"mt_highlight"===r?(l.$aliasTrigEl&&l.$aliasTrigEl.hasClass("current-item-spotlight")&&(i.con="reg",i.scroll=1),i.con&&S.iframeEditing()&&a.reposition_overlays(i)):_&&e.hasClass("filter-editable")?e.find("input.combobox").select():"expand_all_folders"===r?(S.clear_folder_search(),S.open_close_all_folders("open")):"expand_all_settings"===r?S.open_close_all_settings("open"):"selector_auto_name"===r&&(i.doNotUpdateField||S.update_nice_name(!1,S.stat.curCodeInput.val(),S.pref.selname_code_synced))}else if(!n.activate_builder("gutenberg",!1,S.pageOrPostID))return S.undo_toggle_state("on",r,v,m,i),!1}else if(!n.activate_builder("oxygen",!1,S.pageOrPostID))return S.undo_toggle_state("on",r,v,m,i),!1}else if(!n.activate_builder("elementor",!1,S.pageOrPostID))return S.undo_toggle_state("on",r,v,m,i),!1}else if("show_time_concurrently"==r&&(i.noSave=1,t.log_concurrent=0),v.removeClass("on"),_&&_.find("ul.flist-"+r).find("li.css-filter-item.on").length||m.removeClass(r),g.detached_window_available()&&s.remove_html_class(r),_||(h=e.data("pos")),"show_rulers"==r)S.get_local_window_function("hide_rulers")();else if("dock_folders_left"===r||"dock_styles_left"===r||"dock_editor_left"===r||"detach_preview"===r||"dock_wizard_right"===r||"dock_settings_right"===r||"dock_ai_right"===r){b="dock_ai_right"===r||"dock_settings_right"===r?"right":"left";g.toggle_layout_view(r,d,b,i)}else if("enable_beaver_builder"===r)S.iframeEditing()&&!i.uiCorrection&&n.get("FLBuilder").deactivate(),S.stat.tvr.removeClass("FLBuilder_is_on");else if("activate_elementor"!==r||i.uiCorrection)if("activate_oxygen"!==r||i.uiCorrection)if("activate_gutenberg"!==r||i.uiCorrection){if("enable_modification"===r)return p.enableToggleUsed(e,d),!1;if("mt_rich_text"===r)S.pref.mt_rich_text=0,p.tinymce.unbind(),p.tinymce.maybeUpdateCompToolbarOffset();else if("show_snippet_adv"===r)S.collapseMaxHeight(v.prev()[0]);else if("selname_code_synced"==r)S.selname_code_synced(l.$aliasTrigEl,d);else if("code_manual_resize"==r){if(g.horizontal_only()){var y=S.stat.adaptableEditor,T=y.attr("id"),x=o.eds[T];if(x){var w=x.session.getLength();o.editor_update_height(x,y,16*w)}}g.toolbar_adjusted(),S.close_context_menu({filter:".cm-editor-options"})}else"hover_inspect"==r?S.iframeEditing()&&a.unbind_wizard_hover():"show_code_editor"==r?(o.prev_code_selector=!1,S.cancel_draft_selector_edit(!1),S.pref[r]=d,g.adjust_preview_margin_and_save_config({side:"left",skipSave:1}),S.default_to_tab("mq"),S.adjust_scroll_buttons(!1,"responsive"),!i.doNotAutoSelect&&S.iframeEditing()&&a.select_current_selector_elements({})):"mt_dark_mode"===r?o.updateAllEditorsTheme("light"):"sync_browser_tabs"===r?window.MTBroadCast.toggleSyncBrowserTabs(d):"auto_publish_mode"===r||("pseudo_base_styles"===r?S.adjust_pseudo_base_styles(d,!0):"fullscreen"==r?t.disable_full_screen():"wizard_expanded"==r?(S.pref[r]=d,this.wizard_collapsed()):"show_suggestions_menu"===r?S.hide_suggestions_menu():"hide_interface"==r?(g.toolbar_adjusted(),"turnedOff"===S.tmp.hover_inspect&&(S.tmp.hover_inspect=!1,S.feature_on(!1,"hover_inspect",{noSave:1}))):"mt_highlight"===r||("expand_all_folders"===r?S.open_close_all_folders("close"):"expand_all_settings"===r&&S.open_close_all_settings("close")))}else n.deactivate_builder("gutenberg");else n.deactivate_builder("oxygen");else n.deactivate_builder("elementor");if(i.pref_sub_key){f=i.pref_sub_key;if(S.pref[r][f]=d,u+="&pref_sub_key="+f,l.extraValue){var k=l.extraValue.trim();u+="&extraValue="+k,S.pref[f+"-extraValue"]=k}}else S.pref[r]=d;if(h&&S.refresh_tt(v,h,l.$aliasTrigEl),e.data("text-pos")){var C=d?e.data("text-neg"):e.data("text-pos");e.text(C)}_&&S.pseudo_updated(e,{toggle:1,turnOn:d,doNotSelectEl:i.doNotSelectEl,turningOffOtherPagePrefix:i.turningOffOtherPagePrefix}),"dock_wizard_right"!==r||d?"show_text_labels"===r?g.toolbar_adjusted():"expand_device_tabs"===r?S.adjust_scroll_buttons(!1,"responsive"):"mt_nonlog"===r?S.change_preview_url(S.stat.settingsMenu.find(".change-preview-url"),void 0,!0):"specificity_preference"===r?S.specificity_toggled():"full_height_left_sidebar"!==r&&"full_height_right_sidebar"!==r||g.adjust_preview_margin_and_save_config({skipSave:1,skipPGPress:1,side:"full_height_left_sidebar"===r?"left":"right"}):S.default_to_tab("wizard"),i.noSave||c.save_ui_toggle_update(r,d,u),t.endT(arguments)},expandMaxHeight(t){const a=t.style.maxHeight;t.style.maxHeight="none";const s=t.scrollHeight+"px";t.style.maxHeight=a,t.offsetWidth,t.style.maxHeight=s;let r=e(t);S.after_animation(r,{type:"transition",cb:e=>{e.css("max-height","none")},justOnce:1})},collapseMaxHeight(e){e.style.maxHeight=e.scrollHeight+"px",e.offsetWidth,e.style.maxHeight=0},isHighSpecificity:function(){return parseInt(S.pref.specificity_preference)&&!TvrMT.integrate.gutenberg},specificity_toggled:function(){S.stat.suggestionsAdvanced.find("input.sug-sel").add(S.stat.curCodeInput).each((function(){var s=e(this),r=s.attr("rel");if(t.isDefined(r)){var o="all_sel_suggestions"===r?TvrMT.data.prog.combo:a.dom.sels.combo,n=t.checkObject(o,[r]);if(n){a.sort_selector_suggestions(n,S.isHighSpecificity());var i=t.checkObject(n,["0","value"]);if(t.isDefined(i)&&"all_sel_suggestions"!==r){var l=s.closest(".code-suggestion").hasClass("in-focus");S.suggestion_instances({action:["setInputs"],incCurCode:l,val:i,itemFilter:".code-suggestion.refKey-"+r}),l&&parseInt(S.pref.selector_auto_name)&&S.update_nice_name(!1,i,S.pref.selname_code_synced)}}}}))},context_menu_data:!1,toggle_context_menu_using_atts:function(e){var t=e.data();t.$clicked=e,S.toggle_context_menu(t)},toggle_context_menu:function(e){e.$clicked.hasClass("on")?S.close_context_menu():S.show_context_menu(e)},show_context_menu:function(e){MTlocal.show_context_menu(e)},close_context_menu:function(e){MTlocal.close_context_menu(e)},maybe_run_context_menu_callback:function(e,a){var s=t.checkObject(a,[e]),r=!0;return s&&(r=s.apply(this,[a])),!1!==r},default_context_menu_offset:function(e,r){var o=e.offset(),n=r.noOffsetSpacing?0:10,i=e.outerWidth(),l=e.outerHeight(),c=r.noWidthOffset?0:i,d=r.noHeightOffset?0:l,_=(r.noFlipWidthOffset,r.noFlipHeightOffset,0),u=0,p=0;"Chrome"!==S.browser&&"Edge"!==S.browser||(_=.5);var f={top:o.top+d+t.definedOrDefault(r,"offsetSpacingTop",n),left:o.left+_+c+t.definedOrDefault(r,"offsetSpacingLeft",n),bottom:"auto",right:"auto"};if(r.adjustForParentWindow){var m=(g.detached_window_available(!0)?s.stat.iframe:S.stat.iframe).offset(),v=a.stat.win;u=m.top-v.scrollY,p=m.left-v.scrollX,f.top=f.top+u,f.left=f.left+p}var h=t.definedOrDefault(r,"heightEstimate",285),b=t.definedOrDefault(r,"widthEstimate",500),y=g.detached_window_available(!0)?s.stat.win:S.stat.win,T=y.innerWidth,x=y.innerHeight;if(f.top+h>x&&(f.bottom=x-(o.top+u)+t.definedOrDefault(r,"offsetSpacingBottom",n),f.top="auto",f.bottom+h>x)){let e=f.bottom+h-x;f.bottom-=e+10}return f.left+b>T&&(f.right=T-(o.left+p+i)+t.definedOrDefault(r,"offsetSpacingRight",n),f.left="auto"),f},getMainOrDetachedObj:function(){return g.detached_window_available(!0)?s:S},show_suggestions_menu:function(e){S.getMainOrDetachedObj().show_context_menu({filter:".cm-suggestions",$clicked:e,clickedDoc:a.stat.doc,adjustForParentWindow:1,noOffsetSpacing:1,noWidthOffset:1,hideHeader:!0}),S.pref.show_suggestions_menu=1},hide_suggestions_menu:function(){S.getMainOrDetachedObj().close_context_menu();var e=a.stat.frontendControls.find(".show-suggestions-icon");t.isDomEl(e,!0,a.stat.doc)&&e.removeClass("on"),S.pref.show_suggestions_menu=0},get_toggle_switch_template:function(e){var t=S.templates.toggle_switch.replace(/toggle_aspect/g,e.aspect).replace("toggle_id",e.id).replace('title="enable_toggle_tooltip"','title="'+(e.on?e.disableTT:e.enableTT)+'"').replace('data-pos="enable_toggle_tooltip"','data-pos="'+e.enableTT+'"').replace("disable_toggle_tooltip",e.disableTT);return e.on&&(t=t.replace("uit-par","uit-par on")),t},generate_selector_variations:function(e){var a,s=TvrMT.data.prog.selector_variations,r=Object.keys(s),o=e.M,n=t.custom_to_non_escaped(S.curSelCSS),i=/(?:(:hover|:focus|::?before|::?after))$/,l=n.match(i),c="normal",d=S.get_all_selector_code(!0,!0),_={},u='<div class="selector-variation-items fake-radio-parent">';l&&(c=l[1]);for(var p=0;p<r.length;p++){var f,g=r[p],m=g.replace("::",""),v=g===c;if(_[g]={label:s[g].label},v)f=o.selectorCode,a||(a=o.selectorH.replace(/ \(.+?\)$/,"")),_[g]={code:f,existing:{id:S.selInFocusID.replace(/^opts-/,"strk-"),sName:o.selectorH}};else{switch(g){case"normal":f=n.replace(i,"");break;case":hover":case":focus":case"::before":case"::after":f="normal"===c?n+g:n.replace(i,g)}for(var h in _[g].code=f,d)if(d.hasOwnProperty(h)){var b=d[h];"hand_coded_css"!==b.type&&f===b.code&&(b.id=h,_[g].existing=b)}}_[g].isCurrentState=v,_[g].variationCode=f}for(p=0;p<r.length;p++){v=_[g=r[p]].isCurrentState,f=_[g].variationCode;var y=TvrMT.data.templates.variation_radio,T=v?" in-focus":"",x=f,w='data-code="'+t.regular_escape_quotes(f)+'" data-key="'+g+'"',k=v?S.get_base_styles_switch(g):"";a&&(w+='data-rootlabel="'+a+'"'),_[g].existing&&(T+=" variation-exists",x+=" ("+_[g].existing.sName+")",w+='data-id="'+_[g].existing.id+'"'),u+='<div class="mt-variation-item mt-variation-item-'+m+" mt-variation-option "+T+'" '+w+">"+y+'<span class="variation-label mt-variation-option" title="'+t.regular_escape_quotes(x)+'">'+s[g].label+"</span>"+k+"</div>"}u+="</div>",e.$content.find("#mt-selector-state-options").html(u)},get_base_styles_switch:function(e){var t="pseudo_base_styles";return"::before"===e||"::after"===e?'<span class="mt-variation-styles">\t<span>'+TvrLang.base_styles+"</span>"+S.get_toggle_switch_template({on:S.pref[t],aspect:t,id:t,enableTT:TvrLang.add_base_styles,disableTT:TvrLang.remove_base_styles})+"</span>":""},switch_selector_variation:function(e){t.startT(arguments);var a=e.closest(".mt-variation-item");if(a.hasClass("in-focus"))return!1;var s=a.data(),r=s.key,o=t.convert_to_param(r,""),n=S.get_base_styles_switch(r);if(a.addClass("in-focus").siblings().removeClass("in-focus"),S.clear_css_filters(!0),a.siblings().find(".mt-variation-styles").remove(),n&&a.append(n),s.id)S.resume_existing_or_set_draft_selector(!1,{},{existingSelector:{id:s.id},forceResume:!0,switchSelVariation:1});else{if(S.feature_on(S.stat.cssModifiers.find(".filter-"+o),void 0,{doNotSelectEl:!0}),S.feature_on(!1,"create_additional_selector"),s.rootlabel){S.disable_selector_auto_name();var i=s.rootlabel+" ("+r+")";S.update_nice_name(i,!1)}S.sug_sel_updated({val:s.code,stateSelectorSet:1,addPseudoBaseStyles:("::before"===r||"::after"===r)&&r,switchSelVariation:1,doNotRepositionOverlays:1})}t.endT(arguments)},adjust_pseudo_base_styles:function(a,s){for(var r=S.get_selector_in_focus(),n=i.get_selector_data(r).data,l=(S.get_default_unit("dimensions","width"),S.get_default_unit("dimensions","height"),{behaviour:{content:{value:'" "'}}}),d=s?e.extend(!0,l,{background:{background_color:{value:"rgb(255, 192, 203)"}},dimensions:{width:{value:"20",unit:"px"},height:{value:"20",unit:"px"}},behaviour:{display:{value:"inline-block"}}}):l,_=Object.keys(d),u=0;u<_.length;u++)for(var p=_[u],f=d[p],m=Object.keys(f),v=0;v<m.length;v++){var h=m[v],b=f[h],y=t.checkObject(n,["styles",p,h]),T=y?y.value:void 0,x=y?y.unit:void 0;a&&!y?t.updateObject(n,["styles",p,h],e.extend(!0,{},b)):a||b.value!==T||b.unit!==x||"content"===h||delete n.styles[p][h]}var w="all-devices"!==r.tabSlug,k={savePackage:[],keepAsDraft:!0,doNotRepositionOverlays:1};k=i.modify_main_js_object("group_to_css",k,{M:r,domDepth:"group",mq_key:r.tabSlug,incRecurse:w,onlyRecurse:w,recurse_key:["m_query"]}),S.client_scss&&c.ajax_save_settings({keepSelectorAsUnsavedDraft:1,settings:k,serialise:!0}),S.trigger_pg_icon_click(r.groupSlug),g.editor_and_gui()&&o.gui_to_editor(!1,r,"property"),k=S.js_check_values(k,r)},wizard_expanded:function(){S.default_to_tab("wizard"),S.maybeUpdateInspectorPanels({updateComputed:1,updateStyles:1,updateHTML:1})},wizard_collapsed:function(){},after_animation:function(e,t){var a="transition"===t.type?"transitionend.tvr webkitTransitionEnd.tvr oTransitionEnd.tvr otransitionend.tvr MSTransitionEnd.tvr":"oanimationend.tvr animationend.tvr webkitAnimationEnd.tvr";e.on(a,(function(s){var r=TvrMT.integrate.elementor.newResponsiveMode?"margin-left":"left";if("elementorLeftPanelAdjusted"!==t.aspect||s.originalEvent.propertyName!==r&&"width"!==s.originalEvent.propertyName){if("elementorRightPanelAdjusted"===t.aspect)"width"===s.originalEvent.propertyName&&n.builderRightPanelAdjusted("elementor",TvrMT.integrate.elementor.doUpdatePreviewForRightPanel());else if(t.cb){let a=t.args||[];a.push(e,s,t),t.cb.apply(this,a)}}else n.builderLeftPanelAdjusted("elementor",!0);t.justOnce&&e.off(a)}))},selname_code_synced:function(e,t){var a="selname_code_synced"==e.attr("id")?"wizard":"existing-sel",s=!!t,r="wizard"==a?S.stat.curCodeInput.val():e.closest(".mt-folder-form").find(".selector-css-textarea").val();if(r){var o="wizard"===a?S.get_selector_in_focus():S.context_menu_data.M;S.doNotResizeInputs=!0,o&&(S.ignoreSelector=o.sectionSlug+"-"+o.selectorSlug),"wizard"===a?S.update_nice_name(!1,r,s):e.closest(".mt-folder-form").find("input.selector-name-input").val(S.format_nice_name(r,s)),S.ignoreSelector=!1,S.doNotResizeInputs=!1}},filter_favourited:function(e,t,a){},filter_un_favourited:function(e,t,a){},toggle_screen_preview:function(e){t.startT(arguments),(e=e.closest("li.mt-screen-preview")).hasClass("clicked")?S.get_local_window_function("unset_screen_preview")(e,"clicked"):S.get_local_window_function("set_screen_preview")(e,"clicked"),t.endT(arguments)},screen_width_adjusted:function(e,a){t.startT(arguments),S.iframeEditing()&&(S.post_screen_width_adjusted(e,a),t.action_after_timeout("screen_width_adjusted",550,{item:S.post_screen_width_adjusted,args:[e,a]})),t.endT(arguments)},post_screen_width_adjusted:function(e,t){t=t||{updateComputed:1,updateStyles:1},a.reposition_overlays({con:e,scroll:0}),a.getAndUpdateCompStyles(!1,!1),t.skip||S.maybeUpdateInspectorPanels(t)},map_formatted_comp:function(e,a,s,r,o,n,i,l,c){if(t.startT(arguments),c)var d=S.intelliCompProps;else d=S.compProps;if("straight"==s&&("var"==a?d[e[r]]=n:(0==o&&(d[e[r]]=[]),d[e[r]][o]=[],d[e[r]][o].val=n,d[e[r]][o].htmlString=i)),"array"==s){var _=-1,u=e[r];for(var p in u)u.hasOwnProperty(p)&&("var"==a?d[u[p]]=l[++_]:(0==o&&(d[u[p]]=[]),d[u[p]][o]=[],d[u[p]][o].val=l[++_],d[u[p]][o].htmlString=i))}c?S.intelliCompProps=d:S.compProps=d,t.endT(arguments)},format_exceptions:function(e,a,s,r,o,n){var i,l;if("var"==o?i=s:s[r]&&(i=s[r].val,l=s[r].htmlString),!t.hasValue(i))return!1;if("font-family"==a||"display"==a||"grid-template-areas"==a||"list-style-type"==a||"border-top-left-radius"==a||"border-top-right-radius"==a||"border-bottom-right-radius"==a||"border-bottom-left-radius"==a)S.map_formatted_comp(e,o,"straight",a,r,i,l,[],n);else if("text-shadow"==a||"box-shadow"==a){var c=i.match(/(-?\d+px)|(rgba?\(.+\))/g);if(c){if("MSIE"!=S.browser){var d=c[1],_=c[2],u=t.replace_decimals(c[0],1),p=c[3];if("text-shadow"==a)c=[d,_,p,u];else if("box-shadow"==a){c=[d,_,p,c[4],u,c[5]]}}}else c=[0,0,0,"none"],"box-shadow"==a&&(c[3]=0,c[4]="none",c[5]="");S.map_formatted_comp(e,o,"array",a,r,i,l,c,n)}else if("list-style-image"==a)S.map_formatted_comp(e,o,"straight",a,r,t.basename(i),l,[],n);else if("background-img-full"==a){var f=[];f[0]=t.extract_str("bg-image",i);var g=t.extract_str("gradient",i);if(g){var m=/gradient\((.+)\)/.exec(g);if(m){var v=m[1],h=t.get_all_matches(v,/rgba?\([^)]+\)/g,0),b=t.replace_all_matches(v,h,"xxx").split(", "),y="";i.indexOf("webkit")>=0&&(y="webkit-");var T="top to bottom",x=!1,w=0,k=0;if(b[0].indexOf("deg")>-1&&(T=e.keys[y+"gradient-angle"][b[0]],x=!0,k=1),f[1]=T,f[2]=h[w],x&&b.length>3||!x&&b.length>2){var C=b[++k].split(" ");f[3]=h[++w],f[4]=C[1],f[5]=h[++w]}else f[3]=h[++w],f[4]="0",f[5]="none"}else g.indexOf("svg")>-1&&(f[1]="IE9 can't report",f[2]="IE9 can't report",f[3]="IE9 can't report",f[4]="IE9 can't report",f[5]="IE9 can't report")}else f[1]="none",f[2]="none",f[3]="none",f[4]="0",f[5]="none";S.map_formatted_comp(e,o,"array",a,r,i,l,f,n)}else if("background-position"==a){var M=(P=i.split(", "))[0].split(" "),j=e.keys["background-position-x"][M[0]],D=e.keys["background-position-y"][M[1]],I=j||M[0],O=D||M[1],E=I+" "+O;S.map_formatted_comp(e,o,"straight",a,r,E,l,[],n)}else if("background-repeat"==a||"background-attachment"==a||"background-size"==a||"background-clip"==a){var P=i.split(", ");S.map_formatted_comp(e,o,"straight",a,r,P[0],l,[],n)}},filter_css_exceptions:function(e){if(t.startT(arguments),e)var a=S.intelliCompProps;else a=S.compProps;var s=TvrMT.data.prog.propExc,r=0;for(var o in a)if(a.hasOwnProperty(o)){++r;var n=a[o];if(n===Object(n))for(var i in n)n.hasOwnProperty(i)&&S.format_exceptions(s,o,n,i,"obj",e);else S.format_exceptions(s,o,n,"","var",e)}return t.endT(arguments),r},single_comp_value:function(e){var t=S.compProps[e];return Array.isArray(t)&&(t=t[0].val),t},refresh_comp_css:function(a){if(t.startT(arguments),p.tinymce.initialising||p.tinymce.pendingUpdate)S.pendingComp=!0;else if(S.selInFocusID){var s=e("#"+S.selInFocusID);if(!S.iframeEditing()||!S.selInFocusID||!t.isDomEl(s))return t.endT(arguments),!1;var r=S.filter_css_exceptions(!1),o="html"===S.pref.pg_focus;if(r<1&&!o){var n=TvrLang.null_selector;return s.find(".option-value").text(n),s.find("div.field-wrap").removeClass("mixed-cp").find("span.comp-style").text(""),void t.endT(arguments)}var i="div.field-wrap:not(.tvr-editor-area)",l=S.pref.pg_focus?s.find("li.group-tag-"+S.pref.pg_focus).find(i):s.find(i),c=S.get_nth_focus(),d=S.get_meta(l.first(),"group"),u=p.getFieldValues(d.groupTab,d,!0),f=u.action,g=u.aspect;p.getFieldValues(d.groupTab,d);l.each((function(r){var n=e(this);if(!n.hasClass("group-label")&&!n.hasClass("sub-label")){var i,l=n.find(".option-label"),_=n.find(".option-value"),m=l.text(),v=n.find("span.comp-style"),h=n.find(".property-input"),b=h.val(),y=v.attr("class").split(" ")[1].replace("cprop-",""),T=y,x=l.data("prop"),w=TvrMT.data.prog.pg_tab_props.grid.griditems[x],k=TvrMT.data.prog.pg_tab_props.grid.allgriditems[x],C=k?1:c-1,M=!1,j=n.hasClass("has-variable-line"),D=!0;if(S.propAliases[y]&&(y=S.propAliases[y]),o){if("action"===y||"aspect"===y)i=u[y]||S.defaultTabValues.html.defaults[y];else if("selector"===y)i=d.selectorCode;else if("juncture"===y)i="jsFunction"===g?"DOMContentLoaded":"lazyLoad"===f?"serverHTMLReady":S.pref.default_amender_event;else if(i=TvrMT.data.prog.lh[y].defVal,"text"===y||"snippet"===y){let e=p.getInitialFieldValue(y,f,g,"",d.selectorCode);e&&(i=t.escapeHTML(e),D=!1),parseInt(S.pref.mt_rich_text)&&(b||p.tinymce.pendingUpdate||"text"!==y||"replace"!==f||"text"!==g||t.action_after_timeout("tinymce_timer_comp_refresh",250,{item:function(){h.val()||p.tinymce.pendingUpdate||p.tinymce.update(e,!1,a)},args:[]}))}}else i="grid"===S.pref.pg_focus&&c>0&&S.grid.items&&S.grid.items.length&&S.grid.items[C]&&(w||k)&&(s.find(".grid-tab-griditems").hasClass("active")||s.find(".grid-tab-allgriditems").hasClass("active"))?S.grid.items[C].comp[y]:S.compProps[y],"event"===y?i=b||("animation"===S.pref.pg_focus?"page load":"unknown"):"event-target"===y?i=b||"self":"event-value"===y&&(i=b||"not set");S.compProps[T]=i;var I=0;if(t.isDefined(i))if(i===Object(i)){n.addClass("mixed-cp"),S.update_comp_input_overlay(n,v,"[mix]");var O=TvrLang.value_varies,E="";for(var P in i){if(i.hasOwnProperty(P))if(t.isDefined(i[P].val))E+='<tr class="mixed-val" rel="'+I+'"><td>'+ ++I+"</td><td title='"+t.escapeHTML(i[P].htmlString)+"'>"+S.colored_box(i[P].val,!0)+"</td></tr>"}n.find("table.comp-mixed-table").find("tbody").html(E)}else{O=i;n.removeClass("mixed-cp");var F=i;if(D&&!j&&(i=S.truncate_displayed_comp_css(h,i)),n.hasClass("is-picker")){M=!0;var L="background-color:transparent";"transparent"!=F&&"none"!=F&&(L="background-color:"+F,O=t.maybe_to_hex(F)),v.html('<span style="'+L+'"></span>')}else S.update_comp_input_overlay(n,v,i)}else{O=TvrLang.style_not_applicable;"Content"==m&&(O=TvrLang.not_knowable),v.text("")}var A=M?S.trans_gradient_box(F,"computed-color-box")+O:O;_.html(A)}})),s.addClass("visible-computed"),S.flexbox_dynamic_gui(s,{compProps:S.compProps}),"grid"===S.pref.pg_focus&&(_.update_nth_radios(),S.skipGridReflow?S.skipGridReflow=!1:_.itemResising||_.update_grid_canvas()),t.endT(arguments)}},update_comp_input_overlay:function(t,a,s){if(t.hasClass("has-variable-line")){var r=s.split(" "),o=r.length?r:[s];a.each((function(t){e(this).html(o[t])}))}else a.html(s)},flexbox_dynamic_gui:function(e,a){if(a.compProps["flex-direction"]){var s=e.find("div.property-flexbox"),r=a.compProps["flex-direction"];s.removeClass("flex-direction-column flex-direction-column-reverse flex-direction-row-reverse"),t.in_array(r,["column","column-reverse","row-reverse"])&&s.addClass("flex-direction-"+r)}},truncate_displayed_comp_css:function(e,a){t.startT(arguments);var s=e.width()/6;return a.length>s&&(a=a.substring(0,s)+"..."),t.endT(arguments),a},colored_box:function(e){if(!e||e.indexOf("rgb")<0||e.indexOf(":")>-1)return e;var a=t.maybe_to_hex(e),s=S.trans_gradient_box(e);return s+='<span class="colored-val">'+a+"</span>"},trans_gradient_box:function(e,t){t=t||"colored-box";var a=S.pref.mt_dark_mode?"trans-big-dark":"trans-big";return'<span class="'+t+'" style="background-image: linear-gradient(0deg, '+e+", "+e+"), url("+S.pluginUrl+"images/"+a+'.png)"></span>'},slugs_from_id:function(e){var a=e.split("-"),s=a[1],r=a[2],o=t.checkObject(S.uiData,[s,r,"label"]);return o=o?o.split("|"):[],!!a.length&&{sectionSlug:s,selectorSlug:r,selectorH:o[0],selectorCode:o[1]}},default_to_sel:function(e){var a=t.checkObject(S.uiData,["non_section","meta","last_viewed_selector"]),s=!!a&&S.slugs_from_id(a);return s&&t.checkObject(S.uiData,[s.sectionSlug,s.selectorSlug])||(s=i.modify_main_js_object("get_first_sel",{incRecurse:!1,callbackDepth:["selector"]}).slugs),!!s&&S.tvr_iterate_selectors_v(!1,"strk-"+s.sectionSlug+"-"+s.selectorSlug,e)},get_manual_wrap_class:function(e){return e.hasClass("mt-vl-input")?".vl-item":".tvr-input-wrap"},adjust_comp_span:function(e,a){t.startT(arguments);var s=this.get_manual_wrap_class(e);let r=e.closest(s),o=r.find("span.comp-style:not(.comp-for-picker)").first(),n=e.val()?"addClass":"removeClass";"after"===a?(r[n]("manual-val"),o[n]("hidden")):"hover"===a&&o.addClass("hidden"),t.endT(arguments)},add_comp_overlay:function(e,t){e.closest(t).removeClass("manual-val"),e.siblings("span.comp-style:not(.comp-for-picker)").removeClass("hidden")},remove_comp_overlay:function(e,t){e.closest(t).addClass("manual-val"),e.siblings("span.comp-style:not(.comp-for-picker)").addClass("hidden")},chain_is_on:function(e){return t.isDomEl(e.subgroup.find("input.chained-tracker"))},sync_fields:function(a,s,r){t.startT(arguments);var o=S.get_subgroup_or_tabgroup(s,"inputs"),n=a.val(),l=!1;o.not(a).not(".vl-name-input").each((function(a){var o=e(this),c=o.closest(".property-tag");if(o.hasClass("color"))o.hasClass("bound")||S.colorpicker_bind(o.parent()),n?S.maybe_set_variable_color(n,o,!1,!0,!1)||S.update_spectrum(n,o,{},!1):S.clear_spectrum_inputs(S.get_meta(o,"property"));else if(o.val(n),t.isDefined(r)){var d=S.get_meta(o,"property");m.apply_property_unit(n,n,r,c,d.groupSlug,d.propertySlug,{writeToLabel:1,writeToInput:1,writeToJS:1,trail:i.get_property_data(d).propLevels})}a>0&&""===n&&c.hasClass("has-variable-line")&&(S.delete_variable_field(c,o,s,!1),l=!0),S.post_edit(o)})),l&&S.adjust_grid_line_scroll_buttons(s),t.endT(arguments)},maybe_sync_fields:function(e,a){if(t.startT(arguments),e.hasClass("autofillable")){var s=S.get_meta(e,"property");S.chain_is_on(s)&&S.sync_fields(e,s,a)}t.endT(arguments)},sync_important:function(a,s){(t.startT(arguments),S.chain_is_on(a))&&S.get_subgroup_or_tabgroup(a).not(a.property).each((function(t){var a=e(this).find("span.important-toggle");("add"==s&&!a.hasClass("active")||"remove"==s&&a.hasClass("active"))&&S.input_icon_toggle(a,!0)}));t.endT(arguments)},fixVariableDefinitions:function(e){if("string"!=typeof e)return e;return e.replace(/var\(([^()]+?)\b(?=\s|$)/g,"var($1)")},run_input_updated:function(e,a){var s=e.attr("class"),r=!1,o=!1;if(!s)return!1;if(s.indexOf("property-input")>=0){S.inputWaitingObj=e;var n=S.get_meta(e,"property"),i=e.val();if(i&&0===i.indexOf("="))if(!S.process_excel_function(i,n.propertySlug).converted)return S.post_edit(e),!0;S.maybe_sync_fields(e),S.post_edit(e)}else if(s.indexOf("selector-name-input")>=0||s.indexOf("selector-css-textarea")>=0)r=!0,S.pref.selname_code_synced&&e.closest(".mt-folder-form").find(".selector-name-input, .selector-css-textarea").not(e).val(e.val());else if(s.indexOf("sp-input")>=0){var l=S.get_related_meta("picker",e.closest(".sp-container")),c=S.inputWaitingObj=l.$input;if(s.indexOf("sp-input-opacity")>-1){var d=e.val();if(isNaN(d)||d<0||d>1)return;c.mtspectrum("get")||c.mtspectrum("set",l.$container.find(".sp-input-rgb").val());var _=c.mtspectrum("get").toRgb();_.a=d,c.mtspectrum("set",_),S.update_spectrum_inputs(tinycolor(_),c,e,!0)}else s.indexOf("sp-input-var")>-1?S.maybe_set_variable_color(e.val(),c,e,!0):S.update_spectrum(e.val(),c,e,!0)}else s.indexOf("snippet-dep-adjust")>=0&&(t.action_after_timeout("adjust_dep_snippet",100,{item:p.npm.updateSnippetDependency,args:[e,s]}),o=!0);r||o||S.set_input_timer()},maybe_set_variable_color:function(e,a,s,r,o){o=!t.isDefined(o)||o;var n,i,c=!l.isJustColor(e,!0)&&e;return c?(c.indexOf("var(")>-1?(i=l.get_variable_name(c))&&(n=l.get_variable_value(i,"css",!0)):c.indexOf("$")>-1&&(n=l.get_variable_value(i,"scss")),n&&S.update_spectrum(n,a,{},o,!0),s&&s.val(c),a.val(c),o&&S.maybe_sync_fields(a),!0):(r&&(S.update_spectrum(e,a,{},o,!0),a.val("")),!1)},bind_input_events:function(e){t.startT(arguments),S.unbind_input_events(e),e.on("input.tvr propertychange.tvr",(function(t){S.run_input_updated(e,t)}));const a="mt-text-editor"===e[0].id;a&&e.closest(".property-tag").addClass("mt-textarea-focus"),e.on("blur",(function(){S.unbind_input_events(e),a&&e.closest(".property-tag").removeClass("mt-textarea-focus")})),t.endT(arguments)},unbind_input_events:function(e){e.off("input.tvr propertychange.tvr")},update_input_width_and_scroll:function(e,a,s,r,o,n,i,l){if(t.startT(arguments),r||g.flexible_field_widths()){o=o||S.stat.inputWidthCalc,n=n||0;var c=e.val(),d=(c.length,c.replace(/\s/g,"&nbsp;"));o.html(d);var _=o.innerWidth()+n,u=l?e.parent():e;if(i){var p=t.isDefined(i[0])&&Array.isArray(i)?i[0]:"0px",f=t.isDefined(i[1])&&Array.isArray(i)?i[1]:"100%";u[0].style.cssText="width:clamp("+p+", "+_+"px, "+f+")"}else u.width(_);s||S.adjust_scroll_buttons(S.get_pg_meta(),"style")}t.endT(arguments)},maybe_scroll_image_fields:function(a){"list"!==a.groupSlug&&"background"!==a.groupSlug&&"mask"!==a.groupSlug||a.group.find(".bg-image-select").each((function(){t.scroll_input_end(e(this))}))},done_typing:function(){if(S.isForbiddenProperty(S.inputWaitingObj))return!1;c.ajax_save_settings({$property:S.inputWaitingObj})},get_folders:function(){let t,a,s=[];if(parseInt(S.pref.auto_folders_page)){let e=u.matchFolders({type:"conditional",match:"logic",logic:null,contains:!0,checkLoading:!0,returnList:!0,addPageLogicIfMissing:!0,returnNewFolder:!0});e&&e.createNewFolder&&(e.value=e.label,e.itemConditional=!0,t=e)}return e("#tvr-menu").find(".section-tag").each((function(r){var o=S.get_meta(e(this),"section"),n=u.folderIsConditional(o.sectionSlug),i=!!u.folderIsEffectivelyGlobal(o.sectionSlug);s[r]={category:TvrLang.select_enter_folder,value:o.sectionH,itemConditional:n&&!i},t&&o.sectionSlug===t.slug&&(a=!0)})),t&&!a&&s.push(t),s},get_label_suggestions:function(){var e,t=[],a=S.get_selector_in_focus();S.retargetSelector&&(e=S.retargetSelector.selectorH,t.push({category:TvrLang.original_label,value:e}));var s=S.format_nice_name(a.selectorCode,!1),r=S.format_nice_name(a.selectorCode,!1,!0);return s!==e&&t.push({category:TvrLang.label_suggestions,value:s}),r!==e&&r!==s&&t.push({category:TvrLang.label_suggestions,value:r}),t},ensure_targeting_is_on:function(t){t.bind_wizard_hover(),e("#hover-inspect-toggle").addClass("on")},default_to_folder:function(a){var s="";if(S.retargetSelector)s=S.retargetSelector.sectionH;else if(t.hasValue(S.selInFocusID)){s=S.get_meta(e("#"+S.selInFocusID),"selector").sectionH}else{var r=t.obj_index(0,S.uiData,"non_section");s=r?r.this.label:""}return a&&S.stat.curSecInput.val(s),s},generalTargetingClassFlag:"targeting-or-retargeting",retargetClassFlag:"retarget_selector",selectorLabelEditingClassFlag:"editing-selector-label",adjustClassesOnAdminAndFront:function(e,t){"add"===e?(S.stat.tvr.addClass(t),S.iframeEditing()&&a.stat.html.addClass(t)):"remove"===e&&(S.stat.tvr.removeClass(t),S.iframeEditing()&&a.stat.html.removeClass(t))},selector_key_atts:function(e){return{sectionH:e.sectionH,sectionSlug:e.sectionSlug,selectorSlug:e.selectorSlug,selectorH:e.selectorH,selectorCode:e.selectorCode,id:e.selectorID,mid:e.selectorMID}},show_selector_label_edit:function(){S.selectorLabelEditing||S.stat.tvr.hasClass(S.generalTargetingClassFlag)||(S.stat.tvr.addClass(S.selectorLabelEditingClassFlag),S.selectorLabelEditing=S.get_hierarchy_input_values())},save_selector_label_edit:function(t){var a=S.get_meta(e("#"+S.selInFocusID),"selector"),s=S.stat.curSelInput.val(),r=S.selectorLabelEditing,o=e.extend(!0,{},r,{selectorH:s});if(!S.modify_selector_if_values_changed(a,!1,r,o))return!1;S.hide_selector_label_edit(t)},cancel_selector_label_edit:function(e){var t=S.stat.curSelInput;t.val(S.selectorLabelEditing.selectorH),S.size_hierarchy_inputs(t),S.hide_selector_label_edit(e)},hide_selector_label_edit:function(e){S.enable_selector_auto_name(!0),S.stat.tvr.removeClass(S.selectorLabelEditingClassFlag),S.selectorLabelEditing=!1,e||S.stat.curSelInput.trigger("blur")},retarget_selector:function(a){if(t.startT(arguments),!S.retargetSelector){MTlocal.clean_tooltips();var s=a||e("#"+S.selInFocusID),r=S.get_meta_for_context(s,"selector");S.is_cur("selector",r.selectorID)||S.tvr_iterate_selectors_v(r.selectorM),S.update_current_selector_controls(r),S.show_hierarchy_inputs(!0),S.retargetSelector=S.selector_key_atts(r),S.retargetSelector.initialModifySavePackage=!1,S.retargetSelector.initialFolderMoveSavePackage=!1,t.updateObject(S.uiData,[r.sectionSlug,r.selectorSlug],S.retargetSelector,{action:"append",key:"isDraftRetarget",data:S.retargetSelector}),S.sync_selector_modifiers(S.curSelCSS),S.feature_on(e("#hover-inspect-toggle"),"hover_inspect"),t.endT(arguments)}},disable_selector_auto_name:function(){S.feature_off(e("#selector_auto_name"),"selector_auto_name",{noSave:1})},enable_selector_auto_name:function(t){S.feature_on(e("#selector_auto_name"),"selector_auto_name",{noSave:1,doNotUpdateField:t})},save_draft_selector:function(s,r,o,n,l){o=o||S.get_meta(e("#"+S.selInFocusID),"selector"),n=n||{savePackage:[]};var d=S.get_hierarchy_input_values(!1,!0),_=s?"isDraftRetarget":"isDraft",p=!s,f=s?"retarget":"new",g=S.modify_selector_if_values_changed(o,!0,o,d);if(!g)return!1;if(S.hide_hierarchy_inputs(),g.changedRequired&&(o=S.get_meta(e("#"+S.selInFocusID),"selector")),n.user_action=t.checkObject(S.draft_user_action,[f,"user_action"]),p)n.savePackage.push({action:"append",trail:[o.sectionSlug],key:o.selectorSlug,data:t.checkObject(S.uiData,[o.sectionSlug,o.selectorSlug])});else if(s){S.retargetSelector.sectionSlug!==o.sectionSlug&&o.sectionH;S.retargetSelector.M=S.selector_key_atts(o),Array.prototype.push.apply(n.savePackage,S.surgically_adjust_retarget_save_packages(S.retargetSelector))}i.updateObjectAndSavePackage(n.savePackage,{action:"delete",trail:[o.sectionSlug,o.selectorSlug],key:_});let m=!1!==t.in_array(o.sectionSlug,S.draftFolders)&&t.checkObject(S.uiData,[o.sectionSlug,"this","logic","expr"]);if(S.resetDraftTrackers(s,!0,"afterSave"),S.save_last_viewed_selector(S.selInFocusID),!S.doNotReselectRevertedRetargetSel&&S.iframeEditing()&&a.select_current_selector_elements({scroll:!1}),TvrMT.integrate.gutenberg){let e=TvrMT.integrate.gutenberg;e.cleanUnusedMTClasses(e.prevBlockEls)}if(r){let e=parseInt(S.pref.auto_folders),a={settings:n};m&&(u.updateDraftFolderInSession({},!0),u.maybeAddLogicAdjustedFlag(o.sectionSlug,a.settings),i.updateObjectAndSavePackage(a.settings.savePackage,{action:"replace",trail:[o.sectionSlug,"this"],data:t.checkObject(S.uiData,[o.sectionSlug,"this"])}),e&&(a.settings=u.maybeAutoSortSection("js",o,n)),u.addSaveLogicCallback(o,!0,a,!0)),e&&(a.settings=u.maybeAutoSortSelector("js",o,a.settings)),l&&(a.aiRetryShouldAwaitSave=1),c.ajax_save_settings(a)}},clean_duplicate_save_packages:function(e,t){for(var a={},s=e.length-1;s>=0;s--){var r=e[s],o=r.trail.join(".");r[t]&&(a[o]?e.splice(s,1):a[o]=1)}},surgically_adjust_retarget_save_packages:function(e){if(!e.initialModifySavePackage)return[];var t=e,a=(e.M,e.initialModifySavePackage),s=e.lastModifySavePackage||a,r=e.initialFolderMoveSavePackage,o=e.lastFolderMoveSavePackage||r,n=S.findReplaceSavePackages(a,{returnRenameOrder:1}).order,i=[];return s&&(S.findReplaceSavePackages(s,{origAtts:t,origSelectorOrder:n,replaceTrailOnLabelCodeUpdate:1,applyOrigAttsToRename:1,applyOrigSectionToSelectorReplace:1}),Array.prototype.push.apply(i,s)),o&&(S.findReplaceSavePackages(o,{origAtts:t,applyOrigAttsToDeleteSelector:1}),Array.prototype.push.apply(i,o)),i},findReplaceSavePackages:function(e,a){for(var s={},r=a.origAtts||{},o=0;o<e.length;o++){var n=e[o];switch(n.action){case"array_merge_recursive_distinct":a.replaceTrailOnLabelCodeUpdate&&t.checkObject(n,["data","label"])&&S.replaceInTrail(n.trail,r.sectionSlug,r.selectorSlug);break;case"rename":a.returnRenameOrder?s.order=n.order:a.applyOrigAttsToRename&&(n.key=r.selectorSlug,n.order=a.origSelectorOrder,S.replaceInTrail(n.trail,r.sectionSlug,!1,-1));break;case"reorder":break;case"replace":a.applyOrigSectionToSelectorReplace&&n.fullSelectorUpdate&&S.replaceInTrail(n.trail,r.sectionSlug);break;case"delete":a.applyOrigAttsToDeleteSelector&&S.replaceInTrail(n.trail,r.sectionSlug,!1,-1)}}return s},replaceInTrail:function(e,t,a,s,r){t&&(s=void 0!==s?s:-2,e.splice(s,1,t)),a&&(r=void 0!==r?r:-1,e.splice(-1,1,a))},go_to_code_view_selector_line:function(e,t){var s=o.eds["adaptable-editor"],r=e.code;s.gotoLine(e.line,0,!1),s.navigateLineEnd(),t&&a.reposition_overlays({scroll:1,con:"resume-existing-code-sel",css:r}),o.prev_code_selector=r},should_resume_existing_draft:function(e,t){return"GUI"===t&&S.draftSelector.atts.mid===e.id},resume_existing_or_set_draft_selector:function(e,s,r){t.startT(arguments);var o=r.existingSelector||!(!a.isUsingExistingSel()||!s.mSels)&&s.mSels[0];if(o&&(r.forceResume||!S.retargetSelector&&!r.customCSSVal)){var n=S.pref.show_code_editor?"code":"GUI",i="hand_coded_css"===o.type?"code":"GUI",l="code"===i;if(S.should_resume_existing_draft(o,i)||S.cancel_draft_selector_edit(l,{elementAlreadySelected:"code"===i}),"GUI"===i?S.tvr_iterate_selectors_v(!1,o.id,{scroll:r.scroll,elementAlreadySelected:r.elementAlreadySelected,doNotUpdateSelectorSuggestions:r.doNotUpdateSelectorSuggestions,switchSelVariation:r.switchSelVariation}):S.go_to_code_view_selector_line(o,r.updateHighlighting),n!==i){var d="GUI"===i?i:"full code";c.update_full_logs({short:"See "+d+" view",long:"<p>An existing selector targets the element you selected, but it was created in the "+d+" view. To switch, go to <i>Settings > View > Full code editor</i> and adjust the toggle.</p>",type:"info"})}}else S.show_hierarchy_inputs(S.retargetSelector),S.create_or_update_draft_selector(!1,!0,r);t.endT(arguments)},create_or_update_draft_selector:function(a,s,r){t.startT(arguments);var n=S.get_hierarchy_input_values(a,s);if(!n)return!1;if(S.pref.show_code_editor){if(!S.pref.buyer_validated&&o.count_editor_selectors()>15)return alert(TvrLang.trial_notice),!1;n.selectorCode&&o.insert_code_view_selector(n.selectorCode)}else{var i=S.getOrCreateFolder(n.sectionH,s);if(!i)return!1;if(S.retargetSelector||S.draftSelector.atts.id){var l=S.get_meta(e("#"+S.selInFocusID),"selector");if(!S.modify_selector_if_values_changed(l,s,l,{sectionSlug:n.sectionSlug,sectionH:n.sectionH,selectorSlug:t.convert_to_param(n.selectorH),selectorH:n.selectorH,selectorCode:n.selectorCode},r))return!1}else if(S.get_set_selector_values({action:"set",target:"popup",context:"add",label:n.selectorH,code:n.selectorCode,M:i}),!S.add_selector(i,S.stat.addSelectorForm,s,r))return!1;r.addPseudoBaseStyles&&S.adjust_pseudo_base_styles(!0,S.pref.pseudo_base_styles)}t.endT(arguments)},get_hierarchy_input_values:function(e){var s,r=S.stat.curSecInput.val();t.hasValue(r)||S.default_to_folder(S.stat.curSecInput),e?s=S.format_nice_name(e,S.pref.selname_code_synced):(s=S.stat.curSelInput.val(),(e=S.stat.curCodeInput.val())||(e=t.checkObject(a,["dom","sels","final",0,"code"])),s||e&&(s=S.format_nice_name(e,S.pref.selname_code_synced)));var o=t.convert_to_param(r),n=u.maybeUseAutoOrAvailableFolder({sectionSlug:o,sectionH:r});return{sectionSlug:o=n.sectionSlug,sectionH:r=n.rawSecName,selectorSlug:t.convert_to_param(s),selectorH:s,selectorCode:e}},checkMaxedFolder:function(e,a){return t.obj_length(S.uiData[e],{exclIfDraft:a,exclKey:"this"})>=S.maxSelsPerFolder},get_set_selector_values:function(e){var t,a,s,r,o;if("M"===e.target)"get"===e.action&&(r=e.M.selectorH,o=e.M.selectorCode);else if("popup"===e.target)a=(t=S.stat[e.context+"SelectorForm"]).find(".selector-name-input"),s=t.find(".selector-css-textarea"),"get"===e.action?(r=s.val(),o=s.val()):"set"===e.action&&(a.val(e.label),s.val(e.code));else if("hiddenInput"===e.target){var n=e.M.selectorM.find(".selector-label");if("get"===e.action){var i=n.val().split("|");r=i[0],o=i[1]}else"set"===e.action&&n.val(e.label+"|"+e.code)}if("get"===e.action)return{label:r,code:o}},modify_selector_if_values_changed:function(e,a,s,r,o){o=o||{};var n=t.convert_to_param(s.sectionH)!==t.convert_to_param(r.sectionH)&&r.sectionH,i=s.selectorH!==r.selectorH,l=s.selectorCode!==r.selectorCode,c={};return!((n||i||l)&&(c.changedRequired=!0,S.get_set_selector_values({action:"set",target:"popup",context:"edit",label:r.selectorH,code:r.selectorCode,M:e}),!S.action_modify_selector(e,S.stat.editSelectorForm,{switchSelVariation:o.switchSelVariation},n,!1,a)))&&c},delete_draft_selector:function(){if(S.draftSelector.atts.id){var a=e("#"+S.draftSelector.atts.id);if(t.isDomEl(a)){var s=S.get_meta(a,"selector");S.action_delete_selector(s,!0)}}if(S.draftSelector.ace.range&&S.pref.show_code_editor){var r=S.draftSelector.ace;r.editor.session.replace(r.range,""),S.draftSelector.ace={}}},get_hierarchy_inputs:function(){return S.stat.curSecInput.add(S.stat.curSelInput).add(S.stat.curCodeInput)},show_hierarchy_inputs:function(e){var t=S.generalTargetingClassFlag;e&&(t+=" "+S.retargetClassFlag),S.adjustClassesOnAdminAndFront("add",t),S.size_hierarchy_inputs(S.stat.curCodeInput,!0)},size_hierarchy_inputs:function(a,s){(a=a||S.get_hierarchy_inputs()).each((function(){var a=e(this),r=!1;"code-hierarchy-input"===a.attr("id")&&(r=S.stat.codeInputWidthCalc),S.update_input_width_and_scroll(a,0,!0,!0,r,2),s&&t.scroll_input_end(a)}))},hide_hierarchy_inputs:function(){var e=S.generalTargetingClassFlag+" "+S.retargetClassFlag;S.adjustClassesOnAdminAndFront("remove",e)},resetRetargetCSSModifiers:function(){for(var e=Object.keys(S.preRetargetModifierConfig),t=0;t<e.length;t++){var a=e[t],s=S.preRetargetModifierConfig[a];s&&(s.wasOn?(s.$combined.addClass("on"),S.pref[s.type][a]=1):(s.$combined.removeClass("on"),delete S.pref[s.type][a]))}S.preRetargetModifierConfig={}},resetDraftTrackers:function(e,t,a){if(e){var s=S.retargetSelector.M;if(S.retargetSelector=!1,S.draft_user_action.retarget={},S.resetRetargetCSSModifiers(),"afterSave"===a)i.modify_main_js_object("update_section_css",{savePackage:[]},{M:s,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]})}else S.draftSelector.atts={},S.draft_user_action.new={};S.clean_draft_folders(),S.folderNameCustomized=!1,S.get_set_selector_values({action:"set",target:"popup",context:"add",label:"",code:""}),t&&S.clear_css_filters(!0),S.enable_selector_auto_name(!0),S.feature_off(!1,"create_additional_selector")},clean_draft_folders:function(){for(var a=S.draftFolders.length-1;a>=0;a--){var s=S.draftFolders[a],r=t.checkObject(S.uiData,[s]);if(!(t.obj_length(r)>1)){var o=e("#strk-"+s);if(t.isDomEl(o)){var n=S.get_meta(o,"section");S.action_delete_section(n,!0)}}S.draftFolders.splice(a,1)}},cancel_draft_selector_edit:function(s,r){if(S.hide_hierarchy_inputs(),S.retargetSelector){var o=S.retargetSelector,n=S.get_meta(e("#"+S.selInFocusID),"selector"),i=n.sectionSlug!==o.sectionSlug&&o.sectionH;if(S.update_current_selector_controls(!1,o),t.updateObject(S.uiData,[n.sectionSlug,n.selectorSlug],!1,{action:"delete",key:"isDraftRetarget"}),S.get_set_selector_values({action:"set",target:"popup",context:"edit",label:o.selectorH,code:o.selectorCode,M:n}),!S.action_modify_selector(n,S.stat.editSelectorForm,{},i,!1,!1,!0))return S.resetDraftTrackers(S.retargetSelector,!0,"afterCancel"),!1;!S.doNotReselectRevertedRetargetSel&&S.iframeEditing()&&a.select_current_selector_elements({scroll:!1})}else S.delete_draft_selector(),s&&S.default_to_sel(r);S.resetDraftTrackers(S.retargetSelector,!0,"afterCancel")},update_current_selector_controls:function(e,t,a){a=a||{};var s=e?e.sectionH:t.sectionH,r=e?e.selectorH:t.selectorH,o=e?e.selectorCode:t.selectorCode;S.stat.curSecTrailText.text(s),S.stat.curSecInput.val(s),S.update_and_scroll_input(S.stat.curSelInput,r),S.stat.curCodeInput.is(":focus")||S.update_cur_code(o),a.switchSelVariation&&S.edit_selector_fields_showing()&&(S.context_menu_data.M=e,S.update_edit_selector_fields(e,"selector",S.context_menu_data)),S.size_hierarchy_inputs()},human_tagname:function(e){var t={h1:"heading 1",h2:"heading 2",h3:"heading 3",h4:"heading 4",h5:"heading 5",h6:"heading 6",p:"paragraph",br:"line break",hr:"horizontal rule",abbr:"abbreviation",b:"bold",em:"emphasis",i:"emphasis",ins:"insert",pre:"preformatted",q:"quote",sub:"subscript",sup:"superscript",optgroup:"option group",img:"image",figcaption:"figure caption",a:"link",ul:"unordered list",ol:"ordered list",li:"list item",th:"table heading",tr:"table row",td:"table data",thead:"table head",tbody:"table body",tfoot:"table foot",col:"column",colgroup:"column group"};return t[e]?t[e]:e},human_pseudo:function(e){var a=t.pseudo_str_to_arr(e),s="";for(var r in a)a.hasOwnProperty(r)&&(s+=a[r].replace(/^:nth\-(?:child|of\-type)\((.*)\)$/,"#$1").replace(/^:nth\-last\-(?:child|of\-type)\((.*)\)$/,"#-$1").replace("link","unvisited"));return s?" ("+s+")":""},humanize:function(e,t,a){(a=a||{}).keepPre=a.keepPre?e:"";var s=new RegExp("("+e+")([_a-zA-Z0-9"+e+"\\(\\)\\[\\]=\\^\\*'\"\\/\\$~-]+)","g"),r=new RegExp(e,"g");return t=(t=t.match(s))&&t[0]?t[0].replace(r,a.keepPre):"",a.keepDashes||(t=t.replace(/[-_]+/g," ")),t.trim()},ensure_unique_name:function(e,a,s,r,o){t.startT(arguments);var n,i=1,l="create-new"===s?u.getFolderSelectorKeys(o):{};do{var c=!1,d=new RegExp(" _\\d+$");e.match(d)?(1===i&&(i=2),n=e.replace(d," _"+i)):n=i>1?e+" _"+i:e;var _=t.convert_to_param(n);if("folderName"==s)c=S.uiData[_];else if("folderWithSpace"==s)c=S.uiData[_]&&t.obj_length(S.uiData[_],{exclKey:"this"})>=S.maxSelsPerFolder;else if("import"==s)c=r.unqSels[_]&&r.unqSels[_].code!=a;else if("create-new"===s)for(let e=0;e<l.length;e++)if(l[e]===_){c=!0;break}i++}while(c);return t.endT(arguments),n},human_css_name:function(e,s,r){t.startT(arguments);var o=[],n=!1;if(e&&((n=e.match(/.bricks-is-frontend\s+(.+?),/))&&(e=n[1]),TvrMT.integrate.gutenberg&&a.triggerEl&&a.triggerEl[0]&&e.match(/\bmctr-[0-9a-z]{6}\b/))){let t=a.triggerEl[0].tagName;t&&(e=t.toLowerCase())}var i=e.split(","),l=S.sel_trail(i[0]).pieces.reverse();for(var c in l){if(!l.hasOwnProperty(c))continue;let e=l[c].match(/type="([^"]+)"/);o[c]={level:0==c?"child":"parent",tagName:l[c].split(/[#:.\[]/)[0],id:S.humanize("#",l[c]),class:S.humanize("\\.",l[c]),pseudo:S.human_pseudo(l[c]),type:e?e[1]:""}}var d=[];for(var c in o)if(o.hasOwnProperty(c)){var _,u="",p=o[c];_=S.human_tagname(p.tagName),p.pseudo&&(u=""+p.pseudo),p.id?d[c]=p.id:p.class?d[c]=p.class:p.type?d[c]=p.type+" "+_:d[c]=_,d[c]+=u}var f="";if(i[1]){f="+"+(i.length-1)+" "+TvrLang.more;d.unshift(f)}t.endT(arguments);d[0];var g=f?2:1,m=[];for(var v in d)if(d.hasOwnProperty(v)){if(v>=g)break;m.push(d[v])}var h=m.reverse().join(" ");n&&(h+=" [BGW]");let b=h;return(h=h.replace(/wp block\s?/g,"").replace(/wp\s/g,"WP "))||(h=b),""===h&&(h=TvrLang.untitled),h},code_or_fallback:function(e){return e||S.intelli_css},format_nice_name:function(e,a,s){return e=this.code_or_fallback(e),a?e:t.capitalizeFL(S.human_css_name(e,s))},update_nice_name:function(e,t,a){e=e||this.format_nice_name(this.code_or_fallback(t),a),this.update_and_scroll_input(S.stat.curSelInput,e)},update_cur_code:function(e){this.update_and_scroll_input(S.stat.curCodeInput,e)},update_and_scroll_input:function(e,a){e.val(a),S.doNotResizeInputs||S.size_hierarchy_inputs(e),t.scroll_input_end(e)},maybe_auto_select_label:function(t){t=t||e("#sel-hierarchy-input");var a=S.stat.suggestionsAdvanced.find(".code-suggestion.in-focus").find("input.sug-sel"),s=S.stat.cssModifiers.find("input.cssfilter-combo:focus"),r=e("#wizard_inspector_html").find("textarea:focus");S.pref.selname_code_synced||a.is(":focus")||s.length||r.length||TvrMT.integrate.elementor||t.trigger("select")},set_initial_size_of_nth_modifier_inputs:function(){e("#cm-css-filters").find(".cssfilter-combo").each((function(){S.update_input_width_and_scroll(e(this),0,!0,!0,S.stat.codeInputWidthCalc)}))},preRetargetModifierConfig:{},sync_selector_modifiers:function(a,s){t.startT(arguments);var r=S.get_active_modifiers_from_selector(a).active;S.stat.cssModifiers.find("li.css-filter-item").each((function(t){var a=e(this),o=a.data(),n=o.type,i=o.filter,l=a.hasClass("on"),c=!l&&r[i],d=l&&!r[i];if((!s||"page_specific"!==n)&&(c||d)){var _=S.get_css_filter_alias(a),u=a;_.length&&(u=u.add(_)),c?(u.addClass("on"),S.pref[n][o.pref_sub_key]=1):(u.removeClass("on"),delete S.pref[n][o.pref_sub_key]),"page_specific"===n&&(S.preRetargetModifierConfig[o.pref_sub_key]={wasOn:!c,$combined:u,type:n})}})),t.endT(arguments)},get_active_modifiers_from_selector:function(e){t.startT(arguments);var a=S.pref["custom-prefix-extraValue"]?"|("+t.escapeRegExp(S.pref["custom-prefix-extraValue"])+")":"",s=new RegExp("(?:((?:::?)|\\.mtp?-)([a-zA-Z0-9-]+)(?:\\((.+?)\\))?)"+a,"g"),r=/^:(nth|not|first|last)/,o=t.get_all_matches(e,s,0,{itemObj:1}),n=o.length,i={matches:o,active:{}};if(n)for(var l=n-1;l>=0;l--){var c=o[l],d=c.match[0];if(d.match(r))o.splice(l,1);else{var _=d,u=c.match[1];":"!==u&&"::"!==u&&(_=c.match[4]?"custom-prefix":t.isNumeric(c.match[2])?"page-id":"page-name"),i.active[_]=c}}return t.endT(arguments),i},maybeUpdateRecentCustomPrefixes:function(e){var a=t.checkObject(e,["search","customPrefix"]),s=S.pref["custom-prefix-extraValue"],r=S.pref.recent_custom_prefixes;s&&a.$el&&!t.in_array(s,r)&&(r.unshift(s),r.length>10&&r.pop(),c.simple_ajax_request({type:"POST",url:S.ajaxUrl+"&update_recent_custom_prefixes=1",sendData:c.serialized_data_with_single_key(JSON.stringify(r)),plus:"",minus:""}))},maybe_disable_other_page_prefixes:function(t,a,s){S.stat.cssModifiers.find(".flist-page_specific").find(".mt-ui-toggle").not('[data-filter="'+t.data("filter")+'"]').each((function(t){var a=e(this),s=a.data();S.pref.page_specific[s.pref_sub_key]&&S.feature_off(a,"page_specific",{turningOffOtherPagePrefix:1,toggle:1,doNotSelectEl:!0})}))},pseudo_updated:function(s,r){var o=s.closest("li"),n=o.data(),i=n.aspect,l=n.pref_sub_key;if(S.preRetargetModifierConfig[l]&&delete S.preRetargetModifierConfig[l],"page_specific"!==i||r.turningOffOtherPagePrefix||r.skipOtherPagePrefixCheck||S.maybe_disable_other_page_prefixes(o,n,r),r.input)if("custom-prefix"===l){var d=S.pref[l+"-extraValue"],_=S.pref[i][l];parseInt(_)&&t.isDefined(d)&&(delete S.pref[i][l],S.pseudo_updated(o,{toggle:1,turnOn:0,doNotSelectEl:!0,skipOtherPagePrefixCheck:1}),S.pref[i][l]=_),S.pref[l+"-extraValue"]=s.val().trim(),a.search_parents_and_descendents(a.triggerEl,{}),a.dom.search.customPrefix.$el||(S.pref[l+"-extraValue"]="")}else S.update_input_width_and_scroll(s,0,!0,!0,S.stat.codeInputWidthCalc);var u=S.stat.suggestionsAdvanced.find(".code-suggestions");if(r.turnOn&&S.existingSelSelected&&!r.doNotSelectEl&&S.sug_css_clicked(u.find(".code-suggestion:first-child").find(".sugsel-radio")),u.find(".code-suggestion").each((function(s){r.manual=1,r.$li=o;var n=e(this),l=n.find(".sug-sel"),c=l.attr("rel"),d=n.data("level");t.isDefined(d)||(d=0);var _=l.val(),u=a.apply_css_filters(_,a.dom.search.nodes[d],a.dom,r),p=S.stat.suggestionsMenu.find(".code-suggestion:nth-child("+(s+1)+")").find(".sug-sel"),f=l.add(p);if(f.val(u.code),!a.dom.sels.final[s]||a.dom.sels.final[s].refKey!==c)return!0;var g=!1;"page_specific"===i&&(g=a.get_parent_level_from_selector(u.code,d))===d&&(g=!1),a.dom.sels.final[s].code=u.code,f.each((function(){var t=e(this);t.get(0).scrollLeft=l.get(0).scrollWidth,!1!==g&&t.closest(".code-suggestion").attr("data-level",g).data("level",g)}));var m=l.attr("rel");m&&a.dom.sels.combo[m]&&S.apply_filter_to_combo_data(a.dom.sels.combo[m],r)})),S.apply_filter_to_combo_data(TvrMT.data.prog.combo.all_sel_suggestions,r),!r.doNotSelectEl){var p=u.find(".code-suggestion:first-child, .code-suggestion.in-focus");if(p.length){var f=p.filter(".in-focus");f||(f=f[0]);var g=f.find("input");S.sug_sel_updated({$editedField:g,val:g.val(),pseudoUpdated:1})}else t.isDomEl(a.triggerEl)&&a.select_element(a.triggerEl,{forceHighlight:1});r.input&&"custom-prefix"===l&&t.action_after_timeout("after_pseudo_updated_by_input",50,{item:function(){c.save_ui_toggle_update(i,parseInt(S.pref[i][l]),"&pref_sub_key="+l+"&extraValue="+S.pref[l+"-extraValue"])},args:[]})}},apply_filter_to_combo_data:function(e,t,s){for(var r=0;r<e.length;r++){var o=e[r],n="object"==typeof o,i=n?o.value:o,l=n&&void 0!==o.level?o.level:0,c=a.apply_css_filters(i,a.dom.search.nodes[l],a.dom,t).code;n?(e[r].label=c,e[r].value=c):e[r]=c}},maybe_run_code_or_synced_label_field_edited:function(e,t){var a=e.hasClass("code-hierarchy-input"),s=S.pref.selname_code_synced&&e.hasClass("sel-hierarchy-input");if(a||s){var r=e.val();if(S.pref.selname_code_synced)(a?S.stat.curSelInput:S.stat.curCodeInput).val(r);S.sug_sel_updated({$editedField:e,val:r,suggestionCustomised:!t,syncedLabelFieldEdited:s,codeFieldEdited:a,topFieldEdited:1,comboSelected:!!t,topComboSelected:1,ui:t})}},suggestion_instances:function(a){function s(a,s,r){switch(a){case"getInputs":case"setInputs":var n=l.find("input[type=text]").addBack("input[type=text]").not(o);"setInputs"===a&&n.each((function(){var a=e(this);a.val(s.val),t.scroll_input_end(a)})),r.$inputs=n;break;case"getN":case"setN":var i=l.find(".num-els-icon-wrap");"setN"===a&&i.html(S.num_els_icon(s.n)),r.$nWrap=i;break;case"radioSelection":l.closest(".radio-set-container").find(".mt-selector-suggestion").removeClass("hover-elsewhere in-focus"),l.addClass("in-focus")}}var r=a.exclItem||"#invalid",o=a.exclInput||"#invalid",n=a.itemFilter||".mt-selector-suggestion.in-focus",i=S.bothSuggestionAreas(n);a.incCurCode&&(i=i.add(S.stat.curCodeInput));var l=a.$items||i.not(r),c={$items:l};Array.isArray(a.action)||(a.action=[a.action]);for(var d=0;d<a.action.length;d++)s(a.action[d],a,c);return c},customCSSN:0,show_suggestion_refresh_icon:function(e,t,a){S.customCSSN=t,e&&e.siblings(".mt-clear-field").addClass("refresh-code-suggestions").attr("title",TvrLang.refresh_suggestions)},hide_suggestion_refresh_icon:function(e){S.customCSSN=0,e&&e.siblings(".mt-clear-field").removeClass("refresh-code-suggestions").attr("title","")},refresh_code_suggestions:function(e){if(S.iframeEditing()){var s=e.siblings("input").val();a.select_element(a.triggerEl,{suggestionCustomisedForNewEl:1,customCSSVal:s,forceHighlight:1,pseudoSelected:t.get_before_after(s,1)})}},sug_sel_updated:function(e){var s=S.strip_beyoned_brace(e.val),r=e.$editedField,o=a.get_sel_elements({con:"sug_sel_updated",css:s}),n=o.n,i=o.$toEls,l=!t.in_array(s,a.dom.sels.final,!1,"code"),c=n&&l,d=n&&!o.triggerElInNewSelection,_=[],u={e:{},doNotFocusEditor:1,doNotUpdateDomSearch:!d&&!e.customPrefixChanged,doNotUpdateSelectorSuggestions:1,customCSSVal:s,scroll:d,sugSelUpdatedConfig:e,notInSugList:l?s:void 0,suggestionCustomisedForNewEl:d,forceHighlight:1,pseudoSelected:t.get_before_after(s,1),addPseudoBaseStyles:e.addPseudoBaseStyles,switchSelVariation:e.switchSelVariation,doNotRepositionOverlays:e.doNotRepositionOverlays};if(S.intelli_css=s,e.radioSelection){var p=e.isExisting?"mt-matching-item":"code-suggestion",f=e.$item.index();if(S.suggestion_instances({action:"radioSelection",itemFilter:"."+p+":nth-child("+(f+1)+")",val:s}),e.isExisting){var g=e.$item.data();return S.doNotReselectRevertedRetargetSel=1,S.existingSelRadioUsed=1,S.resume_existing_or_set_draft_selector(a.triggerEl,a.dom,{existingSelector:g,forceResume:1,updateHighlighting:1,scroll:1,doNotUpdateSelectorSuggestions:1,elementAlreadySelected:0}),S.doNotReselectRevertedRetargetSel=!1,S.existingSelRadioUsed=0,void S.feature_off(!1,"create_additional_selector")}}e.suggestionCustomised&&c?S.show_suggestion_refresh_icon(r,n,s):S.hide_suggestion_refresh_icon(r),e.suggestionCustomised&&S.sync_selector_modifiers(s,!0),_.push("setN"),e.comboSelected&&t.scroll_input_end(e.$editedField),e.topComboSelected&&_.push("radioSelection"),_.push("setInputs");var m=!1;e.comboSelected?m=".code-suggestion.refKey-"+e.ui.item.refKey:(e.topComboSelected||e.stateSelectorSet)&&(m=".code-suggestion:first-child"),S.suggestion_instances({action:_,val:s,n:n,incCurCode:1,exclInput:r,itemFilter:m}),parseInt(S.pref.selector_auto_name)&&S.update_nice_name(!1,s,S.pref.selname_code_synced),a.select_element(i,u),S.previous_selector=s},default_code_suggestion:function(e,t,a){return t.intelli_css?t.intelli_css:t.customCSSVal?t.customCSSVal:e?e.code:a},update_selector_suggestions:function(e){if(t.startT(arguments),a.dom.sels.final){for(var s="",r=[],o=0;o<a.dom.sels.final.length;o++){var n=a.dom.sels.final[o],i=n.level,l=n.isCombo?" combobox has-arrows":"",c=l?'data-appto="#style-components"':"",d=n.isCombo?" combobox-has-arrows ":"",_=l?'<span class="combo-arrow"></span>':"",u=(l&&"x_plus"===n.refKey?"<sup>+</sup>":"")?"+":"",p=l?'rel="'+n.refKey+'"':"",f=t.regular_escape_quotes(n.code),g=n.n,m=o<1&&(S.retargetSelector||!a.dom.mSelsCount||e.customCSSVal)?" in-focus":"",v=!1;if(o<1){var h=f;if((f=S.default_code_suggestion(n,e,f))!==h){if(g=a.jquery_compat_sel_elements(f).length,i=a.get_parent_level_from_selector(f,i),!l){v=!0;let e="existing_new_combined";l=" combobox has-arrows",c='data-appto="#style-components"',d=" combobox-has-arrows ",_='<span class="combo-arrow"></span>',p='rel="'+e+'"',a.dom.sels.combo[e]=[f,h]}}}var b='data-level="'+i+'"';l&&!v?Array.prototype.push.apply(r,a.dom.sels.combo[n.refKey]):r.push(a.formattedSelSugItem(n,a.dom)),s+='<div class="code-suggestion mt-selector-suggestion refKey-'+n.refKey+m+'" '+b+">"+TvrMT.data.templates.new_sel_radio+'<span class="tvr-input-wrap'+d+'"><input type="text" spellcheck="false" class="sug-sel'+l+'" value="'+t.regular_escape_quotes(f)+'" '+p+" "+c+" />"+_+'<span class="mt-clear-field"></span></span><span class="num-els-icon-wrap">'+S.num_els_icon(g,u)+"</span></div>"}if(S.redo_sug_sels(s,{advanced:1}),S.redo_sug_sels(s,{frontend:1}),!e.selectCurrentSelector){f=S.code_or_fallback(!1);parseInt(S.pref.selector_auto_name)&&S.update_nice_name(!1,f,S.pref.selname_code_synced),S.update_cur_code(f),S.previous_selector=f}TvrMT.data.prog.combo.all_sel_suggestions=r,t.endT(arguments)}},otherFilters:function(e,t){var a=S.bothSuggestionAreas(".fav-filters").add("#cm-css-filters").find(e);return t&&(a=a.not(t)),a},bothSuggestionAreas:function(e){var t=S.stat.suggestionsAdvanced.add(S.stat.suggestionsMenu);return e?t.find(e):t},redo_sug_sels:function(a,s){t.startT(arguments),s=s||{};var r=e(a);(s.frontend?S.stat.suggestionsMenu:s.advanced?S.stat.suggestionsAdvanced:S.bothSuggestionAreas()).find(".code-suggestions").html(r),t.endT(arguments)},num_els_icon:function(e,a){a=a||"";var s=t.isDefined(e)?e.toString():"0";return'<span class="num-els-icon'+(0===e?" el-targets-nothing":"")+'" title="'+(1===e?tvrsprintf(TvrLang.n_els,s):tvrsprintf(TvrLang.n_els_plural,s+a))+'">'+e+"</span>"},refresh_wizard_comp_css:function(){if(t.startT(arguments),t.isDomEl(a.triggerEl)){S.filter_css_exceptions("intelli");var s=S.intelliCompProps=S.un_flatten_css(S.intelliCompProps),r=S.pgInFocusWiz,o="";for(var n in s[r])if(s[r].hasOwnProperty(n)){var i=n,c=s[r][n];void 0!==c&&(c&&c.toString().indexOf("rgb")>-1&&(c=S.trans_gradient_box(c)+" "+t.maybe_to_hex(c)),o+='<span class="info-label '+n+'-info-label">'+i+':</span>\n<span class="info-value '+n+'-info-value">'+c+"</span>")}}else;e("#comp-"+r).find(".mt-expandable-panel").html(o);for(var d=S.templates.key_computed_info,_=0;_<l.keyInfoProps.length;_++){var u=l.keyInfoProps[_],p=a.compProps[u];(Array.isArray(p)||p===Object(p))&&(p=p[0])===Object(p)&&(p=p.val),t.isDefined(p)?"color"===u||"background-color"===u?p=S.trans_gradient_box(p)+" "+t.maybe_to_hex(p):"font-size"!==u&&"line-height"!==u&&(p=p.replace(/px$/,"").replace(/^0$/,"-")):p="-",d=d.replace(new RegExp("{"+u+"}"),p)}e("#key-computed").html(d),t.endT(arguments)},un_flatten_css:function(e){t.startT(arguments);var a=[];for(var s in S.cssProps)if(S.cssProps.hasOwnProperty(s))for(var r in a[s]=[],S.cssProps[s])if(S.cssProps[s].hasOwnProperty(r)){var o=S.cssProps[s][r].cssf;"background-img-full"===o||"extracted-gradient"===o||"google-font"===o||S.propAliases[o]||"order-grid"===o||"text-shadow"===o||"box-shadow"===o||"background-image"===o&&"gradient"===s||(a[s][o]=e[o])}return t.endT(arguments),a},ensure_backwards_compat:function(){t.startT(arguments),parseInt(S.pref.remove_all_bricks_container_hacks)&&(S.pref.manual_recompile_all_css=1);var e=parseInt(S.pref.manual_recompile_all_css);S.compile_non_compiled_selectors(!e),t.endT(arguments)},compile_non_compiled_selectors:function(a){S.uiData=i.filter_object_keys("clean",S.uiData,0,!1,{fullCodeSelectors:1,hand_coded_css:1});var s=!1;var r={M:{},settings:{keyFormatFixes:{sectionKeyChanges:{},actions:[]}},template:"ui",no_style_node_update:!0,compile_non_compiled:!0,passNum:1,dataFormattingFixesOnly:a,onlyRun:{recurse_key:["m_query"]},onlyLoop:{recurse_key:["m_query"]}},o={section:[{item:i.ensure_valid_folder_and_label,args:[!1]},{item:i.update_item_index,args:[!1]},{item:i.maybe_fix_key_format,args:[!1]}],selector:[{item:i.update_item_index,args:[!1]},{item:i.check_jsu,args:[!1]},{item:i.check_values,args:[!1]},{item:i.maybe_fix_key_format,args:[!1]}],group:[{item:i.check_values,args:[!1]}],property:[{item:i.update_property_values_structure,args:[!1]},{item:i.update_legacy_unit_structure,args:[!1]}]},n={section:[{item:i.update_dots,args:[!1]}],selector:[{item:i.check_jsu,args:[!a]},{item:i.update_dots,args:[!1]}],group:[{item:i.modify_item,args:["group_to_css",{dontUpdateSavePackage:a,dontRemoveVendorPrefixes:1}]},{item:i.check_values,args:[!1]}]};parseInt(S.pref.remove_all_bricks_container_hacks)&&o.selector.push({item:i.remove_all_bricks_container_hacks,args:[!1]}),r.maxDepth="property",r.cb=o;var l=i.run(S.uiData,r).settings;r.settings=l,r.maxDepth="group",r.cb=n,r.passNum++;var d=(l=i.run(S.uiData,r).settings).keyFormatFixes.actions;if(d.length)for(var _=0;_<d.length;_++)i.modify_main_js_object("rename",{},d[_]);S.client_scss?l=i.run_global_scans(l,["scss_types"]):t.checkObject(S.uiData,["non_section","scss_usage"])&&delete S.uiData.non_section.scss_usage,l.savePackage&&l.savePackage.length||d.length?(l.savePackage&&l.savePackage.length>15&&(l.savePackage=!1),l.fullSCSSCompile=S.client_scss,c.ajax_save_settings({settings:l,essentialSave:1,serialise:!0})):S.client_scss&&S.mt_compile_scss({isSassVendorPrefixPatch:1,settings:{fullSCSSCompile:1}}),parseInt(S.pref.manual_recompile_all_css)&&(S.pref.manual_recompile_all_css=0,c.simple_ajax_request({type:"GET",url:S.ajaxUrl+"&manual_recompile_all_css=0"})),parseInt(S.pref.remove_all_bricks_container_hacks)&&(S.pref.remove_all_bricks_container_hacks=0,c.simple_ajax_request({type:"GET",url:S.ajaxUrl+"&remove_all_bricks_container_hacks=0"})),parseInt(S.pref.initial_view_set)||S.stat.tvr.width()<=796&&(t.toggle_radio_checkbox(e("#screen-layout-options").find('.switch-layout-preset[data-preset="S"]')),c.simple_ajax_request({type:"GET",url:S.ajaxUrl+"&initial_view_set=1"}))},isContainerQuery:function(e){return t.checkObject(S.mqs,[e,"container"])},load_visual_view:function(a){t.startT(arguments);Object.keys(S.pref.npm_dependencies).sort().reduce(((e,t)=>(e[t]=S.pref.npm_dependencies[t],e)),{});if(e("#mt-picker-palette").removeClass("hidden"),S.forceNoLayoutSave=!0,g.update_num_items_docked("left"),g.update_num_items_docked("right"),g.adjust_preview_margin_and_save_config({skipSave:1,skipPGPress:1,side:"left"}),g.adjust_preview_margin_and_save_config({skipSave:1,skipPGPress:1,side:"right"}),o.init_editor_deps(),S.maybe_initiate_sass_js(),S.pref.theme_mode_set||S.set_default_theme_mode(),S.ensure_backwards_compat(),S.stat.body.addClass("tvr-visual"),S.pref.detach_preview||MTlocal.maybe_load_site_preview(),S.pref.returned_ajax_msg&&!S.pref.returned_ajax_msg_seen)for(var s in S.pref.returned_ajax_msg)S.pref.returned_ajax_msg.hasOwnProperty(s)&&c.log(S.pref.returned_ajax_msg[parseInt(s)]);if(window.history.pushState&&parseInt(e("#clean-ui-url").attr("rel"))&&window.history.pushState(S.uiUrl,null,S.uiUrl),o.bind_editor(S.stat.inlineEditor,{filterClass:"custom-css-pre",mode:parseInt(S.pref.allow_scss)?"scss":"css",M:"css",directContent:"pending"}),_.bind_gridstack(),parseInt(S.pref.current_revision))t.ww.assignTask({channel:"revisions",taskName:"initRevisionStackTask",ajaxUrl:S.ajaxUrl,current_revision:S.pref.current_revision,cb:{ref:"TvrUi",funcName:"updateRevisionStack"}});else{let e=c.user_action({},{items:["Setup undo system"],icon:"mtif-instant-undo"});c.ajax_save_settings({settings:e})}S.default_to_tab("mq"),S.default_to_sel({elementAlreadySelected:S.pref.show_code_editor}),S.toggle_enabled_buttons(),S.set_initial_size_of_nth_modifier_inputs(),S.pref.detach_preview&&g.retrieve_or_load_detached(),MTlocal.apply_rulers(),S.pref.show_code_editor&&S.default_to_tab("css"),window.launchMTUnlock&&S.show_dialog(e("#mt-renew-prompt")),S.adjust_scroll_buttons(!1,"responsive"),n.maybe_update_available_builder_name(),S.forceNoLayoutSave=!1,(S.pref.show_setup_screen||S.innoFireall)&&(S.show_dialog(e("#program-settings-menu").find(".item-mt-initial-setup")),S.pref.show_setup_screen&&c.save_multiple_preferences({show_setup_screen:0,show_setup_screen_first_time:0})),f.init_ai(),t.endT(arguments)},restoringRevision:!1,updateRevisionStack:function(e,t){let a=e.stack;a&&(S.revisionStack=a,S.pref.current_revision=a.current),S.updateRevisionButtons()},updateRevisionButtons:function(){let t=S.revisionStack,a={undo:e("#mt-instant-undo"),redo:e("#mt-instant-redo")};Object.keys(a).forEach((e=>{t[e].length?a[e].removeClass("disabled"):a[e].addClass("disabled")}))},animationCount:0,animationUndo:function(e,a,s=!1){s&&(S.animationCount=0);let r="animate-button-"+a;e.addClass("disabled "+r),S.after_animation(e,{type:"animation",cb:s=>{s.removeClass(r),S.restoringRevision&&S.animationCount<3&&t.action_after_repaint({item:function(){S.animationUndo(e,a)},args:[]},20,window)}}),S.animationCount++},iterateRevisionStack:function(e,a){if(e.hasClass("disabled"))return;e.addClass("disabled");let s=e.data("action"),r=a?"restoreRevisionById":s+"Revision";S.restoringRevision=!0,S.animationUndo(e,s),t.ww.assignTask({channel:"revisions",taskName:r,ajaxUrl:S.ajaxUrl,revision_id:a,mainThreadData:{$clicked:e,revision_action:s},cb:{ref:"TvrUi",funcName:"restoreRevisionSuccess"},cb_failure:{ref:"TvrUi",funcName:"restoreRevisionError"},cb_complete:{ref:"TvrUi",funcName:"restoreRevisionComplete"}})},restoreRevisionError:function(e,t){c.update_full_logs({short:TvrLang.revision_restore_failed,long:"<p>"+TvrLang.revision_restore_failed_long+". </p>"})},restoreRevisionSuccess:function(e,a){let s=e.revision,r=!1;if(!s)return void alert("Could not restore revision");let o=t.checkObject(s,["settings","non_section","meta","merge_preferences"]);o&&f.getRelevantPreferences(S.pref,o);let n=t.checkObject(s,["settings","non_section","active_queries"]),l=!1;n&&JSON.stringify(S.pref.m_queries)!==JSON.stringify(n)&&(S.pref.m_queries=n,S.updateTvrMQsCombinedData(),l=!0),S.uiData=s.settings,delete S.uiData.non_section.last_save_time,f.chatMessages=S.uiData.non_section?.meta?.aiChatMessages||[],f.sketchpad=S.uiData.non_section?.meta?.aiSketchpad||{css:"",js:"",html:""},f.sketchpadFocus=S.uiData.non_section?.meta?.aiSketchpadFocus||"css";let d={},_={noSaveDelay:1,manualSave:1,settings:d,skip_revision:1};if(s.snippets){_.restoreSnippets=s.snippets;let e={};const t=TvrMT.data.dyn.snippets.cache||{};s.snippets.forEach((a=>{const s=t[a.slug],o=a.aspect,n=a.content,i=s?.aspect,l=s?.value,c=e=>"js"===e||"jsFunction"===e;(c(o)||c(i))&&(o===i&&n===l||(r=!0)),e[a.slug]={name:a.name,value:n,mysql_data:a.modified_at,aspect:o,meta:a.meta||null}})),TvrMT.data.dyn.snippets.cache=e}S.liveRefreshInterface(n,r),d=c.user_action(d,{items:["Quick "+a.revision_action],icon:"mtif-instant-"+a.revision_action}),c.save_multiple_preferences({current_revision:s.id,m_queries:S.pref.m_queries,mq_device_focus:S.pref.mq_device_focus,pg_focus:S.pref.pg_focus},!1,"revisions"),r?_.cbFunction=function(){p.refreshPreview(),S.maybeRetryAI()}:(i.run_global_scans({},["html_mods"]),p.animateRefreshButton(),S.maybeRetryAI()),c.ajax_save_settings(_)},maybeRetryAI:function(){if(f.retry){let a=f.retry.prompt;f.retry=!1,f.previousPayload&&(t.updateObject(f.previousPayload,["context","cumulativeContextRequestedDuringChat"],{}),t.updateObject(f.previousPayload,["context","applyDeeperPageAnalysis"],1),t.updateObject(f.previousPayload,["allowMoreContext"],1),t.updateObject(f.previousPayload,["model"],e("#ai-model").val())),e("#tvr-ai-prompt").val(a),f.sendPrompt(null,{},!0)}},restoreRevisionComplete:function(e,t){S.updateRevisionStack(e,t),S.restoringRevision=!1},liveRefreshInterface:function(s,r){let o={totalSecs:0,totalSels:0,allSections:1,allSelectors:1,menuSectionHTML:"",optionsSectionHTML:"",cbs:{section:[{item:function(t,a,s,r){let o=S.dom_replacements(!1,"section",e(S.templates.sectionM).add(S.templates.section),"selector_section",s,a.this.label);t.menuSectionHTML+=o[0].outerHTML,t.optionsSectionHTML+=o[1].outerHTML,t.totalSecs++}}],selector:[{item:function(e,t,a,s,r,o){e.totalSels++}}]}};t.loopUiData(o,S.uiData),o.optionsSectionHTML+=e("#grid-control-wrap")[0].outerHTML,S.stat.mainMenuInner[0].innerHTML=o.menuSectionHTML,S.stat.opts[0].innerHTML=o.optionsSectionHTML,a.applyMTStyleNodes(!1),f.resumeChatAndSketchPad();let n=S.default_to_sel({elementAlreadySelected:S.pref.show_code_editor});S.updateSelsExistState(n,o),n&&s&&S.liveUpdateInterfaceMQs(),S.stat.mainMenuInner.children().each((function(){let t=S.get_meta(e(this),"section");S.js_check_values({},S.get_meta(t.sectionM,"section"))}))},updateSelsExistState(e,t){S.totalSecs=t.totalSecs,S.totalSels=t.totalSels,e||S.update_prev_next_sel_buttons(!1),S.toggle_enabled_buttons()},updateTvrMQsCombinedData:()=>{window.TvrMQsCombined=e.extend(!0,{"all-devices":{label:"All Devices",query:"CSS that applies to all devices",min:0,max:0}},S.pref.m_queries),S.mqs=S.adjust_mqs_for_unit(TvrMQsCombined)},liveUpdateInterfaceMQs:()=>{let t=e("#mqs-dyn-menu"),a=S.stat.res,s=S.get_mq_focus(),r={tabs:[],settings:[],$tabTemplate:a.find(".mt-tab").first().clone(),$settingsTemplate:t.find(".mquery-tag").first().clone()};Object.entries(window.TvrMQsCombined).forEach((([t,a])=>{const s=a.site_preview_width||"";let o=r.$tabTemplate.clone().removeClass("active hasValues mq-tab-all-devices").addClass("mq-tab-"+t).attr("rel",t).attr("title",a.query);if(o.find(".mq-tab-txt").text(a.label),"all-devices"===t)r.tabs.push(o);else if("all-devices"!==t){let n=r.$settingsTemplate.clone(),i=n.find(".mquery-label"),l=n.find(".mquery-query"),c=n.find(".mquery-site_preview_width"),d=n.attr("id").replace(/^mqs-/,"");n.attr("id","mqs-"+t),n.find(".mquery-name").html(a.label),n.find(".mquery-label, .mquery-query, .mquery-site_preview_width, .mquery-hide").each((function(){let a=e(this);a.attr("name",a.attr("name").replace(d,t))})),i.val(a.label).attr("value",a.label),l.val(a.query).attr("value",a.query),c.val(s).attr("value",s),r.tabs.push(o),r.settings.push(n)}})),t.html(r.settings),a.find(".menu-style-tabs").html(r.tabs);S.stat.res.find(".mq-tab-"+s);S.mq_tab_pressed(S.stat.res.find(".mq-tab-"+s))},page_load_debug:function(){S.show_dialog(S.stat.settingsMenu.find("li.js_libraries"))},scss_div:"/*MTSCSSPART*/",sass_preloaded_files:[],sass_worker_to_mt_dir:"../../../../micro-themes/",maybe_initiate_sass_js:function(){if(S.client_scss){S.sass=new Sass;S.uiData.non_section.hand_coded_css;S.sass.options({style:Sass.style.expanded,indent:"\t"},(function(){})),S.sass.importer((function(e,a){var s=e.resolved.replace("/sass/",""),r=S.check_file_exists(s,!0);r?t.in_array(r,S.sass_preloaded_files)?a({path:e.path}):c.simple_ajax_request({url:S.ajaxUrl+"&load_sass_import="+encodeURI(r),dataType:"json",plus:TvrLang.loading_sass_import,minus:TvrLang.loading_sass_import_failed,cbFunction:function(e,t){S.sass.writeFile(r,e.content,(function(a){S.sass_preloaded_files.push(r),t({content:e.content})}))},cbfArgs:[a]}):a({error:"Import failed, no file found: "+s+". Try refreshing "+S.appName+" if path is definitely correct."})})),S.sass.writeFile(TvrMT.data.dyn.preloaded_sass_imports,(function(e){S.sass_preloaded_files=Object.keys(TvrMT.data.dyn.preloaded_sass_imports),TvrMT.data.dyn.preloaded_sass_imports=null,S.sass.compile(S.uiData.non_section.hand_coded_css,(function(e){}))}))}},parse_scss_or_css:function(e,t){t=t||"scss";try{return window.TvrSCSS.parse(e,{syntax:t})}catch(e){}return!1},stringify_scss:function(e){return e.toString()},normalise_scss_type_name:function(e,a){return t.in_array(e,["variable","mixin","function"])?a.replace(/-/g,"_"):a},get_ast_child_node:function(e,t,a){for(var s=0;s<e.length;s++){var r=e[s];if(r.type===t)return a?r[a]:r}return!1},get_variable_node_data:function(e,t,a,s){var r,o=t.content[0].content,n=t.insideFM||s.insideFM,i=s.isRelatedType;if("property"===a.type){var l="";if((r=S.get_ast_child_node(a.parent.content,"value"))&&(e={value:l=r.toString()}),i&&!S.is_scss_global_var(l))return s.localDecs[o]=1,!1}else if(i&&(s.localDecs[o]||t.insideArg&&!t.insideDec))return s.localDecs[o]=1,!1;return!(n&&s.onlyGlobalVars&&!S.is_scss_global_var(e.value)&&!S.is_scss_default_var(e.value))&&{name:o,value:e}},is_scss_global_var:function(e){return"string"==typeof e&&e.indexOf("!global")>-1},is_scss_default_var:function(e){return"string"==typeof e&&e.indexOf("!default")>-1},get_scss_types:function(e){var a=e.parseTree?e.parseTree:S.parse_scss_or_css(e.code,"scss");if(!a)return"parseFail";S.parseTreeDone||(S.parseTreeDone=!0);var s={},r=e.types?e.types:S.scss_types,o=!1;return a.traverse((function(a,n,i){var c,d=a.type,_=!1,u={value:1};("mixin"===d||i&&i.insideFM||"atrule"===d&&S.get_ast_child_node(a.content,"function"))&&(a.insideFM=1),("arguments"===d||i&&i.insideArg)&&(a.insideArg=1),("declaration"===d||i&&i.insideDec)&&(a.insideDec=1);var p=e.isRelatedType&&!t.in_array(d,["property","variable","extend"]);if(!t.in_array(d,r)||p)return!1;switch(d){case"atkeyword":if("import"!==(d=S.get_ast_child_node(a.content,"ident","content")))return!1;c=S.get_ast_child_node(i.content,"string","content");break;case"property":return a.parent=i,!1;case"variable":var f=S.get_variable_node_data(u,a,i,e);if(!f)return!1;c=f.name,u=f.value;break;case"function":if(c=a.content[0].content,t.in_array(c,l.css_functions))return!1;"atrule"===i.type&&(u={value:i.toString()},_={node:i,parent:i});break;case"mixin":c=S.get_ast_child_node(a.content,"ident","content"),u={value:a.toString()},_={node:a,parent:i};break;case"include":d="mixin",c=S.get_ast_child_node(a.content,"ident","content");break;case"extend":c=S.get_ast_child_node(a.content,"selector").toString(),u={value:"extender"}}if(c=S.normalise_scss_type_name(d,c),t.checkObject(s,[d,c,"values"])||t.updateObject(s,[d,c,"values"],[]),s[d][c].values.push(u.value),!e.isRelatedType&&_){var g=S.get_scss_types({isRelatedType:1,parseTree:_.node,types:["property","variable","extend","include","function"],localDecs:{},insideFM:1});g&&(s[d][c].related_types=g)}1!==u.value&&(s[d][c].value=u.value,s[d][c].hasDeclaration=1),o=!0})),!!o&&s},maybe_merge_related_types:function(t,a){a&&(t.related_types||(t.related_types={}),t.related_types=e.extend(!0,t.related_types,a))},cross_update_related_types:function(e,a,s){for(var r=Object.keys(s),o=0;o<r.length;o++)for(var n=r[o],i=Object.keys(s[n]),l=0;l<i.length;l++){var c=i[l];t.checkObject(e,[n,c])||t.updateObject(e,[n,c],{}),S.maybe_merge_related_types(e[n][c],a)}},log_all_scss_usage:function(a,s,r,o,n){for(var c=Object.keys(r),d=0;d<c.length;d++)for(var _=c[d],u=r[_],p=Object.keys(u),f=0;f<p.length;f++){var g=p[f],m=e.extend(!0,{},r[_][g]),v=m.values,h=m.value,b=m.related_types;t.checkObject(s,[_,g,"deps"])||t.updateObject(s,[_,g,"deps"],[]),t.checkObject(s,[_,g,"values"])||t.updateObject(s,[_,g,"values"],[]);var y=s[_][g];if(v&&(y.values=y.values.concat(v)),b){S.maybe_merge_related_types(y,b);var T={};t.updateObject(T,[_,g],{}),S.cross_update_related_types(s,T,b)}h&&(y.finalDecVal=h,y.type=h?l.checkStringValue(h):"unknown");var x={};h&&(x.hasDeclaration=1),a&&(e.extend(!0,x,{trail:o.trail.selector,mq_key:o.recurse.mq_key,sectionSlug:o.section_key,selectorSlug:o.selector_key}),y.deps.push(x));var w=m.locMeta;if(w){var C=Object.keys(w);for(k=0;k<C.length;k++){var M=C[k],j=e.extend(!0,{},w[M]),D=j.trail.join(".");t.checkObject(y,["locDone",D])||(y.deps.push(j),t.updateObject(y,["locDone",D],1),"removed"===j.action&&i.updateObjectAndSavePackage(o.settings.savePackage,[{action:"delete",trail:o.trail.item.concat(["scss_types","extend",g,"locMeta"]),key:M}]))}}}},get_raw_scss_or_selector:function(e,t){var a=t||e;return e.raw_scss?e.raw_scss:a.label.split("|")[1]+" {\n\n}\n"},tag_extended:function(e,a,s){if(!e.settings.extend)return!1;for(var r=e.settings.extend,o=Object.keys(r),n=S.uiData[e.section_key][e.selector_key],i=S.get_raw_scss_or_selector(a,n),l=0;l<o.length;l++){var c=o[l],d=r[c],_=d.action;if(S.extender_match(c,i)&&d.actions)for(var u=0;u<d.actions.length;u++){_=d.actions[u].action,e.settings.active_scss_types||(e.settings.active_scss_types={}),t.checkObject(e.settings.active_scss_types,["extend",c,"locMeta"])||t.updateObject(e.settings.active_scss_types,["extend",c,"locMeta"],{});var p=e.trail.selector.join(".");e.settings.active_scss_types.extend[c].locMeta[p]={action:_,trail:e.trail.selector,mq_key:s,sectionSlug:e.section_key,selectorSlug:e.selector_key}}}},log_all_scss_selectors:function(e,t,a){var s=e.settings.deps,r=t.raw_scss;r||(r="");var o=e.trail.selector,n=e.section_key,i=S.get_selector_index_from_trail(n,o);s[a][i]={code:r,mq_key:a,sectionSlug:n,selectorSlug:e.selector_key,trail:o}},scss_types:["variable","function","mixin","include","extend","property","atkeyword"],prev_full_code_scss_types:{},compare_scss_types:function(a,s){a=a||{},s=s||{};for(var r=e.extend(!0,{},a),o=Object.keys(s),n=0;n<o.length;n++){var i=o[n],l=Object.keys(s[i]);a[i]||(r[i]={});for(var c=0;c<l.length;c++){var d=l[c],_=S.get_value_from_possible_object(t.checkObject(a,[i,d])),u=S.get_value_from_possible_object(s[i][d]);!1===_?r[i][d]={action:"added",actions:S.compare_add_remove_values(t.checkObject(a,[i,d,"values"]),t.checkObject(s,[i,d,"values"])),value:u,form:t.checkObject(y,[i,d,"hasDeclaration"])?"declaration":"instance"}:_===u&&delete r[i][d]}}for(var p=!1,f=Object.keys(r),g=0;g<f.length;g++){i=f[g],l=Object.keys(r[i]);for(var m=0;m<l.length;m++)if(p=!0,d=l[m],"added"!==r[i][d].action){var v=S.get_value_from_possible_object(t.checkObject(s,[i,d])),h=S.get_value_from_possible_object(t.checkObject(a,[i,d])),b=v?"changed":"removed",y=v?s:a,T=v||h,x=t.checkObject(y,[i,d,"hasDeclaration"])?"declaration":"instance",w={action:b,actions:S.compare_add_remove_values(t.checkObject(a,[i,d,"values"]),t.checkObject(s,[i,d,"values"])),value:T,form:x};"changed"===b&&(w.oldValue=h),r[i][d]=w}}return!!p&&r},compare_add_remove_values:function(e,a){var s=[];return t.compare_array_values(a,e,"added",s),t.compare_array_values(e,a,"removed",s),!!s.length&&s},get_value_from_possible_object:function(e){return e===Object(e)?t.combine_array_values(e.values):e},get_co_dependent_types:function(a,s,r){var o={},n=!1,i=["extend"];if(s||i.push("variable"),a)for(var l=0;l<i.length;l++){var c=i[l],d=t.checkObject(a,[c]);d&&(o[c]=d,n=!0)}if(r){var _=S.get_extenders(r);_&&(e.extend(!0,o,_),n=!0)}return!!n&&o},get_changed_and_co_dependents_types:function(e,t,a,s){var r=S.get_co_dependent_types(t,a,s);return!(!e&&!r)&&{changed:e,co_types:S.get_co_dependent_types(t,a,s)}},extender_match:function(e,a){var s=t.escapeRegExp(e),r=new RegExp("(?<!@extend\\s)"+s+"(?:[\\s{,]+)");return a.match(r)},get_extenders:function(e){var a=t.checkObject(S.uiData,e.split("."));if(!a)return!1;var s=t.checkObject(S.uiData,["non_section","scss_usage","extend"]);if(!s)return!1;for(var r=S.get_raw_scss_or_selector(a),o=!1,n=Object.keys(s),i={extend:{}},l=0;l<n.length;l++){var c=n[l];S.extender_match(c,r)&&(i.extend[c]={},o=!0)}return!!o&&i},cachedDeps:!1,prepare_scss_sources_obj:function(){return{sectionNodes:{},deps:S.cachedDeps?S.cachedDeps:S.prepare_dependent_sels_obj(),fullstring:"",parts:[]}},add_selective_sources:function(e,a,s){var r=S.get_changed_and_co_dependents_types(a.scss_types_changed,a.scss_types,a.codeEditorEdited,a.selIdentifier);if(s)e.fullstring+=a.code+S.scss_div,e.parts.push(a);else{var o=a.sectionIndex+a.index;e.deps[a.mq_key][o]=a}var n=t.checkObject(S.uiData,["non_section","scss_usage"]),i={selsAdded:{},relatedTypesChecked:{}},l=Object.keys(TvrMQsCombined);if(r&&n&&(e.deps=S.gather_dependent_selectors(e,r,n,i)),"hand_coded_css"!==a.editor_slug&&(a.scss_types||e.numSels>1)){var c=t.checkObject(S.uiData,["non_section","code_editors","hand_coded_css","scss_types"]);if(c){var d=S.get_co_dependent_types(c,!1,!1);d&&(e.deps=S.gather_dependent_selectors(e,{co_types:d},n,i))}S.scss_deps_to_string_parts(e,e.deps,l),S.add_full_code_scss_part(e)}else S.scss_deps_to_string_parts(e,e.deps,l)},prepare_dependent_sels_obj:function(e,t){e=e||{},t=t||Object.keys(TvrMQsCombined);for(var a=0;a<t.length;a++){e[t[a]]=[]}return e},gather_dependent_selectors:function(a,s,r,o){for(var n,i=a.deps,l=Object.keys(s),c=0;c<l.length;c++){var d=l[c];if(s[d])for(var _=Object.keys(s[d]),u=0;u<_.length;u++)for(var p=_[u],f=Object.keys(s[d][p]),g=0;g<f.length;g++){var m=f[g],v=s[d][p][m],h="changed"===d?v:{};if(!t.checkObject(o.relatedTypesChecked,[p,m])){t.updateObject(o.relatedTypesChecked,[p,m],1);var b=t.checkObject(r,[p,m,"related_types"]);b&&(i=S.gather_dependent_selectors(a,{related_types:b},r,o))}var y=t.checkObject(r,[p,m,"deps"]);if(y&&y.length>0)for(var T=y.length-1;T>=0;T--)if(y[T]){var x=(n=e.extend(!0,{},y[T])).action,w=n.hasDeclaration;"changed"===d&&h.form;if(!("co_types"===d&&"variable"===p&&!w)){var k=n.trail,C=k.join(".");if(!o.selsAdded[C]){var M=t.checkObject(S.uiData,k);if(M){var j=S.get_selector_index_from_trail(n.sectionSlug,k);n.code=S.get_raw_scss_or_selector(M),i[n.mq_key][j]=n,o.selsAdded[C]=1,a.numSels++;var D=S.get_co_dependent_types(M.scss_types,!1,C);D&&(i=S.gather_dependent_selectors(a,{co_types:D},r,o))}}x&&("removed"===x?y.splice(T,1):"added"===x&&delete n.action)}}}}return i},toggle_scss_import_compile_note:function(e){"show"===e?S.stat.scss_compile_notes.show():S.stat.scss_compile_notes.hide()},toggle_view_draft_published_files:function(t){let a=e("#view-file");"show"===t?a.show():a.hide()},log_client_scss_error:function(t,a,s,r){var o=a.file&&"stdin"!==a.file;if(t){if(o){var n=S.check_file_exists(a.file.replace("/sass/",""),!0);S.sass.readFile(n,(function(e){S.log_client_scss_error(!1,a,e,r)})),S.toggle_scss_import_compile_note("show"),S.stat.scss_error_file.text(n)}else S.log_client_scss_error(!1,a,S.previousSCSSCompile,r),S.toggle_scss_import_compile_note("hide");return!1}var i=TvrLang.scss_error_line,l=o?S.stat.scss_import_compile_notes.html():"",d=a.message.replace(r,"");S.scss_error={log:{short:TvrLang.scss_error,long:"<p>"+TvrLang.scss_error_long+'.</p><p style="font-weight: bold">'+d+".</p>"+l+'<p><span id="scss-line-error" class="link show-dialog" rel="display-css-code"  data-line="'+a.line+'" title="'+i+'">'+i+"</span></p>"},line:a.line,fullString:s},c.update_full_logs(S.scss_error.log),e.extend(!0,S.scss_error,a),S.stat.tvr.addClass("cur_scss_error")},clear_client_scss_error:function(){c.clear_messages(),S.stat.tvr.removeClass("cur_scss_error"),S.scss_error=!1},scssCompileNext:{},compileQueue:[],enqeueCompile:function(e){S.compileQueue.push(e)},deqeueCompile:function(){S.compileQueue.shift()},pendingCompile:function(){return!!S.compileQueue[0]&&S.compileQueue[0]},mt_compile_scss:function(a,s,r,o,n){if(S.compilingSCSS)return S.enqeueCompile([a,s,r,o,n]),!1;t.startT("prep_and_compile_scss"),t.startT("prep_scss"),S.compilingSCSS=!0;var i=a.settings,l=i.preprocessor,d=S.prepare_scss_sources_obj(),_=i.fullSCSSCompile||l.importChanged||S.fullCompileNeeded;S.fullCompileNeeded=_,d.numSels=0,_&&!S.scssCompileNext.run?(c.update_prog_indicator("plus",TvrLang.compile_scss),S.scss_compile_everything(d)):S.add_selective_sources(d,l,o),S.cachedDeps=e.extend(!0,{},d.deps),t.endT("prep_scss"),t.startT("compile_scss"),S.sass.compile(d.fullstring,(function(e){_&&c.update_prog_indicator("minus",!1,TvrLang.compile_scss),t.endT("compile_scss"),t.endT("prep_and_compile_scss"),S.compilingSCSS=!1,t.startT("post_scss_node_update_or_error");var o=new RegExp(t.escapeRegExp(S.scss_div),"g");S.previousSCSSCompile=d.fullstring.replace(o,""),e.status&&3!==e.status?(S.log_client_scss_error(!0,e,!1,o),a.sassCompileError=1):(S.fullCompileNeeded=!1,S.scss_error&&S.clear_client_scss_error(),i=S.update_nodes_with_compiled_css(i,d,e),S.cachedDeps=!1),t.endT("post_scss_node_update_or_error");var l=S.pendingCompile();if(l)return S.deqeueCompile(),S.mt_compile_scss.apply(this,l),!1;a.isSassVendorPrefixPatch||a.keepSelectorAsUnsavedDraft||c.save_or_start_timer(a,s,r,n)}))},update_nodes_with_compiled_css:function(e,s,r){var o=r.text?r.text.trim():"",n=S.extract_compiled_parts(o),l="";";"===n[n.length-1]&&n.pop(),s.parts.length,n.length;for(var d=0;d<n.length;d++){var _=s.parts[d];if(!(_.isJunk||_.trail&&!t.checkObject(S.uiData,_.trail))){var u=_.compiled_css_trail?_.compiled_css_trail:_.trail.concat(["compiled_css"]);l=n[d].trim()+"\n",_.node_trail&&(l=l.replace(c.full_editor_placeholder_comment,""));var p={action:"replace",trail:u,data:l=S.apply_sass_post_css(l)};e.savePackage?i.updateObjectAndSavePackage(e.savePackage,p):t.updateObject(S.uiData,u,l,p),_.node_trail&&S.iframeEditing()&&a.update_preview_style_node(_.node_trail,l)}}for(var f=Object.keys(s.sectionNodes),g=0;g<f.length;g++){var m=f[g].split("."),v=m[0],h=m[1],b=[v,h];l=t.get_section_css(!1,!1,t.get_js_object_data([h],v).data,h),S.iframeEditing()&&a.update_preview_style_node(b,l,i.get_media_query(v))}return e},apply_sass_post_css:function(e){var t=l.parse_css(e,!0);return t.stylesheet.rules=l.add_final_compile_data(t.stylesheet.rules),l.stringify_css(t,{opts:{},tabDepth:0,tab:""})},get_selector_index_from_trail:function(e,t){var a=S.get_section_index(e),s=t.length>2?t.slice(Math.max(t.length-2,1)):t;return a+S.get_selector_index(s)},scss_deps_to_string_parts:function(e,a,s){for(var r=0;r<s.length;r++){var o=s[r],n=a[o].filter(Boolean),i="all-devices"!==o&&n.length,l=i?"\t":"";if(i){var c=S.pref.m_queries[o],d="\n\n/*( "+c.label+" )*/\n";e.fullstring+=d+c.query+" {\n"+S.scss_div,e.parts.push({isJunk:!0})}for(var _ in n)if(n.hasOwnProperty(_)){var u=n[_];if(t.checkObject(S.uiData,[u.sectionSlug,u.selectorSlug])){var p="\n"+l+"/** "+S.get_section_name(u.sectionSlug)+" >> "+S.get_selector_name([u.sectionSlug,u.selectorSlug])+" **/\n"+l+S.scss_div;e.fullstring+=p,e.parts.push({isJunk:!0}),"all-devices"!==u.mq_key&&(u.code=u.code.replace(/\n/g,"\n\t")),e.fullstring+=u.code+S.scss_div,e.parts.push({trail:u.trail,mq_key:u.mq_key}),e.sectionNodes[u.mq_key+"."+u.sectionSlug]=1}}i&&(e.fullstring+="\n}\n"+S.scss_div,e.parts.push({isJunk:!0}))}},add_full_code_scss_part:function(t){if(!S.uiData.non_section.hand_coded_css)return!1;var a=l.get_trail_from_name("tvr_mcth[non_section][hand_coded_css_compiled]"),s=e.extend([],a),r="/*= Full Code Editor CSS ============ */\n\n"+S.scss_div;t.fullstring=S.uiData.non_section.hand_coded_css+S.scss_div+t.fullstring,t.parts.unshift({compiled_css_trail:a,node_trail:s}),t.fullstring=r+t.fullstring,t.parts.unshift({isJunk:!0})},scss_error:!1,scss_compile_everything:function(e){S.add_full_code_scss_part(e),e.deps=i.run_global_scans({},["get_all_scss"]).deps,S.scss_deps_to_string_parts(e,e.deps,Object.keys(TvrMQsCombined))},get_section_name:function(e){return t.checkObject(S.uiData,[e,"this","label"])},get_selector_name:function(e){return t.checkObject(S.uiData,e.concat(["label"])).split("|")[0]},get_section_index:function(e){return t.checkObject(S.uiData,[e,"this","index"])},get_selector_index:function(e){return t.checkObject(S.uiData,e.concat(["index"]))},check_update_scss_changes:function(e,a){var s=this.get_scss_types(a);if("parseFail"===s)return!1;var r=t.checkObject(S.uiData,a.scss_types_trail),o=S.compare_scss_types(r,s);if(o){if(t.obj_length(o.extend)>0&&(S.search_scss_extendable_selectors(e,a,o.extend,s),s=e.active_scss_types),s.extend)for(var n=Object.keys(s.extend),l=0;l<n.length;l++){var c=n[l];t.checkObject(o,["extend",c])||(s.extend[c]=r.extend[c])}i.updateObjectAndSavePackage(e.savePackage,{action:"replace",trail:a.scss_types_trail,data:s})}return o},search_scss_extendable_selectors:function(e,t,a,s){e.extend=a,e.active_scss_types=s,t.mq_key&&(e.mq_key=t.mq_key);var r=i.run_global_scans(e,["tag_extended"]);e.active_scss_types=r.active_scss_types},extract_compiled_parts:function(e){return e.split(S.scss_div).filter(Boolean)},check_file_exists:function(a,s){var r=TvrMT.data.dyn.micro_files,o=a.split("/"),n=o.length-1,i=o[n],l=[o];if(s){var c=t.file_extension(i);c&&(c=c[1]);var d=t.strip_extension(i).replace("_",""),_=c?[c]:["scss","sass","css"],u=[d,"_"+d];l=[];for(var p=0;p<_.length;p++)for(var f=0;f<u.length;f++){var g=u[f],m=_[p],v=e.extend([],o);v[n]=g+"."+m,l.push(v)}}for(var h=0;h<l.length;h++){var b=l[h];if(t.checkObject(r,b))return b.join("/")}return!1},toggle_enabled_buttons:function(){t.startT(arguments),S.totalSels<1&&(S.reset_global_vars(),e("#starter-message").removeClass("hidden"),e("#quick-nav").addClass("hidden"),S.stat.tvr.removeClass("tvr-sels-exist").addClass("tvr-no-sels"),S.stat.res.find(".mq-tab").removeClass("hasValues")),S.totalSels>0&&(e("#starter-message").addClass("hidden"),e("#quick-nav").removeClass("hidden"),S.stat.tvr.addClass("tvr-sels-exist").removeClass("tvr-no-sels")),t.endT(arguments)},maybeFilterNewPreviewUrl:function(e){TvrMT.data.dyn.ui_config.supportContent&&(e=t.append_url_param(e,"dyn_amends")),S.stat.iframeDoc.location=e},remember_page_viewed:function(s){if(t.startT(arguments),!a)return!1;var r=s||a.get_current_url();if(!r)return!1;r=t.strip_page_builder_and_other_params(r);var o=t.extract_url_path(r,S.blog_details);if(t.hasValue(r)&&!S.placeholderFrame){var n=a.get_current_page_title(o);"Untitled"===n&&(n=o),c.simple_ajax_request({type:"GET",url:S.ajaxUrl+"&mt_preview_url="+encodeURIComponent(r)+"&mt_preview_path="+encodeURIComponent(o)+"&mt_path_label="+encodeURIComponent(n)+"&mt_item_id="+S.pageOrPostID});let s=e("#edit-page-directly"),_=a.getMTDynFrontData()||{},u=_.permalink||r;s.attr("href",r),_.isAdminArea?s.removeClass("hidden"):s.addClass("hidden"),S.stat.changeUrlInputWrap.find("input").val(""),e("#back-to-frontend").attr("href",u),S.pref.preview_url=r,e("#pref-preview-url-input").val(r);var i=TvrMT.data.prog.combo.custom_paths,l=t.in_array(o,i,!1,"value");l&&i.splice(l,1);for(var d=i.length-1;d>=0;d--)i[d].label===n&&i.splice(d,1);i.unshift({value:o,label:n,item_id:S.pageOrPostID}),TvrMT.data.prog.combo.custom_paths=i.slice(0,8)}t.endT(arguments)},remember_css_import_file:function(){t.startT(arguments);var a=e("#stylesheet_to_import").val();if(!t.hasValue(a))return!1;c.simple_ajax_request({type:"GET",url:S.ajaxUrl+"&import_css_url="+encodeURI(a)});var s=t.in_array(a,TvrMT.data.prog.combo.viewed_import_stylesheets);!1!==s&&TvrMT.data.prog.combo.viewed_import_stylesheets.splice(s,1),TvrMT.data.prog.combo.viewed_import_stylesheets.unshift(a),t.endT(arguments)},exclStylesheetSubStrings:{always:[{str:"wp-includes/css",unless:null},{str:"wp-includes/js"},{str:"admin-bar"},{str:"dashicons"},{str:"font-awesome"},{str:"genericons"},{str:"microthemer/css/frontend"},{str:"animate.min.css"},{str:"fonts.googleapis.com"},{str:"elementor/assets",unless:"frontend.min.css"}],FLBuilder:[{str:"bb-plugin/css"},{str:"foundation-icons"}],oxygen:[{str:"component-framework/vendor"},{str:"component-framework/toolbar"},{str:"wp-includes/js/tinymce"},{str:"jquery-ui.css"},{str:"buttons.min.css"},{str:"mediaelementplayer-legacy.min.css"},{str:"wp-mediaelement.min.css"},{str:"imgareaselect.css"},{str:"wp-includes/css/editor.min.css"}]},ignore_stylesheet:function(e,t){if(!e)return!(!t.ownerNode||"ct_svg_sets"!==t.ownerNode.className);var a=S.exclStylesheetSubStrings;for(var s in a)if(a.hasOwnProperty(s)&&("always"===s||TvrMT.integrate[s]))for(var r in a[s])if(a[s].hasOwnProperty(r)){var o=a[s][r];if(e.indexOf(o.str)>-1&&(!o.unless||e.indexOf(o.unless)<0))return!0}return!1},filter_excluded_stylesheets:function(e){for(var t=e.length-1;t>=0;t--)S.ignore_stylesheet(e[t].href,e[t])&&e.splice(t,1);return e},refresh_stylesheet_list:function(t){var s=t.siblings("input"),r=a.stat.doc.styleSheets,o=["admin-bar","dashicons","genericons","microthemer/css/frontend"],n=[];for(var i in r)if(r.hasOwnProperty(i)){var l=r[i].href,c=!1;if(l){for(var d in o)if(o.hasOwnProperty(d)&&l.indexOf(o[d])>-1){c=!0;break}c||n.push(l)}}TvrMT.data.prog.combo.viewed_import_stylesheets=e.extend(!0,[],n),s.focus().MTautocomplete().MTautocomplete("search","")},update_prev_next_sel_buttons:function(a){if(t.startT(arguments),!a)return e("#vb-focus-prev, #vb-focus-next").addClass("disabled"),!1;var s=S.slugs_from_id(a),r=e("#vb-focus-prev"),o=e("#vb-focus-next"),n=S.itemScan("selector","prev","getID",s.sectionSlug,s.selectorSlug,{incCurrentSection:!0}),i=S.itemScan("selector","next","getID",s.sectionSlug,s.selectorSlug,{incCurrentSection:!0});n?r.removeClass("disabled"):r.addClass("disabled"),i?o.removeClass("disabled"):o.addClass("disabled"),t.endT(arguments)},itemScan:function(e,s,r,o,n,l){var c=(l=l||{}).incCurrentSection?"IncCurrent":"",d=t.editArray(Object.keys(S.uiData),"non_section","remove");d=t.editArray(d,o,s+"Items"+c),"prev"===s&&d.reverse();for(var _=0;_<d.length;_++){var u=d[_];if("section"===e)switch(r){case"getPreviousNode":var p=i.format_css_node_id([l.mq_key,u]),f=a.frontend_jquery_select("#"+p);if(t.isDomEl(f))return f;break;case"getSlugIfHasLogic":if(t.checkObject(S.uiData,[u,"this","logic","expr"]))return u;break;case"getID":return"strk-"+u}if("selector"===e){var g=t.editArray(Object.keys(S.uiData[u]),"this","remove");g=o===u?t.editArray(g,n,s+"Items"):g,"prev"===s&&g.reverse();for(var m=0;m<g.length;m++){var v=g[m];switch(r){case"getPreviousNode":var h=i.format_css_node_id([l.mq_key,u,v]),b=a.frontend_jquery_select("#"+h);if(t.isDomEl(b))return b;break;case"getID":return"strk-"+u+"-"+v}}}}switch(r){case"getPreviousNode":return a.frontend_jquery_select("#"+i.format_css_node_id([l.mq_key]));case"getID":return!1}return!1},itemScanOld:function(e,s,r,o,n){var l=(n=n||{}).incCurrentSection?"IncCurrent":"",c=t.editArray(Object.keys(S.uiData),"non_section","remove");c=t.editArray(c,r,e+"Items"+l),"prev"===e&&c.reverse();for(var d=0;d<c.length;d++){var _=c[d],u=t.editArray(Object.keys(S.uiData[_]),"this","remove");u=r===_?t.editArray(u,o,e+"Items"):u,"prev"===e&&u.reverse();for(var p=0;p<u.length;p++){var f=u[p];switch(s){case"getPreviousNode":var g=i.format_css_node_id([n.mq_key,_,f]),m=a.frontend_jquery_select("#"+g);if(t.isDomEl(m))return m;break;case"getID":return"strk-"+_+"-"+f}}}switch(s){case"getPreviousNode":return a.frontend_jquery_select("#"+i.format_css_node_id([n.mq_key]));case"getID":return!1}return!1},tvr_iterate_selectors_v:function(s,r,o){if(t.startT(arguments),"add_draft_selector"===(o=o||{}).action||o.draftSelectorFolderCreated||S.cancel_draft_selector_edit(),r=r||s.attr("id"),s=s||e("#"+r),!t.isDomEl(s,!0))for(var n=S.slugs_from_id(r),i="strk-"+n.sectionSlug+"-"+n.selectorSlug,l=e("#strk-"+n.sectionSlug),c={sectionSlug:n.sectionSlug,sectionM:l},d=S.load_folder_menu_selectors(c),_=0;_<d.length;_++){var u=e(d[_]);u.attr("id")===i&&(s=u)}S.stat.opts.add(S.stat.mainMenu).find("li.in-focus").removeClass("in-focus");var p=S.get_meta(s,"selector");if(p.sectionM.hasClass("is-open")||S.open_folder(p,!0),"html"===S.pref.pg_focus){let e="html",a=t.get_js_object_data([p.sectionSlug,p.selectorSlug,"styles",e],p.tabSlug).data;S.resolveMultiTab(p.sectionSlug,p.selectorSlug,e,a)}var f=S.load_selector(p,{items:["selector"]});if((p=S.get_meta(f,"selector")).selector.add(p.selectorM).add(p.section).add(p.sectionM).addClass("in-focus"),S.update_global_vars(p,o),S.unload_all_option_selectors(),S.update_prev_next_sel_buttons(p.selectorID),!o.addPseudoBaseStyles)return S.maybe_default_to_pg(o),S.js_check_values({},p),S.selector_check_disabled(p),g.toolbar_adjusted(),S.iframeEditing()&&!o.elementAlreadySelected&&(o.existingSelCSS=t.custom_escape_quotes(S.curSelCSS),o.selMID=p.selectorMID,a.select_current_selector_elements(o)),p},iframeEditing:function(e){return a&&(!e||a.getMTDynFrontData()&&a.getMTDynFrontData().interactions)},maybe_default_to_pg:function(e,t=!0){var a=S.pref.pg_focus,s=a?".pg-icon-"+a:".pg-icon-font";S.pg_icon_pressed(S.stat.css_icons.find(s),t,e)},quick_nav:function(a){if(t.startT(arguments),a.hasClass("disabled")||!S.selInFocusID)return!1;var s=S.get_meta(e("#"+S.selInFocusID),"selector"),r="vb-focus-prev"===a.attr("id")?"prev":"next";S.tvr_iterate_selectors_v(!1,S.itemScan("selector",r,"getID",s.sectionSlug,s.selectorSlug,{incCurrentSection:!0}),{doNotBringStylesTop:1})},gutenbergIsActive:function(){return S.stat.settingsMenu.find(".activate_gutenberg .mt-ui-toggle").hasClass("on")},set_vars:function(){a=TvrMT.MTF,s=window.TvrMT.MTdetached,r=window.TvrMT.detachedWin}};var S=TvrMT.TvrUi;MTlocal.set_vars(),t.set_vars(),o.set_vars(),n.set_vars(),i.set_vars(),l.set_vars(),c.set_vars(),d.set_vars(),_.set_vars(),u.set_vars(),p.set_vars(),f.set_vars(),m.set_vars(),g.set_vars(),S.init()}));